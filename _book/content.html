
		    <html>
		      <head>
					  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
		        <title>makeone.book-out</title>
						
						<link href="style/github-bf51422f4bb36427d391e4b75a1daa083c2d840e.css" media="all" rel="stylesheet" type="text/css"/>
						<link href="style/github2-d731afd4f624c99a4b19ad69f3083cd6d02b81d5.css" media="all" rel="stylesheet" type="text/css"/>
				
					  <style>
						pre {
						    counter-reset: line-numbering;
						    border: solid 1px #d9d9d9;
						    border-radius: 0;
						    background: #fff;
						    padding: 0;
						    line-height: 23px;
						    margin-bottom: 30px;
						    white-space: pre;
						    overflow-x: auto;
						    word-break: inherit;
						    word-wrap: inherit;
						}

						pre a::before {
						  content: counter(line-numbering);
						  counter-increment: line-numbering;
						  padding-right: 1em; /* space after numbers */
						  width: 25px;
						  text-align: right;
						  opacity: 0.7;
						  display: inline-block;
						  color: #aaa;
						  background: #eee;
						  margin-right: 16px;
						  padding: 2px 10px;
						  font-size: 13px;
						  -webkit-touch-callout: none;
						  -webkit-user-select: none;
						  -khtml-user-select: none;
						  -moz-user-select: none;
						  -ms-user-select: none;
						  user-select: none;
						}

						pre a:first-of-type::before {
						  padding-top: 10px;
						}

						pre a:last-of-type::before {
						  padding-bottom: 10px;
						}

						pre a:only-of-type::before {
						  padding: 10px;
						}
					
						.highlight { background-color: #ffffcc } /* RIGHT */
						</style>
					  <link rel="stylesheet" href="style/zTreeStyle/zTreeStyle.css" type="text/css">
					  <style>
					
						.ztree li a.curSelectedNode {
							padding-top: 0px;
							background-color: #FFE6B0;
							color: black;
							height: 16px;
							border: 1px #FFB951 solid;
							opacity: 0.8;
						}
						.ztree{
							overflow: auto;
							height:100%;
							min-height: 200px;
							top: 0px;
						}
					  </style>
		      </head>
		      <body>
					  <div>
								<div style='width:30%;'>
										<ul id="tree" class="ztree" style='width:100%'>
				
										</ul>
								</div>
				        <div id='readme' style='width:70%;margin-left:25%;'>
				          	<article class='markdown-body'>
				            	<style>.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f0f0f0; }
.highlight .c { color: #60a0b0; font-style: italic } /* Comment */
.highlight .err { /*border: 1px solid #FF0000*/ } /* Error */
.highlight .k { color: #007020; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #007020 } /* Comment.Preproc */
.highlight .c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
.highlight .cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #007020; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #007020 } /* Keyword.Pseudo */
.highlight .kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #902000 } /* Keyword.Type */
.highlight .m { color: #40a070 } /* Literal.Number */
.highlight .s { color: #4070a0 } /* Literal.String */
.highlight .na { color: #4070a0 } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #0e84b5; font-weight: bold } /* Name.Class */
.highlight .no { color: #60add5 } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #d55537; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #007020 } /* Name.Exception */
.highlight .nf { color: #06287e } /* Name.Function */
.highlight .nl { color: #002070; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #062873; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #bb60d5 } /* Name.Variable */
.highlight .ow { color: #007020; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #40a070 } /* Literal.Number.Bin */
.highlight .mf { color: #40a070 } /* Literal.Number.Float */
.highlight .mh { color: #40a070 } /* Literal.Number.Hex */
.highlight .mi { color: #40a070 } /* Literal.Number.Integer */
.highlight .mo { color: #40a070 } /* Literal.Number.Oct */
.highlight .sb { color: #4070a0 } /* Literal.String.Backtick */
.highlight .sc { color: #4070a0 } /* Literal.String.Char */
.highlight .sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #4070a0 } /* Literal.String.Double */
.highlight .se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #4070a0 } /* Literal.String.Heredoc */
.highlight .si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
.highlight .sx { color: #c65d09 } /* Literal.String.Other */
.highlight .sr { color: #235388 } /* Literal.String.Regex */
.highlight .s1 { color: #4070a0 } /* Literal.String.Single */
.highlight .ss { color: #517918 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #bb60d5 } /* Name.Variable.Class */
.highlight .vg { color: #bb60d5 } /* Name.Variable.Global */
.highlight .vi { color: #bb60d5 } /* Name.Variable.Instance */
.highlight .il { color: #40a070 } /* Literal.Number.Integer.Long */</style>
<h1>DP, 动态规划类</h1>

<p><span id="best-time-to-buy-and-sell-stock"></span>
<span id="Best-Time-to-Buy-and-Sell-Stock-III"></span></p>

<h2>Best Time to Buy and Sell Stock III</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/">Best Time to Buy and Sell Stock III</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Say</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">ith</span><span class="w"> </span><span class="vg">element</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">price</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">stock</span>
<span class="vg">on</span><span class="w"> </span><span class="vg">day</span><span class="w"> </span><span class="vg">i</span><span class="o">.</span>
<span class="vg">Design</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">profit</span><span class="o">.</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">complete</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">most</span><span class="w"> </span><span class="vg">two</span>
<span class="vg">transactions</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">engage</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">multiple</span><span class="w"> </span><span class="vg">transactions</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">same</span><span class="w"> </span><span class="vg">time</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">sell</span>
<span class="vg">the</span><span class="w"> </span><span class="vg">stock</span><span class="w"> </span><span class="vg">before</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">buy</span><span class="w"> </span><span class="vg">again</span><span class="p">)</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>从<a href="#best-time-to-buy-and-sell-stock">Best Time to Buy and Sell Stock</a>可知, 可以在O(n)的时间内，可以得到某个区间内的一次交易最大利润。设i从1到n-2，那么针对每一个i，看看在prices的子序列[0,...,i][i,...,n-1]上分别取得的最大利润即可，时间复杂度是O(n^2)。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maxSub</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">prices</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">start</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">start</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">start</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">min</span><span class="p">);</span>
            <span class="n">min</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">min</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">prices</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span>
                              <span class="n">maxSub</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">maxSub</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                              <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>可惜上面代码超时。</p>

<p>改进：那就是第一步扫描，先计算出子序列[0,...,i]中的最大利润，用一个数组保存下来，那么时间是O(n)。第二步是逆向扫描，计算子序列[i,...,n-1]上的最大利润，这一步同时就能结合上一步的结果计算最终的最大利润了，这一步也是O(n)。<a href="http://blog.unieagle.net/2012/12/05/leetcode%E9%A2%98%E7%9B%AE%EF%BC%9Abest-time-to-buy-and-sell-stock-iii%EF%BC%8C%E4%B8%80%E7%BB%B4%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">ref Here</a>
另外，<a href="http://www.cnblogs.com/TenosDoIt/p/3436457.html">此类问题这里有分析</a>.</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maxProfit2</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">prices</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">tail</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">head</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">head</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">head</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">min</span><span class="p">);</span>
            <span class="n">min</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">min</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="n">tail</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="c1">//tail[i], [i:n-1]</span>
        <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">tail</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">tail</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">max</span><span class="o">-</span><span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">max</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">max</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">head</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">tail</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Best-Time-to-Buy-and-Sell-Stock"></span></p>

<h2>Best Time to Buy and Sell Stock</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/best-time-to-buy-and-sell-stock/">Best Time to Buy and Sell Stock</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Say</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">ith</span><span class="w"> </span><span class="vg">element</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">price</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">stock</span>
<span class="vg">on</span><span class="w"> </span><span class="vg">day</span><span class="w"> </span><span class="vg">i</span><span class="o">.</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">were</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">permitted</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">complete</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">most</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">transaction</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">buy</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">and</span>
<span class="vg">sell</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">share</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">stock</span><span class="p">),</span><span class="w"> </span><span class="vg">design</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">profit</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>最简单就是O(n^2)暴力解法，可惜超时，过不了。
用DP, dp[i]表示前i个的最大利润。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">prices</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">min_</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">min_</span><span class="p">);</span>
            <span class="n">min_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">min_</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Climbing-Stairs"></span></p>

<h2>Climbing Stairs</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/climbing-stairs/">Climbing Stairs</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">You</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">climbing</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">stair</span><span class="w"> </span><span class="vg">case</span><span class="o">.</span><span class="w"> </span><span class="vg">It</span><span class="w"> </span><span class="vg">takes</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">steps</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">reach</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">top</span><span class="o">.</span>
<span class="vg">Each</span><span class="w"> </span><span class="vg">time</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">either</span><span class="w"> </span><span class="vg">climb</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="vg">steps</span><span class="o">.</span><span class="w"> </span><span class="vg">In</span><span class="w"> </span><span class="vg">how</span><span class="w"> </span><span class="vg">many</span><span class="w"> </span><span class="vg">distinct</span><span class="w"> </span><span class="vg">ways</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">climb</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">top</span><span class="o">?</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>设f(x)=【剩x阶时，迈楼梯的方法总数】。首先迈出第一步，如果一次迈一阶，剩下x-1阶，方法总数为f(x-1)；如果一次迈两阶，剩下x-2阶，方法总数为f(x-2); f(x)=f(x-1)+f(x-2)。容易发现，f(1)=1，f(2)=2。</p>
<div class="highlight"><pre>    <span class="c1">//TLE</span>
    <span class="kt">int</span> <span class="nf">climbStairsTLE</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">climbStairs</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">climbStairs</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div><div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">climbStairs</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="mi">2</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">c</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Decode-Ways"></span></p>

<h2>Decode Ways</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/decode-ways/">Decode Ways</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">A</span><span class="w"> </span><span class="vg">message</span><span class="w"> </span><span class="vg">containing</span><span class="w"> </span><span class="vg">letters</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">A</span><span class="o">-</span><span class="vg">Z</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">being</span><span class="w"> </span><span class="vg">encoded</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="nl">mapping:</span>
<span class="c1">&#39;A&#39; -&gt; 1</span>
<span class="c1">&#39;B&#39; -&gt; 2</span>
<span class="o">...</span>
<span class="c1">&#39;Z&#39; -&gt; 26</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">encoded</span><span class="w"> </span><span class="vg">message</span><span class="w"> </span><span class="vg">containing</span><span class="w"> </span><span class="vg">digits</span><span class="p">,</span><span class="w"> </span><span class="vg">determine</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">ways</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">decode</span><span class="w"> </span><span class="vg">it</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">encoded</span><span class="w"> </span><span class="vg">message</span><span class="w"> </span><span class="s2">&quot;12&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">decoded</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="s2">&quot;AB&quot;</span><span class="w"> </span><span class="p">(</span><span class="il">1</span><span class="w"> </span><span class="il">2</span><span class="p">)</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="s2">&quot;L&quot;</span><span class="w"> </span><span class="p">(</span><span class="il">12</span><span class="p">)</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">ways</span><span class="w"> </span><span class="vg">decoding</span><span class="w"> </span><span class="s2">&quot;12&quot;</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">2</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>动态规划. dp[i] 表示 s[0:i-1]的结果.</p>

<ol>
<li>若当前字符s[i-1]为0

<ul>
<li>若前面的字符是1或2, 则这1或2必须得跟0结合, dp[i] = dp[i-2] eg: XXX(10)</li>
<li>若前面的字符不是1或者2, 拼接不起来了，直接return 0.</li>
</ul></li>
<li>当前字符不为0

<ul>
<li>前面的字符为1  或者 2且当前字符为1-6. 即可分两种情况拆分, dp[i] = dp[i-2] + dp[i-1], eg: XXX16: (XXX)(16) + (XXX1)6</li>
<li>其他, 只能自己跟自己一组了. dp[i] = dp[i-1] eg: (XXX3)6</li>
</ul></li>
</ol>

<p>还可以将下面的O(n)空间化简成常数空间～记录之前上一次结果 和 上上一次的结果，当前的结果由此获得。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">numDecodings</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">s</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">dp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span> <span class="o">||</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;2&#39;</span><span class="p">)</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">];</span>
                <span class="k">else</span>
                    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span> <span class="o">||</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="sc">&#39;2&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="sc">&#39;6&#39;</span><span class="p">))</span>
                <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
            <span class="k">else</span>
                <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()];</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Distinct-Subsequences"></span></p>

<h2>Distinct Subsequences</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/distinct-subsequences/">Distinct Subsequences</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">T</span><span class="p">,</span><span class="w"> </span><span class="vg">count</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">distinct</span><span class="w"> </span><span class="vg">subsequences</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">T</span>
<span class="vg">in</span><span class="w"> </span><span class="vg">S</span><span class="o">.</span>
<span class="vg">A</span><span class="w"> </span><span class="vg">subsequence</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">new</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">formed</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">original</span>
<span class="vg">string</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">deleting</span><span class="w"> </span><span class="vg">some</span><span class="w"> </span><span class="p">(</span><span class="vg">can</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">none</span><span class="p">)</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="vg">without</span><span class="w"> </span><span class="vg">disturbing</span><span class="w"> </span><span class="vg">the</span>
<span class="vg">relative</span><span class="w"> </span><span class="vg">positions</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">remaining</span><span class="w"> </span><span class="vg">characters</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;ACE&quot;</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">subsequence</span><span class="w"> </span><span class="vg">of</span>
<span class="s2">&quot;ABCDE&quot;</span><span class="w"> </span><span class="vg">while</span><span class="w"> </span><span class="s2">&quot;AEC&quot;</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="p">)</span><span class="o">.</span>

<span class="vg">Here</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;rabbbit&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;rabbit&quot;</span>
<span class="vg">Return</span><span class="w"> </span><span class="il">3</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>动态规划, <code>dp[j][i]</code> 表示<code>S[:i],T[:j]</code>的结果, dp[j][i]至少为dp[j][i-1]
那么 若<code>S[i] == T[j]</code>, 则dp[j][i]还得加上dp[j-1][i-1]即S[:i-1],T[:j-1]的匹配结果。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">numDistinct</span><span class="p">(</span><span class="n">string</span> <span class="n">S</span><span class="p">,</span> <span class="n">string</span> <span class="n">T</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">S</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">T</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="n">T</span> <span class="o">==</span> <span class="n">S</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
        <span class="c1">//dp[j][i] S[:i] T[:j] matches</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
                <span class="k">if</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">T</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p>若以dp[j][i]中的i/j以长度来看的话，代码要简洁些。
初始化dp[0][0:i]=1 表示T中长度为0的串可以和S中任意长度匹配。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">numDistinct</span><span class="p">(</span><span class="n">string</span> <span class="n">S</span><span class="p">,</span> <span class="n">string</span> <span class="n">T</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">T</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">S</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="n">T</span> <span class="o">==</span> <span class="n">S</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
                <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">T</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span> <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">m</span><span class="p">][</span><span class="n">n</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p>节省内存</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">numDistinct</span><span class="p">(</span><span class="n">string</span> <span class="n">S</span><span class="p">,</span> <span class="n">string</span> <span class="n">T</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">T</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">S</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>    <span class="c1">// impossible for subsequence</span>

        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>            <span class="c1">// initial condition</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// traversing backwards so we are using path[i-1] from last time step</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">S</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span> <span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">path</span><span class="p">[</span><span class="n">m</span><span class="p">];</span> 
    <span class="p">}</span>
</pre></div>
<p>这题参考了<a href="https://oj.leetcode.com/discuss/2143/any-better-solution-that-takes-less-than-space-while-in-time?show=2143#q2143">REF</a>，其实跟<a href="#Interleaving-String">Interleaving String</a> 这道题差不多。</p>

<p><span id="Edit-Distance"></span></p>

<h2>Edit Distance</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/edit-distance/">Edit Distance</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">word1</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">word2</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">steps</span><span class="w"> </span><span class="vg">required</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">convert</span><span class="w"> </span><span class="vg">word1</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">word2</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="vg">each</span><span class="w"> </span><span class="vg">operation</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">counted</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">step</span><span class="o">.</span><span class="p">)</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="il">3</span><span class="w"> </span><span class="vg">operations</span><span class="w"> </span><span class="vg">permitted</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="nl">word:</span>
<span class="vg">a</span><span class="p">)</span><span class="w"> </span><span class="vg">Insert</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">character</span>
<span class="vg">b</span><span class="p">)</span><span class="w"> </span><span class="vg">Delete</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">character</span>
<span class="vg">c</span><span class="p">)</span><span class="w"> </span><span class="vg">Replace</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">character</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>编辑距离是动态规划里面的经典题目。
DP, DP[i][j] 表示word1[0:i-1] 与 word2[0:j-1]的编辑距离。<a href="http://en.wikipedia.org/wiki/Edit_distance">Ref</a>
<img src="http://upload.wikimedia.org/math/4/1/1/411039fdd7ca16f4569c10310156cfc2.png" alt="">
w(del), w(ins), w(sub) 分别是删除，插入，替换(substitute)的权重。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">minDistance</span><span class="p">(</span><span class="n">string</span> <span class="n">word1</span><span class="p">,</span> <span class="n">string</span> <span class="n">word2</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">word1</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">word2</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="n">dp</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
        <span class="c1">//dp[i][j]: word1[0:i-1] -&gt; word2[0:j-1]</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span><span class="c1">//insert</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">word1</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">word2</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
                <span class="k">else</span><span class="p">{</span>
                    <span class="kt">int</span> <span class="n">insert</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//insert word2[j] to word1[i]</span>
                    <span class="kt">int</span> <span class="n">_delete</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//delete word1[i]</span>
                    <span class="kt">int</span> <span class="n">replace</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//replace word1[i] to word2[j]</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">replace</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">insert</span><span class="p">,</span> <span class="n">_delete</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">m</span><span class="p">][</span><span class="n">n</span><span class="p">];</span>

    <span class="p">}</span>
</pre></div>
<p>关于更多编辑距离的算法及应用可参考 <a href="http://www.stanford.edu/class/cs124/lec/med.pdf">stanford 课件</a>。</p>

<p><span id="Interleaving-String"></span></p>

<h2>Interleaving String</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/interleaving-string/">Interleaving String</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">s1</span><span class="p">,</span><span class="w"> </span><span class="vg">s2</span><span class="p">,</span><span class="w"> </span><span class="vg">s3</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">whether</span><span class="w"> </span><span class="vg">s3</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">formed</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">interleaving</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">s1</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">s2</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="nl">Given:</span>
<span class="vg">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;aabcc&quot;</span><span class="p">,</span>
<span class="vg">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dbbca&quot;</span><span class="p">,</span>
<span class="vg">When</span><span class="w"> </span><span class="vg">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;aadbbcbcac&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">true</span><span class="o">.</span>
<span class="vg">When</span><span class="w"> </span><span class="vg">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;aadbbbaccc&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">false</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>递归</h3>

<p>超时。</p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">isInterleave</span><span class="p">(</span><span class="n">string</span> <span class="n">s1</span><span class="p">,</span> <span class="n">string</span> <span class="n">s2</span><span class="p">,</span> <span class="n">string</span> <span class="n">s3</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">isInterleave</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s2</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span> <span class="n">s3</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">bool</span> <span class="nf">isInterleave</span><span class="p">(</span><span class="n">string</span> <span class="n">s1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i1</span><span class="p">,</span> <span class="n">string</span> <span class="n">s2</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i2</span><span class="p">,</span> <span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i1</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">i1</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">i2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span><span class="p">((</span><span class="n">s1</span><span class="p">[</span><span class="n">i1</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="n">isInterleave</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">i1</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">if</span><span class="p">((</span><span class="n">s2</span><span class="p">[</span><span class="n">i2</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="n">isInterleave</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">i2</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h3>动态规划</h3>

<p>DP。</p>

<p>用DP，类似<a href="#Distinct-Subsequences">Distinct Subsequences</a> 一样，
dp[i][j]表示长度为i的s1[0:i-1],长度为j的s2[0:j-1]和s3[0:i+j-1]的匹配结果，那么 </p>
<div class="highlight"><pre><span class="vg">dp</span><span class="p">[</span><span class="vg">i</span><span class="p">][</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">dp</span><span class="p">[</span><span class="vg">i</span><span class="p">][</span><span class="vg">j</span><span class="il">-1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="vg">s2</span><span class="p">[</span><span class="vg">j</span><span class="il">-1</span><span class="p">]</span><span class="o">==</span><span class="vg">s3</span><span class="p">[</span><span class="vg">i</span><span class="o">+</span><span class="vg">j</span><span class="il">-1</span><span class="p">])</span><span class="w"> </span>
<span class="w">       </span><span class="o">||</span><span class="w"> </span><span class="vg">dp</span><span class="p">[</span><span class="vg">i</span><span class="il">-1</span><span class="p">][</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="vg">s1</span><span class="p">[</span><span class="vg">i</span><span class="il">-1</span><span class="p">]</span><span class="o">==</span><span class="vg">s3</span><span class="p">[</span><span class="vg">i</span><span class="o">+</span><span class="vg">j</span><span class="il">-1</span><span class="p">])</span><span class="w"> </span>
<span class="w">       </span><span class="vg">or</span><span class="w"> </span><span class="vg">false</span><span class="o">.</span>
</pre></div>
<p>注意边界的初始化条件.</p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">isInterleave</span><span class="p">(</span><span class="n">string</span> <span class="n">s1</span><span class="p">,</span> <span class="n">string</span> <span class="n">s2</span><span class="p">,</span> <span class="n">string</span> <span class="n">s3</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">n1</span> <span class="o">=</span> <span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="kt">int</span> <span class="n">n2</span> <span class="o">=</span> <span class="n">s2</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="kt">int</span> <span class="n">n3</span> <span class="o">=</span> <span class="n">s3</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">!=</span> <span class="n">n3</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">s2</span> <span class="o">==</span> <span class="n">s3</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">s1</span> <span class="o">==</span> <span class="n">s3</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n1</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n2</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">false</span><span class="p">));</span>
    <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">s2</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">n2</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">])</span>
                <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">s2</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">s3</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">else</span> 
                <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">n1</span><span class="p">][</span><span class="n">n2</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
<p><span id="Longest-Palindromic-Substring"></span></p>

<h2>Longest Palindromic Substring</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/longest-palindromic-substring/">Longest Palindromic Substring</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">S</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">palindromic</span><span class="w"> </span><span class="vg">substring</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">S</span><span class="o">.</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">1000</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">exists</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">palindromic</span><span class="w"> </span><span class="vg">substring</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>暴力搜索, \(O(N^2) \)</h3>

<p>最简单的方法就是选中i(0~n-1)，然后向两边扩展，复杂度为\(O(N^2) \) . 注意回文长度可能是奇数或者偶数， 即
<code>aba or abba</code></p>
<div class="highlight"><pre><span class="n">string</span> <span class="nf">longestPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="c1">//center: i</span>
      <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
      <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">right</span> <span class="o">&lt;</span> <span class="n">n</span>
          <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">right</span><span class="p">])</span>
          <span class="o">--</span><span class="n">left</span><span class="p">,</span> <span class="o">++</span><span class="n">right</span><span class="p">;</span>
      <span class="c1">//s[left] != s[right] , s[left+1 : right-1] is palindrome</span>
      <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="p">(</span><span class="n">right</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">left</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">maxLen</span><span class="p">)</span>
          <span class="n">start</span> <span class="o">=</span> <span class="n">left</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
      <span class="c1">//center: between s[i] and s[i+1]</span>
      <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
      <span class="p">{</span>
          <span class="n">left</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
          <span class="n">right</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
          <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">right</span> <span class="o">&lt;</span> <span class="n">n</span>
              <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">right</span><span class="p">])</span>
              <span class="o">--</span><span class="n">left</span><span class="p">,</span> <span class="o">++</span><span class="n">right</span><span class="p">;</span>
          <span class="n">len</span> <span class="o">=</span> <span class="p">(</span><span class="n">right</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">left</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">maxLen</span><span class="p">)</span>
              <span class="n">start</span> <span class="o">=</span> <span class="n">left</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
      <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">maxLen</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p>或者可以这样，将中间相同的字符跳过，不考虑奇数还是偶数的串(其实还是考虑了，也包括在内了)。</p>
<div class="highlight"><pre><span class="vg">abbbbbbbbba</span><span class="p">,</span><span class="w"> </span><span class="vg">left</span><span class="o">=</span><span class="il">1</span><span class="err">时</span><span class="p">,</span><span class="vg">right</span><span class="err">一直走到最后一个</span><span class="vg">b</span><span class="p">,</span><span class="w"> </span><span class="err">然后往两边判断是否相等</span><span class="o">.</span>
</pre></div><div class="highlight"><pre><span class="n">string</span> <span class="nf">longestPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
       <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
       <span class="k">while</span><span class="p">(</span><span class="n">right</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">right</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="p">])</span>
           <span class="o">++</span><span class="n">right</span><span class="p">;</span>
       <span class="c1">//s[right+1] != s[left], s[right]=s[left]</span>
       <span class="n">i</span> <span class="o">=</span> <span class="n">right</span><span class="p">;</span> <span class="c1">//skip the same char</span>
       <span class="c1">//a[bbbbbbbb]a</span>
       <span class="k">while</span><span class="p">(</span><span class="n">left</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">right</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span>
           <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">right</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
           <span class="o">--</span><span class="n">left</span><span class="p">,</span> <span class="o">++</span><span class="n">right</span><span class="p">;</span>
       <span class="c1">//s[left : right] is palindrome</span>
       <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">right</span> <span class="o">-</span> <span class="n">left</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
       <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">maxLen</span><span class="p">)</span>
           <span class="n">start</span> <span class="o">=</span> <span class="n">left</span><span class="p">,</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">maxLen</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h3>DP, \(O(N^2) \)</h3>

<p>dp[i][j] 表示 s[i:j] 是回文, 当且尽当<code>s[i] == [j] &amp;&amp; dp[i+1][j-1]</code>, 即计算dp[i][j]时, dp[i+1][j-1]得先计算出来，算dp[x][i]，必须先把dp[x][i-1]先计算出来了来。</p>
<div class="highlight"><pre><span class="n">string</span> <span class="nf">longestPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="c1">//vector&lt;vector&lt;bool&gt; &gt; dp(n, vector&lt;bool&gt;(n, false));</span>
   <span class="kt">bool</span> <span class="n">dp</span><span class="p">[</span><span class="mi">1000</span><span class="p">][</span><span class="mi">1000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="nb">false</span><span class="p">};</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
       <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
   <span class="c1">//dp[j][i]: s[j:i] is palindrome, dp[j+1][i-1] true + s[j]==s[i]</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
       <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
           <span class="p">{</span>
               <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
               <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
               <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">maxLen</span><span class="p">)</span>
                   <span class="n">maxLen</span> <span class="o">=</span> <span class="n">len</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
           <span class="p">}</span>
       <span class="p">}</span>
   <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">maxLen</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p>计算s[:5]的结果，先得把所有s[:4]结尾的回文算出来了来。
上面比如在算dp[i][5]时，用到了dp[x][4]，在上面的循环中,dp[x][4]已经算出来了的。
另外，虽然都是平方的算法，上面用vector还过不了，用数组才能过。</p>

<h3>\( O(n) \) 算法, Manacher 算法</h3>

<p><a href="http://www.felix021.com/blog/read.php?2040">felix021的文章讲得很清楚</a>，这里“偷”过来。</p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="err">首先用一个非常巧妙的方式，将所有可能的奇数</span><span class="o">/</span><span class="err">偶数长度的回文子串都转换成了奇数长度：在每个字符的两边都插入一个特殊的符号。比如</span><span class="w"> </span><span class="vg">abba</span><span class="w"> </span><span class="err">变成</span><span class="w"> </span><span class="err">#</span><span class="vg">a#b#b#a#</span><span class="err">，</span><span class="w"> </span><span class="vg">aba</span><span class="err">变成</span><span class="w"> </span><span class="err">#</span><span class="vg">a#b#a#</span><span class="err">。</span><span class="w"> </span><span class="err">为了进一步减少编码的复杂度，可以在字符串的开始加入另一个特殊字符，这样就不用特殊处理越界问题，比如$#</span><span class="vg">a#b#a#</span><span class="err">（注意，下面的代码是用</span><span class="vg">C</span><span class="err">语言写就，由于</span><span class="vg">C</span><span class="err">语言规范还要求字符串末尾有一个</span><span class="c1">&#39;\0&#39;所以正好OK，但其他语言可能会导致越界）。</span>

<span class="err">下面以字符串</span><span class="il">12212321</span><span class="err">为例，经过上一步，变成了</span><span class="w"> </span><span class="vg">S</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;$#1#2#2#1#2#3#2#1#&quot;</span><span class="p">;</span>

<span class="err">然后用一个数组</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="err">来记录以字符</span><span class="vg">S</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">为中心的最长回文子串向左</span><span class="o">/</span><span class="err">右扩张的长度（包括</span><span class="vg">S</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">，也就是把该回文串“对折”以后的长度），比如</span><span class="vg">S</span><span class="err">和</span><span class="vg">P</span><span class="err">的对应关系：</span>
<span class="vg">S</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">3</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="err">#</span>
<span class="vg">P</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">5</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">4</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">6</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">1</span>
<span class="p">(</span><span class="vg">p</span><span class="o">.</span><span class="vg">s</span><span class="o">.</span><span class="w"> </span><span class="err">可以看出，</span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="il">-1</span><span class="err">正好是原字符串中回文串的总长度）</span>
<span class="err">那么怎么计算</span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">呢？该算法增加两个辅助变量（其实一个就够了，两个更清晰）</span><span class="vg">id</span><span class="err">和</span><span class="vg">mx</span><span class="err">，其中</span><span class="vg">id</span><span class="err">表示最大回文子串中心的位置，</span><span class="vg">mx</span><span class="err">则为</span><span class="vg">id</span><span class="o">+</span><span class="vg">P</span><span class="p">[</span><span class="vg">id</span><span class="p">]</span><span class="err">，也就是最大回文子串的边界。</span>

<span class="err">然后可以得到一个非常神奇的结论，这个算法的关键点就在这里了：如果</span><span class="vg">mx</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">i</span><span class="err">，那么</span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">MIN</span><span class="p">(</span><span class="vg">P</span><span class="p">[</span><span class="il">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="vg">id</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="p">],</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="p">)</span><span class="err">。就是这个串卡了我非常久。实际上如果把它写得复杂一点，理解起来会简单很多：</span>
<span class="o">//</span><span class="err">记</span><span class="vg">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="vg">id</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="err">，也就是说</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="err">是</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="err">关于</span><span class="w"> </span><span class="vg">id</span><span class="w"> </span><span class="err">的对称点。</span>
<span class="vg">if</span><span class="w"> </span><span class="p">(</span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">])</span><span class="w"> </span>
<span class="w">    </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">];</span>
<span class="vg">else</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="err">，取最小值，之后再匹配更新。</span>
<span class="err">当然光看代码还是不够清晰，还是借助图来理解比较容易。</span>
<span class="err">当</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="err">的时候，以</span><span class="vg">S</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="err">为中心的回文子串包含在以</span><span class="vg">S</span><span class="p">[</span><span class="vg">id</span><span class="p">]</span><span class="err">为中心的回文子串中，由于</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="err">对称，以</span><span class="vg">S</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">为中心的回文子串必然包含在以</span><span class="vg">S</span><span class="p">[</span><span class="vg">id</span><span class="p">]</span><span class="err">为中心的回文子串中，所以必有</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="err">，见下图。</span>
</pre></div>
<p><img src="http://tl3shi.github.io/resource/blogimage/leetcode-longest-palindromic-substring-0.png" alt=""></p>
<div class="highlight"><pre><span class="err">当</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="err">的时候，以</span><span class="vg">S</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="err">为中心的回文子串不一定完全包含于以</span><span class="vg">S</span><span class="p">[</span><span class="vg">id</span><span class="p">]</span><span class="err">为中心的回文子串中，但是基于对称性可知，下图中两个绿框所包围的部分是相同的，也就是说以</span><span class="vg">S</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">为中心的回文子串，其向右至少会扩张到</span><span class="vg">mx</span><span class="err">的位置，也就是说</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="err">。至于</span><span class="vg">mx</span><span class="err">之后的部分是否对称，就只能老老实实去匹配了。</span>
</pre></div>
<p><img src="http://tl3shi.github.io/resource/blogimage/leetcode-longest-palindromic-substring-1.png" alt=""></p>
<div class="highlight"><pre><span class="err">对于</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="err">的情况，无法对</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">做更多的假设，只能</span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1</span><span class="err">，然后再去匹配了。</span>
</pre></div>
<p>代码如下：</p>
<div class="highlight"><pre><span class="c1">//Manacher O(n)</span>
<span class="c1">//ref1: http://leetcode.com/2011/11/longest-palindromic-substring-part-ii.html</span>
<span class="c1">//ref2: http://blog.csdn.net/pickless/article/details/9040293</span>
<span class="c1">//ref3: http://www.felix021.com/blog/read.php?2040</span>
<span class="n">string</span> <span class="nf">longestPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
   <span class="n">string</span> <span class="n">news</span><span class="p">(</span><span class="n">len</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="sc">&#39; &#39;</span><span class="p">);</span>
   <span class="n">news</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="sc">&#39;$&#39;</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">news</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;#&#39;</span><span class="p">;</span>
       <span class="n">news</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
   <span class="p">}</span>
   <span class="n">news</span><span class="p">[</span><span class="n">len</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;#&#39;</span><span class="p">;</span>
   <span class="n">news</span><span class="p">[</span><span class="n">len</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">(</span><span class="n">len</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
   <span class="kt">int</span> <span class="n">mx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">mx</span> <span class="o">&gt;</span> <span class="n">i</span> <span class="o">?</span> <span class="n">min</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">id</span><span class="o">-</span><span class="n">i</span><span class="p">],</span> <span class="n">mx</span><span class="o">-</span><span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
       <span class="k">while</span><span class="p">(</span><span class="n">news</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">==</span> <span class="n">news</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span> <span class="o">++</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
       <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">mx</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="n">mx</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
           <span class="n">id</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
       <span class="p">}</span>
   <span class="p">}</span>
   <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">center</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">maxLen</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="n">maxLen</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
           <span class="n">center</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
       <span class="p">}</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">((</span><span class="n">center</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">maxLen</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">maxLen</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<!-- MathJax Section -->

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<p><span id="Maximum-Product-Subarray"></span></p>

<h2>Maximum Product Subarray</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/maximum-product-subarray/">Maximum Product Subarray</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">contiguous</span><span class="w"> </span><span class="vg">subarray</span><span class="w"> </span><span class="vg">within</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="p">(</span><span class="vg">containing</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">least</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">number</span><span class="p">)</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">largest</span><span class="w"> </span><span class="vg">product</span><span class="o">.</span><span class="w">    </span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">-2</span><span class="p">,</span><span class="il">4</span><span class="p">],</span>
<span class="vg">the</span><span class="w"> </span><span class="vg">contiguous</span><span class="w"> </span><span class="vg">subarray</span><span class="w"> </span><span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">]</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">largest</span><span class="w"> </span><span class="vg">product</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">6</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>暴力O(n^2)</h3>

<p>超时</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maxProductN2</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">A</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">t</span> <span class="o">*=</span> <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">t</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>DP O(n)</h3>

<p>记录到i为止的最大值和最小值，最小值乘以当前值可能反而变成最大值，不用去考虑当前A[i]的值的正负，分情况讨论，这样反而复杂。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maxProduct</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">A</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">dpMin</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">dpMax</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">dpMax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">dpMin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">dpMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">dpMax</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">dpMin</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">dpMax</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">dpMin</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">dpMin</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">dpMax</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>可以用O(1)的空间，记录上一次的结果。代码就直接贴 <a href="https://oj.leetcode.com/discuss/11923/sharing-my-solution-o-1-space-o-n-running-time">discuss</a> 里的了。</p>
<div class="highlight"><pre>    <span class="c1">//[ref](https://oj.leetcode.com/discuss/11923/sharing-my-solution-o-1-space-o-n-running-time)</span>
    <span class="kt">int</span> <span class="nf">maxProduct</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">A</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">maxherepre</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">minherepre</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">maxsofar</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">maxhere</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">minhere</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">maxhere</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">maxherepre</span> <span class="o">*</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">minherepre</span> <span class="o">*</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">minhere</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">maxherepre</span> <span class="o">*</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">minherepre</span> <span class="o">*</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">maxsofar</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">maxhere</span><span class="p">,</span> <span class="n">maxsofar</span><span class="p">);</span>
            <span class="n">maxherepre</span> <span class="o">=</span> <span class="n">maxhere</span><span class="p">;</span>
            <span class="n">minherepre</span> <span class="o">=</span> <span class="n">minhere</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">maxsofar</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Maximum-Subarray"></span></p>

<h2>Maximum Subarray</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/maximum-subarray/">Maximum Subarray</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">contiguous</span><span class="w"> </span><span class="vg">subarray</span><span class="w"> </span><span class="vg">within</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="p">(</span><span class="vg">containing</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">least</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">number</span><span class="p">)</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">largest</span><span class="w"> </span><span class="vg">sum</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="p">[</span><span class="err">−</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="err">−</span><span class="il">3</span><span class="p">,</span><span class="il">4</span><span class="p">,</span><span class="err">−</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="err">−</span><span class="il">5</span><span class="p">,</span><span class="il">4</span><span class="p">],</span>
<span class="vg">the</span><span class="w"> </span><span class="vg">contiguous</span><span class="w"> </span><span class="vg">subarray</span><span class="w"> </span><span class="p">[</span><span class="il">4</span><span class="p">,</span><span class="err">−</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">]</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">largest</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">6</span><span class="o">.</span>
<span class="vg">More</span><span class="w"> </span><span class="nl">practice:</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">figured</span><span class="w"> </span><span class="vg">out</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">O</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="w"> </span><span class="vg">solution</span><span class="p">,</span><span class="w"> </span><span class="vg">try</span><span class="w"> </span><span class="vg">coding</span><span class="w"> </span><span class="vg">another</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">divide</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">conquer</span><span class="w"> </span><span class="vg">approach</span><span class="p">,</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">more</span><span class="w"> </span><span class="vg">subtle</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>注意此例是连续subarray,且最少得选1个。</p>

<p>若当前i，前面i-1的结果若为负的话，新序列就从当前A[i]开始算起了，不然就将当前A[i]附加上去。</p>

<h3>DP, O(n) 空间</h3>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maxSubArray</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="k">else</span>
                <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>DP, O(1) 空间</h3>

<p>上面的优化一下即可。</p>
<div class="highlight"><pre>    <span class="c1">//Kadane&#39;s algorithm O(n)</span>
    <span class="c1">//max_end_here是结束位置为i-1的最大子数组和</span>
    <span class="kt">int</span> <span class="nf">maxSubArray</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">max_so_far</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">max_end_here</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">max_end_here</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">max_end_here</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="k">else</span>
                <span class="n">max_end_here</span> <span class="o">+=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="n">max_so_far</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">max_so_far</span><span class="p">,</span> <span class="n">max_end_here</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">max_so_far</span> <span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>分治, O(nlogn)</h3>

<p>分治算法：要么左半/右半，要么包括中间的和左右两边都有部分, 时间复杂度<code>O(NlogN)</code>.</p>
<div class="highlight"><pre>    <span class="c1">//Divide and Conquer O(nlogn)</span>
    <span class="kt">int</span> <span class="nf">maxSubArrayDAC</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">left</span><span class="p">,</span> <span class="kt">int</span> <span class="n">right</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">right</span> <span class="o">&lt;</span> <span class="n">left</span><span class="p">)</span> <span class="k">return</span> <span class="n">INT_MIN</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">right</span> <span class="o">==</span> <span class="n">left</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">A</span> <span class="p">[</span><span class="n">left</span><span class="p">];</span> <span class="c1">//at least 1 element</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="p">((</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
        <span class="c1">//across left and right</span>
        <span class="kt">int</span> <span class="n">crossSumLeft</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">];</span> <span class="c1">//including mid</span>
        <span class="kt">int</span> <span class="n">crossMaxLeft</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">left</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">crossSumLeft</span> <span class="o">+=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="n">crossMaxLeft</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">crossMaxLeft</span><span class="p">,</span> <span class="n">crossSumLeft</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">crossSumRight</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">crossMaxRight</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">crossSumRight</span> <span class="o">+=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="n">crossMaxRight</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">crossMaxRight</span><span class="p">,</span> <span class="n">crossSumRight</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">crossMax</span> <span class="o">=</span> <span class="n">crossMaxLeft</span> <span class="o">+</span> <span class="n">crossMaxRight</span> <span class="o">-</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">leftMax</span> <span class="o">=</span> <span class="n">maxSubArrayDAC</span><span class="p">(</span> <span class="n">A</span><span class="p">,</span> <span class="n">left</span> <span class="p">,</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">rightMax</span> <span class="o">=</span> <span class="n">maxSubArrayDAC</span><span class="p">(</span> <span class="n">A</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">right</span> <span class="p">);</span>
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">leftMax</span><span class="p">,</span> <span class="n">rightMax</span><span class="p">),</span> <span class="n">crossMax</span><span class="p">);</span>
    <span class="p">}</span> 
    <span class="kt">int</span> <span class="nf">maxSubArray</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">return</span> <span class="n">maxSubArrayDAC</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>参考资料:</p>

<ul>
<li><a href="http://en.wikipedia.org/wiki/Maximum_subarray_problem">ref</a></li>
</ul>

<p><span id="Minimum-Path-Sum"></span></p>

<h2>Minimum Path Sum</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/minimum-path-sum/">Minimum Path Sum</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">grid</span><span class="w"> </span><span class="vg">filled</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="w"> </span><span class="vg">numbers</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="vg">left</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">bottom</span><span class="w"> </span><span class="vg">right</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">minimizes</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">along</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">path</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">move</span><span class="w"> </span><span class="vg">either</span><span class="w"> </span><span class="vg">down</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">right</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">any</span><span class="w"> </span><span class="vg">point</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">time</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>递归</h3>

<p>用递归思路比较清晰，然后转成迭代。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">min</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span><span class="n">grid</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">)</span> 
    <span class="p">{</span> 
        <span class="k">if</span><span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> 
        <span class="p">{</span> 
            <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">col</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> 
                <span class="n">result</span> <span class="o">+=</span> <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">];</span> 
            <span class="k">return</span> <span class="n">result</span><span class="p">;</span> 
        <span class="p">}</span> 
        <span class="k">if</span><span class="p">(</span><span class="n">col</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> 
        <span class="p">{</span> 
            <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">row</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> 
                <span class="n">result</span> <span class="o">+=</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span> 
            <span class="k">return</span> <span class="n">result</span><span class="p">;</span> 
        <span class="p">}</span> 
        <span class="kt">int</span> <span class="n">fromleft</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> 
        <span class="kt">int</span> <span class="n">fromup</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span> 
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">fromleft</span><span class="p">,</span> <span class="n">fromup</span><span class="p">);</span> 
    <span class="p">}</span> 
</pre></div>
<h3>动态规划, O(m+n)空间</h3>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">minPathSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">grid</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">grid</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">INT_MIN</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
        <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
                <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<h3>动态规划, O(n)空间</h3>

<p>更加节约点空间可以这样. 参考了<a href="https://github.com/soulmachine/leetcode">leetcode-cpp</a></p>
<div class="highlight"><pre><span class="vg">f</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">min</span><span class="p">(</span><span class="vg">f</span><span class="p">[</span><span class="vg">j</span><span class="il">-1</span><span class="p">],</span><span class="w"> </span><span class="vg">f</span><span class="p">[</span><span class="vg">j</span><span class="p">])</span><span class="o">+</span><span class="vg">grid</span><span class="p">[</span><span class="vg">i</span><span class="p">][</span><span class="vg">j</span><span class="p">];</span>
<span class="err">右边的</span><span class="vg">f</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="err">是老的</span><span class="vg">f</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="err">表示</span><span class="vg">v</span><span class="p">[</span><span class="vg">i</span><span class="il">-1</span><span class="p">][</span><span class="vg">j</span><span class="p">],</span><span class="w"> </span><span class="vg">f</span><span class="p">[</span><span class="vg">j</span><span class="il">-1</span><span class="p">]</span><span class="err">即为</span><span class="vg">v</span><span class="p">[</span><span class="vg">i</span><span class="p">][</span><span class="vg">j</span><span class="il">-1</span><span class="p">]</span>
<span class="err">左边</span><span class="vg">f</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="err">是新的</span><span class="p">,</span><span class="err">即</span><span class="vg">v</span><span class="p">[</span><span class="vg">i</span><span class="p">][</span><span class="vg">j</span><span class="p">]</span><span class="o">.</span>
</pre></div><div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">minPathSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">grid</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">grid</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>  <span class="k">if</span> <span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">INT_MIN</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">INT_MAX</span> <span class="p">);</span>
        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
                <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="o">+</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Palindrome-Partitioning"></span></p>

<h2>Palindrome Partitioning</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/palindrome-partitioning/">Palindrome Partitioning</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">s</span><span class="p">,</span><span class="w"> </span><span class="vg">partition</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">every</span><span class="w"> </span><span class="vg">substring</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">partition</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span>
<span class="vg">palindrome</span><span class="o">.</span>

<span class="vg">Return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">palindrome</span><span class="w"> </span><span class="vg">partitioning</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">s</span><span class="o">.</span>

<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;aab&quot;</span><span class="p">,</span>
<span class="vg">Return</span>

<span class="p">[</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
<p>解题思路：</p>

<h3>直接暴力解决</h3>

<p>枚举每种可能，去判读是否回文。跟<a href="http://tanglei.me/tags.html#%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88-ref">排列组合</a>算法一样。
还可以优化，把中间的某个子串是否回文用hash缓存下来。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">right</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="n">left</span><span class="o">++</span><span class="p">;</span>
                <span class="n">right</span><span class="o">--</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span> 
    <span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">==</span> <span class="n">n</span><span class="p">)</span> 
        <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">isPalindrome</span><span class="p">(</span><span class="n">str</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
                <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">partition</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
        <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>利用动态规划 O(n^2)</h3>

<p><code>dp[i:j]</code>表示<code>s[i:j]</code>是回文,  如果<code>s[i] == s[j] and dp[i+1, j-1]</code>,满足条件, 则dp[i:j]就是回文。 
注意要先算dp[i+1][j-1]，所以循环的顺序。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dp</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">==</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()){</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">start</span><span class="p">][</span><span class="n">i</span><span class="p">]){</span>
                <span class="n">string</span> <span class="n">sub</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">sub</span><span class="p">);</span>
                <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">dp</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">partitionDp</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">));</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="c1">//init, single char is palindrome</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="c1">//dp[i:j] s[i:j] is palindrome,  need dp[i+1, j-1], i need i+1, should downto, j need j-1, should upto</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&gt;</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
        <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">dp</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>其实像上面那样把每一个回文子串找出来后，就不用像排列组合那样去搜索了，可以直接构造。这个参考了<a href="https://github.com/soulmachine/leetcode">leetcode-cpp</a>。
<code>result[i]</code> 表示s[i:n]构成的回文串拆分结果。再走一遍dp就可以构造出来。方法如下:
result[i]的结果为当前的回文串 插入每一个 result[i+1]构成。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">partitionDp</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">));</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="c1">//init, single char is palindrome</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="c1">//dp[i:j] s[i:j] is palindrome,  need dp[i+1, j-1], i need i+1, should downto, j need j-1, should upto</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&gt;</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;&gt;</span> <span class="n">result</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">());</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span>
                <span class="p">{</span>
                    <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">next</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
                        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">next</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">auto</span> <span class="n">v</span> <span class="o">=</span> <span class="n">next</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>
                            <span class="n">v</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">str</span><span class="p">);</span>
                            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                        <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">str</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Palindrome-Partitioning-II"></span></p>

<h2>Palindrome Partitioning II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/palindrome-partitioning-ii/">Palindrome Partitioning II</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">s</span><span class="p">,</span><span class="w"> </span><span class="vg">partition</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">every</span><span class="w"> </span><span class="vg">substring</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">partition</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span>
<span class="vg">palindrome</span><span class="o">.</span>

<span class="vg">Return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">cuts</span><span class="w"> </span><span class="vg">needed</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">palindrome</span><span class="w"> </span><span class="vg">partitioning</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">s</span><span class="o">.</span>

<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;aab&quot;</span><span class="p">,</span>
<span class="vg">Return</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">since</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">palindrome</span><span class="w"> </span><span class="vg">partitioning</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">]</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">produced</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="il">1</span>
<span class="vg">cut</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Calculate</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">maintain</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="vg">DP</span><span class="w"> </span><span class="nl">states:</span>

<span class="vg">pal</span><span class="p">[</span><span class="vg">i</span><span class="p">][</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">whether</span><span class="w"> </span><span class="vg">s</span><span class="p">[</span><span class="vg">i</span><span class="o">..</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="vg">forms</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">pal</span>

<span class="vg">d</span><span class="p">[</span><span class="vg">i</span><span class="p">],</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">minCut</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">s</span><span class="p">[</span><span class="vg">i</span><span class="o">..</span><span class="vg">n</span><span class="il">-1</span><span class="p">]</span>

<span class="vg">Once</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">comes</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">pal</span><span class="p">[</span><span class="vg">i</span><span class="p">][</span><span class="vg">j</span><span class="p">]</span><span class="o">==</span><span class="nl">true:</span>

<span class="vg">if</span><span class="w"> </span><span class="vg">j</span><span class="o">==</span><span class="vg">n</span><span class="il">-1</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">s</span><span class="p">[</span><span class="vg">i</span><span class="o">..</span><span class="vg">n</span><span class="il">-1</span><span class="p">]</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">Pal</span><span class="p">,</span><span class="w"> </span><span class="vg">minCut</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="vg">d</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="o">=</span><span class="il">0</span><span class="p">;</span>
<span class="nl">else:</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">current</span><span class="w"> </span><span class="vg">cut</span><span class="w"> </span><span class="vg">num</span><span class="w"> </span><span class="p">(</span><span class="vg">first</span><span class="w"> </span><span class="vg">cut</span><span class="w"> </span><span class="vg">s</span><span class="p">[</span><span class="vg">i</span><span class="o">..</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">cut</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">rest</span><span class="w"> </span><span class="vg">s</span><span class="p">[</span><span class="vg">j</span><span class="o">+</span><span class="il">1</span><span class="o">...</span><span class="vg">n</span><span class="il">-1</span><span class="p">])</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">1</span><span class="o">+</span><span class="vg">d</span><span class="p">[</span><span class="vg">j</span><span class="o">+</span><span class="il">1</span><span class="p">],</span><span class="w"> </span><span class="vg">compare</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">exisiting</span><span class="w"> </span><span class="vg">minCut</span><span class="w"> </span><span class="vg">num</span><span class="w"> </span><span class="vg">d</span><span class="p">[</span><span class="vg">i</span><span class="p">],</span><span class="w"> </span><span class="vg">repalce</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">smaller</span><span class="o">.</span>
<span class="vg">d</span><span class="p">[</span><span class="il">0</span><span class="p">]</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">answer</span><span class="o">.</span>
</pre></div>
<p>第一步还是跟<a href="http://tanglei.me/leetcode/palindrome-partitioning.html">Palindrome Partitioning</a>一样，用DP，任意i-j组合先计算好是否是回文；</p>

<p>第二步仍用DP，dp[i]表示s[i, len-1]最少的minCut, 对每一个palindrome[i][j]为true的:</p>

<ul>
<li>if j == len-1, 则 dp[i]=0;</li>
<li>else s要拆分为s[i, j], [j+1, len-1],当前cut数=1+dp[j+1], 所以dp[i] = std::min(dp[i], 1+dp[j+1])</li>
</ul>

<p>当然这两步也可以合在一起. <a href="https://oj.leetcode.com/discuss/6691/my-dp-solution-explanation-and-code">ref</a></p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">minCut</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">));</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">cuts</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>   
            <span class="n">cuts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">&gt;</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                        <span class="n">cuts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">else</span> <span class="c1">//cut s[:j][j+1:n]</span>
                        <span class="n">cuts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">cuts</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">cuts</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">cuts</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Scramble-String"></span></p>

<h2>Scramble String</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/scramble-string/">Scramble String </a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">s1</span><span class="p">,</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">represent</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">partitioning</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">empty</span><span class="w"> </span><span class="vg">substrings</span><span class="w"> </span><span class="vg">recursively</span><span class="o">.</span>
<span class="vg">Below</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">representation</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;great&quot;</span><span class="o">:</span>
<span class="w">    </span><span class="vg">great</span>
<span class="w">   </span><span class="o">/</span><span class="w">    </span><span class="o">\</span>
<span class="w">  </span><span class="vg">gr</span><span class="w">    </span><span class="vg">eat</span>
<span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">    </span><span class="o">/</span><span class="w">  </span><span class="o">\</span>
<span class="vg">g</span><span class="w">   </span><span class="vg">r</span><span class="w">  </span><span class="vg">e</span><span class="w">   </span><span class="vg">at</span>
<span class="w">           </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">          </span><span class="vg">a</span><span class="w">   </span><span class="vg">t</span>
<span class="vg">To</span><span class="w"> </span><span class="vg">scramble</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">string</span><span class="p">,</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">choose</span><span class="w"> </span><span class="vg">any</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">leaf</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">swap</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">children</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">choose</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="s2">&quot;gr&quot;</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">swap</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">children</span><span class="p">,</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">produces</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">scrambled</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="s2">&quot;rgeat&quot;</span><span class="o">.</span>
<span class="w">    </span><span class="vg">rgeat</span>
<span class="w">   </span><span class="o">/</span><span class="w">    </span><span class="o">\</span>
<span class="w">  </span><span class="vg">rg</span><span class="w">    </span><span class="vg">eat</span>
<span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">    </span><span class="o">/</span><span class="w">  </span><span class="o">\</span>
<span class="vg">r</span><span class="w">   </span><span class="vg">g</span><span class="w">  </span><span class="vg">e</span><span class="w">   </span><span class="vg">at</span>
<span class="w">           </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">          </span><span class="vg">a</span><span class="w">   </span><span class="vg">t</span>
<span class="vg">We</span><span class="w"> </span><span class="vg">say</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="s2">&quot;rgeat&quot;</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">scrambled</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="s2">&quot;great&quot;</span><span class="o">.</span>
<span class="vg">Similarly</span><span class="p">,</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">continue</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">swap</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">children</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="s2">&quot;eat&quot;</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="s2">&quot;at&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">produces</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">scrambled</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="s2">&quot;rgtae&quot;</span><span class="o">.</span>
<span class="w">    </span><span class="vg">rgtae</span>
<span class="w">   </span><span class="o">/</span><span class="w">    </span><span class="o">\</span>
<span class="w">  </span><span class="vg">rg</span><span class="w">    </span><span class="vg">tae</span>
<span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">    </span><span class="o">/</span><span class="w">  </span><span class="o">\</span>
<span class="vg">r</span><span class="w">   </span><span class="vg">g</span><span class="w">  </span><span class="vg">ta</span><span class="w">  </span><span class="vg">e</span>
<span class="w">       </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">      </span><span class="vg">t</span><span class="w">   </span><span class="vg">a</span>
<span class="vg">We</span><span class="w"> </span><span class="vg">say</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="s2">&quot;rgtae&quot;</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">scrambled</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="s2">&quot;great&quot;</span><span class="o">.</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">strings</span><span class="w"> </span><span class="vg">s1</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">s2</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">same</span><span class="w"> </span><span class="vg">length</span><span class="p">,</span><span class="w"> </span><span class="vg">determine</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">s2</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">scrambled</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">s1</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>用递归即可。 rg|tae gr|eat， rg和gr是scramble， tae和eat递归成 t|ae 和 ea|t， 因此最后满足条件。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isSameChar</span><span class="p">(</span><span class="n">string</span> <span class="n">s1</span><span class="p">,</span> <span class="n">string</span> <span class="n">s2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">x</span><span class="p">[</span><span class="mi">26</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="o">++</span><span class="n">x</span><span class="p">[</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="sc">&#39;a&#39;</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s2</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="o">--</span><span class="n">x</span><span class="p">[</span><span class="n">s2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="sc">&#39;a&#39;</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">26</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">bool</span> <span class="nf">isScramble</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">s2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">!=</span> <span class="n">s2</span><span class="p">.</span><span class="n">length</span><span class="p">())</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="n">isSameChar</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">))</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">isScramble</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="n">s2</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="n">isScramble</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">),</span> <span class="n">s2</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">)))</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">isScramble</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="n">s2</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="n">isScramble</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">),</span> <span class="n">s2</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">)))</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>虽然能AC，但上面的代码效率确实～ 内存耗费不少吧，每次都去创建string出来。
参考下别人的代码，直接用迭代器来做，省掉了字符串的创建。
以上还可以把一些算过的用map cache起来, 学下 <a href="http://en.cppreference.com/w/cpp/utility/tuple">STL的tuple</a>。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isSameChar</span><span class="p">(</span><span class="n">string</span><span class="o">::</span><span class="n">const_iterator</span> <span class="n">first1</span><span class="p">,</span> <span class="n">string</span><span class="o">::</span><span class="n">const_iterator</span> <span class="n">first2</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">x</span><span class="p">[</span><span class="mi">26</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">i</span> <span class="o">=</span> <span class="n">first1</span><span class="p">;</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">first1</span><span class="o">+</span><span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="o">++</span><span class="n">x</span><span class="p">[</span><span class="o">*</span><span class="n">i</span><span class="o">-</span><span class="sc">&#39;a&#39;</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">i</span> <span class="o">=</span> <span class="n">first2</span><span class="p">;</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">first2</span><span class="o">+</span><span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="o">--</span><span class="n">x</span><span class="p">[</span><span class="o">*</span><span class="n">i</span><span class="o">-</span><span class="sc">&#39;a&#39;</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">26</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">bool</span> <span class="nf">isScramble</span><span class="p">(</span><span class="n">string</span><span class="o">::</span><span class="n">const_iterator</span> <span class="n">first1</span><span class="p">,</span> <span class="n">string</span><span class="o">::</span><span class="n">const_iterator</span> <span class="n">first2</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="n">first1</span> <span class="o">==</span> <span class="o">*</span><span class="n">first2</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="n">isSameChar</span><span class="p">(</span><span class="n">first1</span><span class="p">,</span> <span class="n">first2</span><span class="p">,</span> <span class="n">len</span><span class="p">))</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="n">isScramble</span><span class="p">(</span><span class="n">first1</span><span class="p">,</span> <span class="n">first2</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">isScramble</span><span class="p">(</span><span class="n">first1</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="n">first2</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="n">len</span><span class="o">-</span><span class="n">i</span><span class="p">))</span>
              <span class="o">||</span><span class="p">(</span><span class="n">isScramble</span><span class="p">(</span><span class="n">first1</span><span class="p">,</span> <span class="n">first2</span><span class="o">+</span><span class="n">len</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">isScramble</span><span class="p">(</span><span class="n">first1</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="n">first2</span><span class="p">,</span> <span class="n">len</span><span class="o">-</span><span class="n">i</span><span class="p">)))</span>
              <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">bool</span> <span class="nf">isScramble</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">s2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">!=</span> <span class="n">s2</span><span class="p">.</span><span class="n">length</span><span class="p">())</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">isScramble</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">s2</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">());</span>
    <span class="p">}</span>
</pre></div>
<p>设状态为 f[n][i][j]，表示长度为 n，起
点为 s1[i] 和起点为 s2[j] 两个字符串是否互为 scramble，则状态转移方程为</p>
<div class="highlight"><pre><span class="vg">f</span><span class="p">[</span><span class="vg">n</span><span class="p">][</span><span class="vg">i</span><span class="p">][</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="vg">f</span><span class="p">[</span><span class="vg">k</span><span class="p">][</span><span class="vg">i</span><span class="p">][</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="vg">f</span><span class="p">[</span><span class="vg">n</span><span class="o">-</span><span class="vg">k</span><span class="p">][</span><span class="vg">i</span><span class="o">+</span><span class="vg">k</span><span class="p">][</span><span class="vg">j</span><span class="o">+</span><span class="vg">k</span><span class="p">])</span>
<span class="w">        </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="vg">f</span><span class="p">[</span><span class="vg">k</span><span class="p">][</span><span class="vg">i</span><span class="p">][</span><span class="vg">j</span><span class="o">+</span><span class="vg">n</span><span class="o">-</span><span class="vg">k</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="vg">f</span><span class="p">[</span><span class="vg">n</span><span class="o">-</span><span class="vg">k</span><span class="p">][</span><span class="vg">i</span><span class="o">+</span><span class="vg">k</span><span class="p">][</span><span class="vg">j</span><span class="p">])</span>
</pre></div>
<p>跟上面递归的<code>isScramble(string::const_iterator first1, string::const_iterator first2, int len)</code>一致。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isScramble</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">s2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">!=</span> <span class="n">s2</span><span class="p">.</span><span class="n">length</span><span class="p">())</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="c1">//dp[n][i][j], s1[i:i+n), s2[j:j+n) is scramble</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">)));</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
                <span class="n">dp</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s2</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">len</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">len</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">-</span><span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">-</span><span class="n">len</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
                    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">dp</span><span class="p">[</span><span class="n">len</span><span class="o">-</span><span class="n">k</span><span class="p">][</span><span class="n">i</span><span class="o">+</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="n">k</span><span class="p">])</span> <span class="o">||</span>
                            <span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">+</span><span class="n">len</span><span class="o">-</span><span class="n">k</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">dp</span><span class="p">[</span><span class="n">len</span><span class="o">-</span><span class="n">k</span><span class="p">][</span><span class="n">i</span><span class="o">+</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]))</span>
                            <span class="p">{</span>
                                <span class="n">dp</span><span class="p">[</span><span class="n">len</span><span class="p">][</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="p">}</span>
                    <span class="p">}</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p>参考 <a href="https://github.com/soulmachine/leetcode">leetcode-cpp</a></p>

<p><span id="Triangle"></span></p>

<h2>Triangle</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/triangle/">Triangle</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">triangle</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">bottom</span><span class="o">.</span><span class="w"> </span><span class="vg">Each</span><span class="w"> </span><span class="vg">step</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">move</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">adjacent</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">row</span><span class="w"> </span><span class="vg">below</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="vg">triangle</span>
<span class="p">[</span>
<span class="w">     </span><span class="p">[</span><span class="il">2</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="il">3</span><span class="p">,</span><span class="il">4</span><span class="p">],</span>
<span class="w">   </span><span class="p">[</span><span class="il">6</span><span class="p">,</span><span class="il">5</span><span class="p">,</span><span class="il">7</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">4</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">8</span><span class="p">,</span><span class="il">3</span><span class="p">]</span>
<span class="p">]</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">top</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">bottom</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">11</span><span class="w"> </span><span class="p">(</span><span class="vg">i</span><span class="o">.</span><span class="vg">e</span><span class="o">.</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">11</span><span class="p">)</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">Bonus</span><span class="w"> </span><span class="vg">point</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">able</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">O</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">space</span><span class="p">,</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">rows</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">triangle</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>动态规划，从下往上走～ 
<code>rows[col] = std::min(rows[col], rows[col+1]) + triangle[row][col];</code></p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">minimumTotal</span><span class="p">(</span><span class="n">vector</span> <span class="o">&lt;</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">triangle</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">triangle</span> <span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">triangle</span> <span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">m</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="n">r</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span><span class="o">--</span><span class="p">)</span> <span class="c1">//triangle, if m is 1, dp[0] is result</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="c1">//triangle[r].size() = r+1</span>
                <span class="n">dp</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="n">dp</span><span class="p">[</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="n">triangle</span> <span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">];</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p>如果triangle值可以改变的话，可以O(1)的空间复杂度。</p>
<div class="highlight"><pre>    <span class="c1">//triangle can be changed</span>
    <span class="kt">int</span> <span class="nf">minimumTotal</span><span class="p">(</span><span class="n">vector</span> <span class="o">&lt;</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">triangle</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">triangle</span> <span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">m</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="n">r</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span><span class="o">--</span><span class="p">)</span> <span class="c1">//triangle, if m is 1, dp[0] is result</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="c1">//triangle[r].size() = r+1</span>
                <span class="n">triangle</span> <span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">+=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">triangle</span> <span class="p">[</span><span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">],</span> <span class="n">triangle</span><span class="p">[</span><span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
        <span class="k">return</span> <span class="n">triangle</span> <span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
<p><span id="Unique-Binary-Search-Trees"></span></p>

<h2>Unique Binary Search Trees</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/unique-binary-search-trees/">Unique Binary Search Trees</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="p">,</span><span class="w"> </span><span class="vg">how</span><span class="w"> </span><span class="vg">many</span><span class="w"> </span><span class="vg">structurally</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">BST</span><span class="c1">&#39;s (binary search trees) that store values 1...n?</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="il">5</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">BST</span><span class="c1">&#39;s.</span>
<span class="w">   </span><span class="il">1</span><span class="w">         </span><span class="il">3</span><span class="w">     </span><span class="il">3</span><span class="w">      </span><span class="il">2</span><span class="w">      </span><span class="il">1</span>
<span class="w">    </span><span class="o">\</span><span class="w">       </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">      </span><span class="o">\</span>
<span class="w">     </span><span class="il">3</span><span class="w">     </span><span class="il">2</span><span class="w">     </span><span class="il">1</span><span class="w">      </span><span class="il">1</span><span class="w">   </span><span class="il">3</span><span class="w">      </span><span class="il">2</span>
<span class="w">    </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">       </span><span class="o">\</span><span class="w">                 </span><span class="o">\</span>
<span class="w">   </span><span class="il">2</span><span class="w">     </span><span class="il">1</span><span class="w">         </span><span class="il">2</span><span class="w">                 </span><span class="il">3</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>递归</h3>

<p>递归比较好理解。比如 根节点数字为i, 比i小的左孩纸i-1个(子问题), 右孩纸n-i. 于是就有了下面的代码。</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">numTrees</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//recursion, maybe, real input 0 shoule return 0</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">+=</span> <span class="n">numTrees</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">numTrees</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h3>动态规划</h3>

<p>其实可以缓存下, 用动态规划。</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>  <span class="n">cache</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="mi">1</span><span class="p">);;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span><span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">cache</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">cache</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="p">];</span>
        <span class="n">cache</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">cache</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">numTrees</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h3>数学公式法</h3>

<p>其实这个问题有公式可以直接算的，参考<a href="http://zh.wikipedia.org/wiki/%E5%8D%A1%E5%A1%94%E5%85%B0%E6%95%B0">卡塔兰数</a> 。</p>

<p><span id="Unique-Paths-II"></span></p>

<h2>Unique Paths II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/unique-paths-ii/">Unique Paths II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Follow</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="s2">&quot;Unique Paths&quot;</span><span class="o">:</span>
<span class="vg">Now</span><span class="w"> </span><span class="vg">consider</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">some</span><span class="w"> </span><span class="vg">obstacles</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">added</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">grids</span><span class="o">.</span><span class="w"> </span><span class="vg">How</span><span class="w"> </span><span class="vg">many</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">paths</span><span class="w"> </span><span class="vg">would</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">be</span><span class="o">?</span>
<span class="vg">An</span><span class="w"> </span><span class="vg">obstacle</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">empty</span><span class="w"> </span><span class="vg">space</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">marked</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="vg">respectively</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">grid</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">There</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">obstacle</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">middle</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="il">3</span><span class="vg">x3</span><span class="w"> </span><span class="vg">grid</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">illustrated</span><span class="w"> </span><span class="vg">below</span><span class="o">.</span>
<span class="p">[</span>
<span class="w">  </span><span class="p">[</span><span class="il">0</span><span class="p">,</span><span class="il">0</span><span class="p">,</span><span class="il">0</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">0</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">0</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">0</span><span class="p">,</span><span class="il">0</span><span class="p">,</span><span class="il">0</span><span class="p">]</span>
<span class="p">]</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">paths</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">2</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">most</span><span class="w"> </span><span class="il">100</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：
跟 <a href="#Minimum-Path-Sum">minimum-path-sum</a>差不多. 
这里就省却递归方法了，直接用DP。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">uniquePathsWithObstacles</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">grid</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">grid</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="k">if</span> <span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
           <span class="p">}</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Word-Break"></span></p>

<h2>Word Break</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/word-break/">Word Break</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">dictionary</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">dict</span><span class="p">,</span><span class="w"> </span><span class="vg">determine</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">be</span>
<span class="vg">segmented</span><span class="w"> </span><span class="vg">into</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">space</span><span class="o">-</span><span class="vg">separated</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">more</span><span class="w"> </span><span class="vg">dictionary</span><span class="w"> </span><span class="vg">words</span><span class="o">.</span>

<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span>
<span class="vg">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;leetcode&quot;</span><span class="p">,</span>
<span class="vg">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;leet&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;code&quot;</span><span class="p">]</span><span class="o">.</span>

<span class="vg">Return</span><span class="w"> </span><span class="vg">true</span><span class="w"> </span><span class="vg">because</span><span class="w"> </span><span class="s2">&quot;leetcode&quot;</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">segmented</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="s2">&quot;leet code&quot;</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>首先想到的就是DFS，直接挨个搜索，能走到结尾就OK。不过这样做超时了。</p>
<div class="highlight"><pre>    <span class="c1">//TLE</span>
    <span class="kt">bool</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="kt">int</span> <span class="n">startIndex</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dict</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">startIndex</span> <span class="o">&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">())</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">startIndex</span> <span class="o">==</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">())</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">startIndex</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">startIndex</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">startIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">pre</span><span class="p">)</span> <span class="o">!=</span> <span class="n">dict</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">dict</span><span class="p">))</span>
                    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">bool</span> <span class="nf">wordBreak</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dict</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">dfs</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">dict</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>然后用DP,<code>dp[i]</code>表示s[0:i]都跟dict对应了, 对于更长的j, <code>dp[j]</code>为true的话，肯定存在i使得<code>dp[i]</code>为true 和 <code>s[i:j]</code>能在dict中找到。<br>
因此得到如下代码：</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">dp</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dict</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
        <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="c1">//dp[i], true, dp[i] &amp;&amp; s[i:j]==&gt; dp[j]</span>
                <span class="p">{</span>
                    <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="n">i</span><span class="p">);</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">str</span><span class="p">)</span> <span class="o">!=</span> <span class="n">dict</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
                    <span class="p">{</span>
                        <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Word-Break-II"></span></p>

<h2>Word Break II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/word-break-ii/">Word Break II</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">dictionary</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">dict</span><span class="p">,</span><span class="w"> </span><span class="vg">add</span><span class="w"> </span><span class="vg">spaces</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">construct</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">sentence</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">word</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">valid</span><span class="w"> </span><span class="vg">dictionary</span><span class="w"> </span><span class="vg">word</span><span class="o">.</span>

<span class="vg">Return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">sentences</span><span class="o">.</span>

<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span>
<span class="vg">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;catsanddog&quot;</span><span class="p">,</span>
<span class="vg">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;cats&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;and&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;sand&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dog&quot;</span><span class="p">]</span><span class="o">.</span>

<span class="vg">A</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;cats and dog&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;cat sand dog&quot;</span><span class="p">]</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>沿用<a href="#Word-Break">Word break</a>的思路，dp[i]表示s中0到i的串能在dict中对应，首先想到的是用vector把dp[i]为true的情况都保存下来(即以i为结尾的单词)，最后组装回去可得到结果。注意不能每次得到dp[i]为true就去枚举结果，这样会超时(最后可能没有成功走到结尾也浪费了时间在这里去拼装)。</p>

<p>代码如下：</p>
<div class="highlight"><pre>     <span class="kt">void</span> <span class="nf">searchResult</span><span class="p">(</span><span class="n">string</span> <span class="n">input</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span><span class="n">dp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> 
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">dp</span><span class="p">[</span><span class="n">len</span><span class="p">].</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">len</span><span class="p">][</span><span class="n">i</span><span class="p">];</span>
            <span class="k">if</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">searchResult</span><span class="p">(</span><span class="n">str</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">input</span><span class="p">,</span> <span class="n">dp</span><span class="p">,</span> <span class="n">len</span> <span class="o">-</span> <span class="n">str</span><span class="p">.</span><span class="n">length</span><span class="p">(),</span> <span class="n">result</span><span class="p">);</span>
            <span class="k">else</span>
                <span class="n">searchResult</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">dp</span><span class="p">,</span> <span class="n">len</span> <span class="o">-</span> <span class="n">str</span><span class="p">.</span><span class="n">length</span><span class="p">(),</span> <span class="n">result</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dict</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
        <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dpStrings</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">());</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="c1">//dp[i], true, dp[i] &amp;&amp; s[i:j]==&gt; dp[j]</span>
                <span class="p">{</span>
                    <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="n">i</span><span class="p">);</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">str</span><span class="p">)</span> <span class="o">!=</span> <span class="n">dict</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
                    <span class="p">{</span>
                        <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                        <span class="c1">//break;, can NOT break, for wordbreak II should return all the possible solutions</span>
                        <span class="n">dpStrings</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">n</span><span class="p">])</span>
            <span class="n">searchResult</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">dpStrings</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">wordBreak</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dict</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">dict</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>其实，按照上面提的思路一边dp的时候就去枚举结果也是可以的，测试用例中就那一个较长的过不了，先按照wordbreak的思路detective一下再枚举就可以AC。(一般人我不告诉他) :)</p>
<div class="highlight"><pre>    <span class="c1">//中途的复杂度记录dps的复杂度较高，用例（aaaaaaaaaaaaaaaa*b, aaaaaa...aaa）可能最后没有结果 但仍然搜索了很多次，导致超时或内存超过</span>
    <span class="c1">//先detect一下 可以通过oj</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">wordBreak2</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dict</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="n">wordBreak</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">dict</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="kt">size_t</span> <span class="n">len</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">len</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
        <span class="n">dp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">//dp[i] : s[0:i] is ok</span>
        <span class="n">vector</span><span class="o">&lt;</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dps</span><span class="p">(</span><span class="n">len</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="c1">// dp[0:j] ok + s[j:i] ok ---&gt; dp[i] is ok</span>
                <span class="p">{</span>
                    <span class="n">string</span> <span class="n">sub</span> <span class="o">=</span>  <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="p">);</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span> <span class="o">!=</span> <span class="n">dict</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
                    <span class="p">{</span>
                        <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="n">dps</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">dps</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">dps</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>
                                <span class="n">dps</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">string</span><span class="p">((</span><span class="o">*</span><span class="n">it</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">+</span> <span class="n">sub</span><span class="p">));</span>
                        <span class="p">}</span><span class="k">else</span>
                        <span class="p">{</span>
                            <span class="n">dps</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">sub</span><span class="p">);</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">dps</span><span class="p">[</span><span class="n">len</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<h1>list, 链表相关</h1>

<p><span id="Add-Two-Numbers"></span></p>

<h2>Add Two Numbers</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/add-two-numbers/">Add Two Numbers</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">You</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">lists</span><span class="w"> </span><span class="vg">representing</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="w"> </span><span class="vg">numbers</span><span class="o">.</span><span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">digits</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">stored</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">reverse</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">their</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">single</span><span class="w"> </span><span class="vg">digit</span><span class="o">.</span><span class="w"> </span><span class="vg">Add</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span>
<span class="nl">Input:</span><span class="w"> </span><span class="p">(</span><span class="il">2</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">4</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">3</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="il">5</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">6</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">4</span><span class="p">)</span>
<span class="nl">Output:</span><span class="w"> </span><span class="il">7</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">8</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>递归版</h3>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">addTwoNumbers</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">l1</span><span class="p">,</span> <span class="n">ListNode</span> <span class="o">*</span><span class="n">l2</span><span class="p">,</span> <span class="kt">int</span> <span class="n">carry</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">carry</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//only comes the carry,like 5, 5 = 10, or carry = 0</span>
            <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">carry</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">result</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">+=</span> <span class="n">l1</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l2</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">result</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">+=</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
        <span class="n">result</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">addTwoNumbers</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">?</span> <span class="nb">NULL</span> <span class="o">:</span> <span class="n">l1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">?</span> <span class="nb">NULL</span> <span class="o">:</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">result</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">/</span> <span class="mi">10</span><span class="p">);</span>
        <span class="n">result</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">%=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">addTwoNumbers</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">l1</span><span class="p">,</span> <span class="n">ListNode</span> <span class="o">*</span><span class="n">l2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">l2</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">l1</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">addTwoNumbers</span><span class="p">(</span><span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>迭代版</h3>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">addTwoNumbers</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">l1</span><span class="p">,</span> <span class="n">ListNode</span> <span class="o">*</span><span class="n">l2</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">?</span> <span class="nl">l2</span> <span class="p">:</span> <span class="n">l1</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="n">dummy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">l1</span> <span class="o">&amp;&amp;</span> <span class="n">l2</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">l1</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">+</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">l1</span> <span class="o">=</span> <span class="n">l1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">l2</span> <span class="o">=</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">while</span><span class="p">(</span><span class="n">l1</span><span class="p">){</span>
            <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">l1</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">l1</span> <span class="o">=</span> <span class="n">l1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>    
        <span class="p">}</span>
        <span class="k">while</span><span class="p">(</span><span class="n">l2</span><span class="p">){</span>
            <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">l2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">l2</span> <span class="o">=</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>    
        <span class="p">}</span>
        <span class="n">pre</span> <span class="o">=</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">pre</span><span class="p">){</span>
            <span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">t</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">pre</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">=</span> <span class="n">t</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span> 
                <span class="k">if</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
                    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">+=</span> <span class="n">t</span> <span class="o">/</span> <span class="mi">10</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="p">{</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="mi">10</span><span class="p">);</span> <span class="k">break</span><span class="p">;}</span>
            <span class="p">}</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Convert-Sorted-List-to-Binary-Search-Tree"></span></p>

<h2>Convert Sorted List to Binary Search Tree</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/convert-sorted-list-to-binary-search-tree/">Convert Sorted List to Binary Search Tree</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">singly</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">ascending</span><span class="w"> </span><span class="vg">order</span><span class="p">,</span><span class="w"> </span><span class="vg">convert</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">height</span><span class="w"> </span><span class="vg">balanced</span><span class="w"> </span><span class="vg">BST</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>tricky 方法, 另外取O(n)空间</h3>

<p>偷懒方法，另外取另外取O(n)空间把list的数据取出来放入数组，然后跟<a href="#Convert-Sorted-Array-To-Binary-Search-Tree"></a>题目一样用数组的方式去做。
代码就略过了。
虽然不是出题者的本意～ 但...... 你咬我呀.</p>

<h3>O(nlogn)时间</h3>

<p>每次用O(len/2)的时间去把中间的节点找出来。然后跟数组一样的方式解决。时间复杂度为O(nlogn).中途找mid不跟数组一样O(1).</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="o">++</span><span class="n">len</span><span class="p">;</span> 
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">len</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">TreeNode</span> <span class="o">*</span> <span class="nf">convert</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">len</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">len</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">--</span><span class="n">i</span><span class="p">)</span>
            <span class="n">pre</span><span class="o">=</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">leftlen</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="kt">int</span> <span class="n">rightlen</span> <span class="o">=</span> <span class="n">len</span><span class="o">-</span><span class="n">mid</span><span class="p">;</span><span class="c1">//even</span>
        <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&amp;</span> <span class="mh">0x1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">leftlen</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span>
            <span class="n">rightlen</span> <span class="o">=</span> <span class="n">len</span><span class="o">-</span><span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>   
        <span class="k">auto</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">leftlen</span><span class="p">);</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">rightlen</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">TreeNode</span> <span class="o">*</span><span class="nf">sortedListToBST</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>从底至上构造Tree, 递归(得忽略递归调用的时间/空间消耗)调用，递归中传同一个链表，链表不停往前走，通过下标关系来控制左右子树。进入递归时链表指向头节点，结束递归时，链表指向尾节点的next。</p>

<p>下面代码中，每次递归调用开始时，节点指针都指向区间第一个，结束时节点的指针指向<em>区间末尾的后一个</em>。每次递归调用时，分成左右两部分，左边构造完时，正好指针指向mid，创建一下root，继续构造右部分子树。<a href="http://www.cnblogs.com/lautsie/p/3346581.html">ref</a></p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="o">++</span><span class="n">len</span><span class="p">;</span> 
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">len</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">TreeNode</span> <span class="o">*</span> <span class="nf">convert</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="o">&amp;</span><span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span> 
            <span class="n">head</span><span class="o">=</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">left</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="p">((</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
            <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">root</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">TreeNode</span> <span class="o">*</span><span class="nf">sortedListToBST</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">len</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>或许 convert这样写更简洁。</p>
<div class="highlight"><pre>    <span class="n">TreeNode</span> <span class="o">*</span> <span class="nf">convert</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="o">&amp;</span><span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">&gt;</span> <span class="n">end</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="p">((</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">left</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span><span class="p">;</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">root</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Copy-List-with-Random-Pointer"></span></p>

<h2>Copy List with Random Pointer</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/copy-list-with-random-pointer/">Copy List with Random Pointer</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">A</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">contains</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">additional</span><span class="w"> </span><span class="vg">random</span>
<span class="vg">pointer</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">point</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">any</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">null</span><span class="o">.</span>

<span class="vg">Return</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">deep</span><span class="w"> </span><span class="vg">copy</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span>
</pre></div><div class="highlight"><pre>    <span class="k">struct</span> <span class="n">RandomListNode</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">label</span><span class="p">;</span>
        <span class="n">RandomListNode</span> <span class="o">*</span><span class="n">next</span><span class="p">,</span> <span class="o">*</span><span class="n">random</span><span class="p">;</span>
        <span class="n">RandomListNode</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="o">:</span> <span class="n">label</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">next</span><span class="p">(</span><span class="nb">NULL</span><span class="p">),</span> <span class="n">random</span><span class="p">(</span><span class="nb">NULL</span><span class="p">)</span> <span class="p">{}</span>
    <span class="p">};</span>
</pre></div>
<p>解题思路：</p>

<h3>传统方法用hashmap</h3>

<p>主要是解决random pointer的问题，可以用一个map把copy过的存起来，下次碰到的时候直接从map中取。</p>
<div class="highlight"><pre>    <span class="n">RandomListNode</span> <span class="o">*</span><span class="nf">copyRandomListUseMap</span><span class="p">(</span><span class="n">RandomListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">RandomListNode</span><span class="o">*</span><span class="p">,</span> <span class="n">RandomListNode</span><span class="o">*&gt;</span> <span class="n">copyed</span><span class="p">;</span>
        <span class="n">RandomListNode</span> <span class="o">*</span> <span class="n">head1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RandomListNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">label</span><span class="p">);</span>
        <span class="n">copyed</span><span class="p">[</span><span class="n">head</span><span class="p">]</span> <span class="o">=</span> <span class="n">head1</span><span class="p">;</span>
        <span class="n">RandomListNode</span> <span class="o">*</span> <span class="n">headbak</span> <span class="o">=</span> <span class="n">head1</span><span class="p">;</span>
        <span class="c1">//node&#39;s next can not construct a cycle.</span>
        <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">){</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">copyed</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span> <span class="o">!=</span> <span class="n">copyed</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
                    <span class="n">head1</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">copyed</span><span class="p">[</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">];</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="n">head1</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RandomListNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">label</span><span class="p">);</span> 
                    <span class="n">copyed</span><span class="p">[</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">]</span> <span class="o">=</span> <span class="n">head1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> 
            <span class="k">if</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">){</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">copyed</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">)</span> <span class="o">!=</span> <span class="n">copyed</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
                    <span class="n">head1</span><span class="o">-&gt;</span><span class="n">random</span> <span class="o">=</span>  <span class="n">copyed</span><span class="p">[</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">];</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="n">head1</span><span class="o">-&gt;</span><span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RandomListNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">random</span><span class="o">-&gt;</span><span class="n">label</span><span class="p">);</span>
                    <span class="n">copyed</span><span class="p">[</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">]</span> <span class="o">=</span> <span class="n">head1</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">;</span>    
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">head1</span> <span class="o">=</span> <span class="n">head1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">headbak</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">RandomListNode</span> <span class="o">*</span><span class="nf">copyRandomList</span><span class="p">(</span><span class="n">RandomListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">copyRandomListUseMap</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>常数空间神奇妙解</h3>

<p>上面的的方法用了额外的空间，网上总是有些高人能想出牛B的解法。下面就是一个。</p>

<p><a href="http://crushbeercrushcode.org/2013/09/copying-linked-lists-with-random-pointers">不用map等数据结构常数空间解Copy List with Random Pointer</a>，该方法分3步：</p>
<div class="highlight"><pre><span class="w"> </span><span class="il">1</span><span class="o">.</span><span class="w"> </span><span class="err">直接遍历原链表，</span><span class="vg">copy</span><span class="err">一遍，</span><span class="vg">random</span><span class="err">指向跟原来一样的</span><span class="vg">node</span><span class="err">。将</span><span class="vg">copy</span><span class="err">的</span><span class="vg">node0</span><span class="err">插入到原来链表的</span><span class="vg">node0</span><span class="err">和</span><span class="vg">node1</span><span class="err">之间</span><span class="p">,</span><span class="vg">copy</span><span class="err">的</span><span class="vg">node1</span><span class="err">插入原来</span><span class="vg">node1</span><span class="err">和</span><span class="vg">node2</span><span class="err">之间，依次类推。</span>
<span class="w"> </span><span class="il">2</span><span class="o">.</span><span class="w"> </span><span class="err">根据第一步有，</span><span class="vg">nodei</span><span class="o">-&gt;</span><span class="vg">next</span><span class="err">是</span><span class="vg">node</span><span class="err">的</span><span class="vg">copy</span><span class="err">的那个</span><span class="p">(</span><span class="vg">i</span><span class="err">为偶数</span><span class="p">)</span><span class="err">，现在要解决</span><span class="vg">copy</span><span class="err">的</span><span class="vg">node</span><span class="err">的</span><span class="vg">random</span><span class="err">问题，即</span><span class="w"> </span><span class="vg">nodei</span><span class="o">-&gt;</span><span class="vg">next</span><span class="err">的</span><span class="vg">random</span><span class="err">＝</span><span class="o">?</span><span class="w"> </span><span class="err">其实有`</span><span class="vg">nodei</span><span class="o">-&gt;</span><span class="vg">next</span><span class="o">-&gt;</span><span class="vg">random</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">nodei</span><span class="o">-&gt;</span><span class="vg">random</span><span class="o">-&gt;</span><span class="vg">next</span><span class="err">`</span><span class="p">;</span><span class="w"> </span><span class="vg">nodei</span><span class="o">-&gt;</span><span class="vg">random</span><span class="err">是原来的</span><span class="vg">random</span><span class="err">，其</span><span class="vg">next</span><span class="err">就是</span><span class="vg">copyed</span><span class="err">的原来</span><span class="vg">random</span><span class="err">的拷贝。</span><span class="w"> </span><span class="err">这步很关键。</span>
<span class="w"> </span><span class="il">3</span><span class="o">.</span><span class="w"> </span><span class="err">将这个连接在一起的链表分开，注意要断开。</span><span class="w"> </span>
</pre></div>
<p><img src="http://tl3shi.github.io/resource/blogimage/leetcode-copy-list-with-random.jpg" alt="常数空间解Copy List with Random Pointer"></p>

<p>举例个例子, 上面的一排数据1,2,3,4原始数据前后通过next连接, 然后1和2的random指针分别指向3和4.</p>

<p>第1步,copy并把copy得到的数据放到原来的后面.得到下一排数据.</p>

<p>然后观察, 1-&gt;next-&gt;random = ? 即 copy得到的蓝色1的random指针应该指向哪? 其实就是原来的黑色1-&gt;random(黑色3)-&gt;next(蓝色3),即<code>nodei-&gt;next-&gt;random = nodei-&gt;random-&gt;next</code></p>

<p>第3步,再断开，得到copy后的链表。</p>

<p>AC代码如下:</p>
<div class="highlight"><pre>    <span class="n">RandomListNode</span> <span class="o">*</span><span class="nf">copyRandomListConstantSpace</span><span class="p">(</span><span class="n">RandomListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">RandomListNode</span> <span class="o">*</span> <span class="n">src</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">RandomListNode</span><span class="o">*</span> <span class="n">copy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RandomListNode</span><span class="p">(</span><span class="n">src</span><span class="o">-&gt;</span><span class="n">label</span><span class="p">);</span>
            <span class="n">copy</span><span class="o">-&gt;</span><span class="n">random</span> <span class="o">=</span> <span class="n">src</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">;</span>
            <span class="c1">//insert between src, src-&gt;next;</span>
            <span class="k">auto</span> <span class="n">next</span> <span class="o">=</span> <span class="n">src</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">copy</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
            <span class="n">src</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">copy</span><span class="p">;</span>
            <span class="n">src</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//step 2, deal with random pointer</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//src-&gt;next is the copyed one, src-&gt;random-&gt;next is the copied src-&gt;random</span>
            <span class="n">src</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">random</span> <span class="o">=</span> <span class="n">src</span><span class="o">-&gt;</span><span class="n">random</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">?</span> <span class="nb">NULL</span> <span class="o">:</span> <span class="n">src</span><span class="o">-&gt;</span><span class="n">random</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">src</span> <span class="o">=</span> <span class="n">src</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span><span class="c1">//src-&gt;next is surely not NULL</span>
        <span class="p">}</span>
        <span class="c1">//split</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">src</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="k">auto</span> <span class="n">cpy</span> <span class="o">=</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">src</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">src</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">src</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">src</span> <span class="o">=</span> <span class="n">src</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">src</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">cpy</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">cpy</span> <span class="o">=</span> <span class="n">cpy</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Insertion-Sort-List"></span></p>

<h2>Insertion Sort List</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/insertion-sort-list/">Insertion Sort List</a></p>

<blockquote>
<p>Sort a linked list using insertion sort.</p>
</blockquote>

<p>解题思路：
发现有逆序的就将这个插入到前面的有序序列里。</p>
<div class="highlight"><pre><span class="n">ListNode</span> <span class="o">*</span><span class="nf">insertionSortList</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">NULL</span> <span class="o">==</span> <span class="n">head</span> <span class="o">||</span> <span class="nb">NULL</span> <span class="o">==</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
    <span class="n">ListNode</span>  <span class="n">result</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">result</span><span class="p">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">nodei</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">nodei</span> <span class="o">&amp;&amp;</span> <span class="n">nodei</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">nodej</span> <span class="o">=</span> <span class="n">nodei</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">nodej</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&gt;=</span> <span class="n">nodei</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">nodei</span> <span class="o">=</span> <span class="n">nodei</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//insert nodej to result</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pos</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">pos</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&lt;</span> <span class="n">nodej</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="c1">//[pos, pos-&gt;next]  --&gt;[pos, nodej, pos-&gt;next]</span>
        <span class="n">nodei</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">nodej</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">nodej</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">pos</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">pos</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">nodej</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>顺便把选择排序也写下.</p>
<div class="highlight"><pre><span class="n">ListNode</span> <span class="o">*</span> <span class="nf">selectionSort</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">nodei</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">nodei</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">nodemin</span> <span class="o">=</span> <span class="n">nodei</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">nodej</span> <span class="o">=</span> <span class="n">nodei</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">nodej</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">nodej</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&lt;</span> <span class="n">nodemin</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
                <span class="n">nodemin</span> <span class="o">=</span> <span class="n">nodej</span><span class="p">;</span>
            <span class="n">nodej</span> <span class="o">=</span> <span class="n">nodej</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">nodei</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">,</span> <span class="n">nodemin</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
        <span class="n">nodei</span> <span class="o">=</span> <span class="n">nodei</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id="LRU-Cache"></span></p>

<h2>LRU Cache</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/lru-cache/">LRU Cache</a></p>

<blockquote>
<p>Design and implement a data structure for Least Recently Used (LRU) cache. It should support the following operations: get and set.</p>

<p>get(key) - Get the value (will always be positive) of the key if the key exists in the cache, otherwise return -1.
set(key, value) - Set or insert the value if the key is not already present. When the cache reached its capacity, it should invalidate the least recently used item before inserting a new item.</p>
</blockquote>

<p>解题思路：双向链表 + hashmap</p>

<p><a href="http://www.cs.uml.edu/%7Ejlu1/doc/codes/lruCache.html">ref</a></p>
<div class="highlight"><pre><span class="vg">Once</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">data</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">key</span><span class="w"> </span><span class="vg">K</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">queried</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">get</span><span class="p">(</span><span class="vg">K</span><span class="p">)</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">called</span><span class="o">.</span><span class="w"> </span>
<span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">data</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">key</span><span class="w"> </span><span class="vg">K</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">cache</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">cache</span><span class="w"> </span><span class="vg">just</span><span class="w"> </span><span class="vg">returns</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">data</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">refresh</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">data</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span><span class="w"> </span>
<span class="vg">To</span><span class="w"> </span><span class="vg">refresh</span><span class="w"> </span><span class="vg">data</span><span class="w"> </span><span class="vg">T</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="p">,</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">move</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">item</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">data</span><span class="w"> </span><span class="vg">T</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">head</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span><span class="w"> </span><span class="vg">Otherwise</span><span class="p">,</span><span class="w"> </span>
<span class="vg">if</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">data</span><span class="w"> </span><span class="vg">T</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">key</span><span class="w"> </span><span class="vg">K</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">cache</span><span class="p">,</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">need</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">insert</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">pair</span><span class="w"> </span><span class="vg">into</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span><span class="w"> </span>
<span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">cache</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">full</span><span class="p">,</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">insert</span><span class="w"> </span><span class="vg">into</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">hash</span><span class="w"> </span><span class="vg">map</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">add</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">item</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">head</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span><span class="w"> </span>
<span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">cache</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">already</span><span class="w"> </span><span class="vg">full</span><span class="p">,</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">get</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">tail</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">update</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">move</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">item</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">head</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span>
</pre></div>
<p><a href="http://hawstein.com/posts/lru-cache-impl.html">ref1</a></p>
<div class="highlight"><pre><span class="vg">LRU</span><span class="err">的典型实现是</span><span class="vg">hash</span><span class="w"> </span><span class="vg">map</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">doubly</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="err">，</span><span class="w"> </span><span class="err">双向链表用于存储数据结点，并且它是按照结点最近被使用的时间来存储的。</span><span class="w"> </span><span class="err">如果一个结点被访问了，</span>
<span class="err">我们有理由相信它在接下来的一段时间被访问的概率要大于其它结点。于是，</span><span class="w"> </span><span class="err">我们把它放到双向链表的头部。当我们往双向链表里插入一个结点，</span><span class="w"> </span><span class="err">我们也有可能很快就会使用到它，</span>
<span class="err">同样把它插入到头部。</span><span class="w"> </span><span class="err">我们使用这种方式不断地调整着双向链表，链表尾部的结点自然也就是最近一段时间，</span><span class="w"> </span><span class="err">最久没有使用到的结点。那么，当我们的</span><span class="vg">Cache</span><span class="err">满了，</span><span class="w"> </span>
<span class="err">需要替换掉的就是双向链表中最后的那个结点</span><span class="p">(</span><span class="err">不是尾结点，头尾结点不存储实际内容</span><span class="p">)</span><span class="err">。</span>

<span class="err">如下是双向链表示意图，注意头尾结点不存储实际内容：</span>

<span class="err">头</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">结</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">结</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">结</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">尾</span>
<span class="err">结</span><span class="w">     </span><span class="err">点</span><span class="w">     </span><span class="err">点</span><span class="w">     </span><span class="err">点</span><span class="w">     </span><span class="err">结</span>
<span class="err">点</span><span class="w"> </span><span class="o">&lt;--</span><span class="w"> </span><span class="il">1</span><span class="w">  </span><span class="o">&lt;--</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="o">&lt;--</span><span class="w"> </span><span class="il">3</span><span class="w">  </span><span class="o">&lt;--</span><span class="w"> </span><span class="err">点</span>
<span class="err">假如上图</span><span class="vg">Cache</span><span class="err">已满了，我们要替换的就是结点</span><span class="il">3</span><span class="err">。</span>

<span class="err">哈希表的作用是什么呢？如果没有哈希表，我们要访问某个结点，就需要顺序地一个个找，</span><span class="w"> </span><span class="err">时间复杂度是</span><span class="vg">O</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="err">。使用哈希表可以让我们在</span><span class="vg">O</span><span class="p">(</span><span class="il">1</span><span class="p">)</span><span class="err">的时间找到想要访问的结点，</span><span class="w"> </span>
<span class="err">或者返回未找到。</span>
</pre></div><div class="highlight"><pre>    <span class="k">class</span> <span class="nc">LRUCache</span>
    <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="k">struct</span> <span class="n">Node</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">key</span><span class="p">;</span>
            <span class="n">Node</span> <span class="o">*</span> <span class="n">prev</span><span class="p">;</span>
            <span class="n">Node</span> <span class="o">*</span> <span class="n">next</span><span class="p">;</span>
            <span class="n">Node</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">,</span> <span class="kt">int</span> <span class="n">v</span><span class="p">)</span><span class="o">:</span> <span class="n">key</span><span class="p">(</span><span class="n">k</span><span class="p">),</span><span class="n">value</span><span class="p">(</span><span class="n">v</span><span class="p">),</span><span class="n">prev</span><span class="p">(</span><span class="nb">NULL</span><span class="p">),</span> <span class="n">next</span><span class="p">(</span><span class="nb">NULL</span><span class="p">)</span>
            <span class="p">{}</span>
        <span class="p">};</span>

        <span class="n">LRUCache</span><span class="p">(</span><span class="kt">int</span> <span class="n">capacity</span><span class="p">)</span><span class="o">:</span><span class="n">capacity_</span><span class="p">(</span><span class="n">capacity</span><span class="p">)</span> 
        <span class="p">{</span>
            <span class="n">head</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="n">tail</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">tail</span><span class="p">;</span>
            <span class="n">tail</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="o">~</span><span class="n">LRUCache</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">delete</span> <span class="n">head</span><span class="p">;</span>
            <span class="k">delete</span> <span class="n">tail</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">kv_</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span><span class="o">!=</span><span class="n">kv_</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>
                <span class="k">delete</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">int</span> <span class="n">get</span><span class="p">(</span><span class="kt">int</span> <span class="n">key</span><span class="p">)</span> 
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">kv_</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">kv_</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="n">removeFromList</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">);</span>
                <span class="n">move2Head</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">);</span>
                <span class="k">return</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">void</span> <span class="n">set</span><span class="p">(</span><span class="kt">int</span> <span class="n">key</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> 
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">kv_</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">kv_</span><span class="p">.</span><span class="n">end</span><span class="p">())</span><span class="c1">//replace</span>
            <span class="p">{</span>
                <span class="n">removeFromList</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">);</span>
                <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
                <span class="n">move2Head</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">);</span>
            <span class="p">}</span><span class="k">else</span><span class="c1">//insert new</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">kv_</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">capacity_</span><span class="p">)</span><span class="c1">//remove tail</span>
                <span class="p">{</span>
                    <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">tail</span><span class="o">-&gt;</span><span class="n">prev</span><span class="p">;</span>
                    <span class="n">removeFromList</span><span class="p">(</span><span class="n">node</span><span class="p">);</span><span class="c1">//!!Do not forget</span>
                    <span class="n">kv_</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">key</span><span class="p">);</span>
                    <span class="n">node</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="p">;</span>
                    <span class="n">node</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
                    <span class="n">kv_</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
                    <span class="n">move2Head</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
                <span class="p">}</span><span class="k">else</span> <span class="c1">//add</span>
                <span class="p">{</span>
                    <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
                    <span class="n">kv_</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
                    <span class="n">move2Head</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="k">private</span><span class="o">:</span>
        <span class="n">Node</span> <span class="o">*</span> <span class="n">head</span><span class="p">;</span> <span class="c1">//head and tail do NOT store data</span>
        <span class="n">Node</span> <span class="o">*</span> <span class="n">tail</span><span class="p">;</span>
        <span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">Node</span><span class="o">*&gt;</span> <span class="n">kv_</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">capacity_</span><span class="p">;</span>
        <span class="kt">void</span> <span class="nf">removeFromList</span><span class="p">(</span><span class="n">Node</span><span class="o">*</span> <span class="n">node</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">node</span><span class="o">-&gt;</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">prev</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kt">void</span> <span class="nf">move2Head</span><span class="p">(</span><span class="n">Node</span><span class="o">*</span> <span class="n">node</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Node</span><span class="o">*</span> <span class="n">old</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">old</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
            <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">old</span><span class="p">;</span>
            <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
            <span class="n">node</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
</pre></div>
<p>看看人家用stl中的list写的，代码多短啊。 ref <a href="https://github.com/soulmachine/leetcode">leetcode-cpp</a>
list中的方法</p>

<blockquote>
<p>splice (iterator position, list&amp; x, iterator i);
Transfers elements from x into the container, inserting them at position. <a href="http://www.cplusplus.com/reference/list/list/splice/">list api</a> </p>
</blockquote>
<div class="highlight"><pre>    <span class="k">class</span> <span class="nc">LRUCache</span>
    <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="k">struct</span> <span class="n">Node</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">key</span><span class="p">;</span>
            <span class="n">Node</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">,</span> <span class="kt">int</span> <span class="n">v</span><span class="p">)</span><span class="o">:</span> <span class="n">key</span><span class="p">(</span><span class="n">k</span><span class="p">),</span><span class="n">value</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="p">{}</span>
        <span class="p">};</span>

        <span class="n">LRUCache</span><span class="p">(</span><span class="kt">int</span> <span class="n">capacity</span><span class="p">)</span><span class="o">:</span><span class="n">capacity_</span><span class="p">(</span><span class="n">capacity</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="kt">int</span> <span class="n">get</span><span class="p">(</span><span class="kt">int</span> <span class="n">key</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">kv_</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">kv_</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="c1">//transfer: remove it from dataList, add to dataList.begin()</span>
                <span class="c1">//std::list::splice http://www.cplusplus.com/reference/list/list/splice/</span>
                <span class="n">dataList</span><span class="p">.</span><span class="n">splice</span><span class="p">(</span><span class="n">dataList</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">dataList</span><span class="p">,</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">);</span>
                <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span> <span class="o">=</span> <span class="n">dataList</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
                <span class="k">return</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">void</span> <span class="n">set</span><span class="p">(</span><span class="kt">int</span> <span class="n">key</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">kv_</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">kv_</span><span class="p">.</span><span class="n">end</span><span class="p">())</span><span class="c1">//replace</span>
            <span class="p">{</span>
                <span class="n">dataList</span><span class="p">.</span><span class="n">splice</span><span class="p">(</span><span class="n">dataList</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">dataList</span><span class="p">,</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">);</span>
                <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span> <span class="o">=</span> <span class="n">dataList</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
                <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span><span class="c1">//insert new</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">kv_</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">capacity_</span><span class="p">)</span><span class="c1">//remove tail</span>
                <span class="p">{</span>
                    <span class="n">kv_</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">dataList</span><span class="p">.</span><span class="n">back</span><span class="p">().</span><span class="n">key</span><span class="p">);</span>
                    <span class="k">auto</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">dataList</span><span class="p">.</span><span class="n">back</span><span class="p">();</span>
                    <span class="n">dataList</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
                    <span class="n">tail</span><span class="p">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="p">;</span> <span class="n">tail</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
                    <span class="n">dataList</span><span class="p">.</span><span class="n">push_front</span><span class="p">(</span><span class="n">tail</span><span class="p">);</span>
                    <span class="n">kv_</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataList</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="c1">//insert</span>
                <span class="p">}</span><span class="k">else</span>
                <span class="p">{</span>
                    <span class="n">dataList</span><span class="p">.</span><span class="n">push_front</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">));</span>
                    <span class="n">kv_</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataList</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="c1">//insert</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="k">private</span><span class="o">:</span>
        <span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">list</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;::</span><span class="n">iterator</span><span class="o">&gt;</span> <span class="n">kv_</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">capacity_</span><span class="p">;</span>
        <span class="n">list</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;</span> <span class="n">dataList</span><span class="p">;</span>
    <span class="p">};</span>
</pre></div>
<p><span id="Linked-List-Cycle"></span></p>

<h2>Linked List Cycle</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/linked-list-cycle/">Linked List Cycle</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="p">,</span><span class="w"> </span><span class="vg">determine</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">cycle</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">it</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>简单的快慢指针.</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">hasCycle</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">slow</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">fast</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">){</span>
            <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">fast</span> <span class="o">==</span> <span class="n">slow</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Linked-List-Cycle-II"></span></p>

<h2>Linked List Cycle II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/linked-list-cycle-ii/">Linked List Cycle II</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">cycle</span><span class="w"> </span><span class="vg">begins</span><span class="o">.</span><span class="w"> </span><span class="vg">If</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">cycle</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">null</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>跟<a href="linked-list-cycle.html">Linked List Cycle 题解</a>一样,运用快慢指针,
先判断是否存在环。然后再找环的起点。
假设存在环，不妨设这个带环的链表长成这个样子(将就看)：</p>
<div class="highlight"><pre><span class="vg">s</span><span class="o">-------</span><span class="vg">a</span><span class="o">-&gt;-------</span>
<span class="w">        </span><span class="o">|</span><span class="w">        </span><span class="o">|</span>
<span class="w">        </span><span class="o">|-&lt;-</span><span class="vg">c</span><span class="o">----|</span>
</pre></div>
<p>如图示，链表起点s,
a是环开始的点，假设快慢指针第一次相遇的点在c处。我们将这个环分为3段，</p>

<ol>
<li>s--&gt;a: 链表起点到还的起点，假设距离为a;</li>
<li>a--&gt;c: 环的起点到快慢指针首次相交的点c，设距离为b;</li>
<li>c--&gt;a: 快慢指针首次相交的点，再转回环起点a的距离设为c;</li>
</ol>

<p>那么，得到环的长度为<code>b+c</code>, 到快慢指针首次相交时，快/慢指针走的距离设fast/slow分别为：</p>

<ul>
<li>fast = a + b + n*(b + c), n &gt;= 1, (可能快指针比慢指针多走了不止1圈)</li>
<li>slow = a + b</li>
</ul>

<p>又因为fast每次走两步，slow每次走一步，所以有 </p>
<div class="highlight"><pre><span class="vg">fast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="vg">slow</span><span class="w"> </span>
<span class="vg">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">n</span><span class="o">*</span><span class="p">(</span><span class="vg">b</span><span class="o">+</span><span class="vg">c</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="vg">a</span><span class="o">+</span><span class="vg">b</span><span class="p">)</span>
<span class="p">(</span><span class="vg">n</span><span class="il">-1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="vg">b</span><span class="o">+</span><span class="vg">c</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="vg">b</span><span class="o">+</span><span class="vg">c</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="o">+</span><span class="vg">b</span>
<span class="p">(</span><span class="vg">n</span><span class="il">-1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="vg">b</span><span class="o">+</span><span class="vg">c</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">a</span><span class="p">;</span>
</pre></div>
<p>观察这个式子，若首次相交时，将fast指针若回到链表头，然后fast、slow都<em>一步一步走</em>，那么他们将在哪相遇?</p>

<p>fast走到a时，slow恰好走了(n-1)圈+c，刚好回到了环起点a处。</p>

<p>因此首次相遇后，再次相遇的点即为环的起点。</p>

<p>代码如下：</p>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">detectCycle</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">slow</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">fast</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">fast</span> <span class="o">==</span> <span class="n">slow</span><span class="p">)</span> <span class="c1">//find intersection node</span>
            <span class="p">{</span>
                <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
                <span class="k">while</span><span class="p">(</span><span class="n">fast</span> <span class="o">!=</span> <span class="n">slow</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
                    <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="n">fast</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Merge-Two-Sorted-Lists"></span></p>

<h2>Merge Two Sorted Lists</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/merge-two-sorted-lists/">Merge Two Sorted Lists</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Merge</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">lists</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">new</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span><span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">new</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">made</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">splicing</span><span class="w"> </span><span class="vg">together</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">lists</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>用一个多余的节点在头部，使得代码简洁，不然得去内部判断到底哪个节点当作新list的head。</p>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">mergeTwoLists</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">l1</span><span class="p">,</span> <span class="n">ListNode</span> <span class="o">*</span><span class="n">l2</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">ListNode</span> <span class="n">dummy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">l1</span> <span class="o">&amp;&amp;</span> <span class="n">l2</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">l1</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&lt;=</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
                <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">l1</span><span class="p">,</span> <span class="n">l1</span> <span class="o">=</span> <span class="n">l1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="k">else</span> 
                <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">l2</span><span class="p">,</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">l1</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">l1</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">l2</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Merge-k-Sorted-Lists"></span></p>

<h2>Merge k Sorted Lists</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/merge-k-sorted-lists/">Merge k Sorted Lists</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Merge</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">lists</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span><span class="w"> </span><span class="vg">Analyze</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">describe</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">complexity</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟<a href="#Merge-Two-Sorted-Lists">merge-two-sorted-lists</a> 一样, 一个一个merge即可。</p>
<div class="highlight"><pre><span class="n">ListNode</span> <span class="o">*</span> <span class="nf">merge2List</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">list1</span><span class="p">,</span> <span class="n">ListNode</span><span class="o">*</span> <span class="n">list2</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">ListNode</span> <span class="n">dummy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
   <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy</span><span class="p">;</span>
   <span class="k">while</span><span class="p">(</span><span class="n">list1</span> <span class="o">&amp;&amp;</span> <span class="n">list2</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">if</span><span class="p">(</span><span class="n">list1</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&lt;=</span> <span class="n">list2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
           <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">list1</span><span class="p">,</span> <span class="n">list1</span> <span class="o">=</span> <span class="n">list1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
       <span class="k">else</span>
           <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">list2</span><span class="p">,</span> <span class="n">list2</span> <span class="o">=</span> <span class="n">list2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
       <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">if</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span>
       <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">list1</span><span class="p">;</span>
   <span class="k">else</span>
       <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">list2</span><span class="p">;</span>
   <span class="k">return</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">ListNode</span> <span class="o">*</span><span class="nf">mergeKLists</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">ListNode</span> <span class="o">*&gt;</span> <span class="o">&amp;</span><span class="n">lists</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="k">if</span><span class="p">(</span><span class="n">lists</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
   <span class="n">ListNode</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="n">lists</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">lists</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
       <span class="n">result</span> <span class="o">=</span> <span class="n">merge2List</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">lists</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
   <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>不过超时了. 从超时的testcase可以看出,全是短的链表， 加到结果集的链表后，新的短链表加进去运气不好又得将长链表遍历完后才能加到结果链表中。</p>

<p>改成如下代码就可以AC了。</p>
<div class="highlight"><pre><span class="n">ListNode</span> <span class="o">*</span><span class="nf">mergeKLists</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">ListNode</span> <span class="o">*&gt;</span> <span class="o">&amp;</span><span class="n">lists</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="k">if</span><span class="p">(</span><span class="n">lists</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="n">ListNode</span><span class="o">*&gt;</span> <span class="n">merged</span><span class="p">(</span><span class="n">lists</span><span class="p">);</span>
   <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">merged</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
   <span class="k">while</span><span class="p">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
           <span class="n">merged</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">merge2List</span><span class="p">(</span><span class="n">merged</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">],</span> <span class="n">merged</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
       <span class="k">if</span><span class="p">((</span><span class="n">size</span> <span class="o">&amp;</span> <span class="mh">0x1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
           <span class="n">merged</span><span class="p">[</span><span class="n">size</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">merge2List</span><span class="p">(</span><span class="n">merged</span><span class="p">[</span><span class="n">size</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="n">merged</span><span class="p">[</span><span class="n">size</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
       <span class="n">size</span> <span class="o">/=</span> <span class="mi">2</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">merged</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
<p><span id="Partition-List"></span></p>

<h2>Partition List</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/partition-list/">Partition List </a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">value</span><span class="w"> </span><span class="vg">x</span><span class="p">,</span><span class="w"> </span><span class="vg">partition</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">less</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="vg">come</span><span class="w"> </span><span class="vg">before</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">greater</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">equal</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">x</span><span class="o">.</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">preserve</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">original</span><span class="w"> </span><span class="vg">relative</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">partitions</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">5</span><span class="o">-&gt;</span><span class="il">2</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3</span><span class="p">,</span>
<span class="vg">return</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">5</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>注意一些边界情况， 要保持以前的两个节点顺序。不然就可以把小于x的一个一个往最前面插入。</p>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">partition</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">ListNode</span> <span class="n">dummy1</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">dummy2</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">left</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy1</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">right</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy2</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">left</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">left</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span>
            <span class="p">{</span>
                <span class="n">right</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">right</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">left</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">dummy2</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
        <span class="n">right</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">dummy1</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Remove-Duplicates-from-Sorted-List"></span></p>

<h2>Remove Duplicates from Sorted List</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/remove-duplicates-from-sorted-list/">Remove Duplicates from Sorted List</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="p">,</span><span class="w"> </span><span class="vg">delete</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">duplicates</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">element</span><span class="w"> </span><span class="vg">appear</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">once</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">.</span>
<span class="vg">Given</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">deleteDuplicates</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">resultBak</span> <span class="o">=</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">while</span><span class="p">(</span><span class="n">head</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">==</span> <span class="n">result</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
                <span class="c1">//free &#39;head&#39;</span>
                <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">result</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span><span class="c1">///result-&gt;val != head</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>    
        <span class="k">return</span> <span class="n">resultBak</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>把与上一个节点相同的值略过， [1] {1 1} 2 2 ... 
上面代码保留相同中的第一个， 会造成内存泄漏。 
下面代码是保留相同中的最后一个，之前的都delete掉。</p>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">deleteDuplicates</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="n">dummy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">while</span><span class="p">(</span><span class="n">head</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">==</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">auto</span> <span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>  <span class="c1">//1 1 1 2</span>
                <span class="k">delete</span> <span class="n">head</span><span class="p">;</span><span class="c1">//free &#39;head&#39;</span>
                <span class="n">head</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">result</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">head</span><span class="p">)</span> <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>    
        <span class="k">return</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Remove-Duplicates-from-Sorted-List-II"></span></p>

<h2>Remove Duplicates from Sorted List II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/remove-duplicates-from-sorted-list-ii/">Remove Duplicates from Sorted List II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="p">,</span><span class="w"> </span><span class="vg">delete</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">duplicate</span><span class="w"> </span><span class="vg">numbers</span><span class="p">,</span><span class="w"> </span><span class="vg">leaving</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">distinct</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">original</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">5</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">5</span><span class="o">.</span>
<span class="vg">Given</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">1</span><span class="o">-&gt;</span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>用一个变量标记是否有相同的节点，直到不同的才连接到result中。</p>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">deleteDuplicates</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">ListNode</span> <span class="n">dummy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span> 
            <span class="kt">bool</span> <span class="n">rep</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">node</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">==</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">auto</span> <span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
                <span class="k">delete</span> <span class="n">node</span><span class="p">;</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
                <span class="n">rep</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span> <span class="c1">//1 1 1 2 2</span>
                <span class="p">{</span><span class="k">delete</span> <span class="n">head</span><span class="p">;</span> <span class="n">head</span> <span class="o">=</span> <span class="n">node</span><span class="p">;}</span>
            <span class="k">else</span> <span class="c1">//1 2 2</span>
                <span class="p">{</span><span class="n">result</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>  <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;}</span>
        <span class="p">}</span>
        <span class="n">result</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">//!!IMPORTANT</span>
        <span class="k">return</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>别忘了最后的节点-&gt;next需要置空。</p>

<p><span id="Remove-Nth-Node-From-End-of-List"></span></p>

<h2>Remove Nth Node From End of List</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/remove-nth-node-from-end-of-list/">Remove Nth Node From End of List</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="p">,</span><span class="w"> </span><span class="vg">remove</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">nth</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">end</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">head</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="w">   </span><span class="vg">Given</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="nl">list:</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">5</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="o">.</span>
<span class="w">   </span><span class="vg">After</span><span class="w"> </span><span class="vg">removing</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">second</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">end</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">becomes</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">5</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">always</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">valid</span><span class="o">.</span>
<span class="vg">Try</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">pass</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>快慢指针的思路, 先走n步，然后另外一个节点从头开始，直到先走的那个节点到达结尾，第二次从头开始的那个点极为要删除的那个节点。 注意边界条件可能要删除头。</p>
<div class="highlight"><pre><span class="n">ListNode</span> <span class="o">*</span><span class="nf">removeNthFromEnd</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">head</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="c1">//n is valid</span>
    <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">ListNode</span> <span class="o">*</span><span class="n">headbak</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">k</span><span class="o">++</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">headbak</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="c1">//delete head</span>
    <span class="p">{</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="n">headbak</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="k">delete</span> <span class="n">pre</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//delete pre-&gt;next;</span>
    <span class="k">auto</span> <span class="n">deleted</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">next</span> <span class="o">=</span> <span class="n">deleted</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">deleted</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">headbak</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id="Reorder-List"></span></p>

<h2>Reorder List</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/reorder-list/">Reorder List</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">singly</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="nl">L:</span><span class="w"> </span><span class="vg">L0</span><span class="err">→</span><span class="vg">L1</span><span class="err">→…→</span><span class="vg">Ln</span><span class="il">-1</span><span class="err">→</span><span class="vg">Ln</span><span class="p">,</span>
<span class="vg">reorder</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="nl">to:</span><span class="w"> </span><span class="vg">L0</span><span class="err">→</span><span class="vg">Ln</span><span class="err">→</span><span class="vg">L1</span><span class="err">→</span><span class="vg">Ln</span><span class="il">-1</span><span class="err">→</span><span class="vg">L2</span><span class="err">→</span><span class="vg">Ln</span><span class="il">-2</span><span class="err">→…</span>

<span class="vg">You</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">in</span><span class="o">-</span><span class="vg">place</span><span class="w"> </span><span class="vg">without</span><span class="w"> </span><span class="vg">altering</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">nodes</span><span class="c1">&#39; values.</span>

<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="p">{</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">4</span><span class="p">},</span><span class="w"> </span><span class="vg">reorder</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="p">{</span><span class="il">1</span><span class="p">,</span><span class="il">4</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">}</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<h3><code>O(n)</code>时间 + <code>O(n)</code>空间</h3>

<p>将node都copy出来放到数组里，后半段逆序(或者直接通过下标不用逆序)连接前半段。</p>
<div class="highlight"><pre>    <span class="c1">//O(n) + O(n)</span>
    <span class="kt">void</span> <span class="nf">reorderList2</span><span class="p">(</span><span class="n">ListNode</span><span class="o">*</span> <span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">ListNode</span><span class="o">*&gt;</span> <span class="n">nodes</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">nodes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">nodes</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">nodes</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="n">mid</span><span class="p">,</span> <span class="n">nodes</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">mid</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">mid</span><span class="p">];</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">mid</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">((</span><span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0x1</span><span class="p">)</span> <span class="o">==</span> <span class="mh">0x1</span><span class="p">)</span><span class="c1">//odd 0,1,2,3,4 | 0,1,4,3,2 | 0-&gt;4-&gt;1-&gt;3-&gt;4 ==&gt;0-&gt;4-&gt;1-&gt;3-&gt;2-&gt;NULL</span>
        <span class="p">{</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="p">}</span><span class="c1">//even 0,1,2,3 | 0,1,3,2| 0-&gt;3-&gt;1-&gt;2</span>
        <span class="k">else</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3><code>O(n)</code>时间 + <code>O(1)</code>空间</h3>

<p>这才是出题者的意图，同样后半段逆序，但通过指针的方式就地逆序，然后与前半段连接。</p>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span> <span class="nf">reverseList</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">node</span><span class="p">){</span>
            <span class="n">ListNode</span><span class="o">*</span> <span class="n">next</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">pre</span><span class="p">;</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">//!!Do not forget</span>
        <span class="k">return</span> <span class="n">pre</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//O(n) time + O(1) space</span>
    <span class="kt">void</span> <span class="nf">reorderList</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="p">;</span>

        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">first</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">fast</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">second</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">second</span> <span class="o">=</span> <span class="n">reverseList</span><span class="p">(</span><span class="n">second</span><span class="p">);</span>

        <span class="k">while</span><span class="p">(</span><span class="n">second</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">ListNode</span> <span class="o">*</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">second</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">second</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">first</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">first</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">second</span><span class="p">;</span>
            <span class="n">first</span> <span class="o">=</span> <span class="n">first</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">second</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Reverse-Linked-List-II"></span></p>

<h2>Reverse Linked List II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/reverse-linked-list-ii/">Reverse Linked List II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Reverse</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">position</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">n</span><span class="o">.</span><span class="w"> </span><span class="vg">Do</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">in</span><span class="o">-</span><span class="vg">place</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">one</span><span class="o">-</span><span class="vg">pass</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">5</span><span class="o">-&gt;</span><span class="vg">NULL</span><span class="p">,</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">4</span><span class="p">,</span>
<span class="vg">return</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">5</span><span class="o">-&gt;</span><span class="vg">NULL</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">m</span><span class="p">,</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">satisfy</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="nl">condition:</span>
<span class="nl">1</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：
画个图 较清晰。</p>

<p>1-&gt; 2-&gt;3-&gt; 4-&gt;5-&gt;NULL
pre m cur next
pre不变, 一个一个插入到pre后面.</p>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">reverseBetween</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="n">dummy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy</span><span class="p">;</span>
        <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">++</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">)</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>

        <span class="c1">//reverse between [m n]</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">mthNode</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">mthNode</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="o">*</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">m</span><span class="o">++</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">next</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">cur</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
            <span class="n">cur</span><span class="o">=</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">mthNode</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>   
</pre></div>
<p><span id="Reverse-Nodes-in-k-Group"></span></p>

<h2>Reverse Nodes in k Group</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/reverse-nodes-in-k-group/">Reverse Nodes in k-Group</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="p">,</span><span class="w"> </span><span class="vg">reverse</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">time</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">modified</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">multiple</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">left</span><span class="o">-</span><span class="vg">out</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">end</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">remain</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">is</span><span class="o">.</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">alter</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">values</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">nodes</span><span class="p">,</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">itself</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">changed</span><span class="o">.</span>
<span class="vg">Only</span><span class="w"> </span><span class="vg">constant</span><span class="w"> </span><span class="vg">memory</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">allowed</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="nl">list:</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">5</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="nl">return:</span><span class="w"> </span><span class="il">2</span><span class="o">-&gt;</span><span class="il">1</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">5</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="nl">return:</span><span class="w"> </span><span class="il">3</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">1</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">5</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>没遇到k个，就reverse一下。值得注意的是：
- 输入list长度是否对于k个;
- 最后不足的k个;
- reverse 中间的一段前之前得backup一下当前段(tail)的下一个, 以防止reverse内部改变了tail-&gt;next值.</p>
<div class="highlight"><pre><span class="c1">//reverse [start, tail], return newhead</span>
<span class="n">ListNode</span><span class="o">*</span> <span class="nf">reverse</span><span class="p">(</span><span class="n">ListNode</span><span class="o">*</span> <span class="n">head</span><span class="p">,</span> <span class="n">ListNode</span><span class="o">*</span> <span class="n">tail</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">head</span> <span class="o">!=</span> <span class="n">tail</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">auto</span> <span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">pre</span><span class="p">;</span>
        <span class="n">pre</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">pre</span><span class="p">;</span> <span class="c1">//do not forget tail</span>
    <span class="k">return</span> <span class="n">tail</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">ListNode</span> <span class="o">*</span><span class="nf">reverseKGroup</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">k</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>    
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">lastStart</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> 
        <span class="k">auto</span> <span class="n">start</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">++</span> <span class="o">&lt;</span> <span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="n">head</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">end</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
            <span class="k">auto</span> <span class="n">nextbak</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="k">auto</span> <span class="n">segStart</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">lastStart</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>  
                <span class="n">result</span> <span class="o">=</span> <span class="n">segStart</span><span class="p">;</span>
            <span class="k">else</span> 
                <span class="n">lastStart</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">segStart</span><span class="p">;</span>
            <span class="n">lastStart</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">nextbak</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="c1">//last segment</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">lastStart</span><span class="p">)</span>
                <span class="n">lastStart</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span>
            <span class="k">else</span> <span class="c1">//node len less than k</span>
                <span class="k">return</span> <span class="n">start</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id="Rotate-List"></span></p>

<h2>Rotate List</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/rotate-list/">Rotate List</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">list</span><span class="p">,</span><span class="w"> </span><span class="vg">rotate</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">right</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="vg">places</span><span class="p">,</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">5</span><span class="o">-&gt;</span><span class="vg">NULL</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="p">,</span>
<span class="vg">return</span><span class="w"> </span><span class="il">4</span><span class="o">-&gt;</span><span class="il">5</span><span class="o">-&gt;</span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="vg">NULL</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>找出分隔点，注意对输入k值的处理，k可能超过链表长度。另外别忘了链表结尾要手动置为NULL。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="n">ListNode</span><span class="o">*</span> <span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
            <span class="o">++</span><span class="n">len</span><span class="p">,</span> <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">len</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">rotateRight</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">len</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">newHead</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">headbak</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="o">-</span><span class="n">k</span><span class="p">)</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="n">newHead</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">//!!! important</span>
        <span class="n">ListNode</span> <span class="o">*</span><span class="n">tail</span> <span class="o">=</span> <span class="n">newHead</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">tail</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
            <span class="n">tail</span> <span class="o">=</span> <span class="n">tail</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">tail</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">headbak</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">newHead</span><span class="p">;</span>
    <span class="p">}</span> 
</pre></div>
<p><span id="Sort-List"></span></p>

<h2>Sort List</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/sort-list/">Sort List </a></p>

<blockquote>
<p>Sort a linked list in O(n log n) time using constant space complexity.</p>
</blockquote>

<p>解题思路：
可以用归并或者快排.
merge就比较简单，一个一个比较然后将较小的放到上一个的后面。 用一个dummy省去第一个head的确定。</p>
<div class="highlight"><pre><span class="n">ListNode</span><span class="o">*</span> <span class="nf">merge</span><span class="p">(</span><span class="n">ListNode</span><span class="o">*</span> <span class="n">head1</span><span class="p">,</span> <span class="n">ListNode</span><span class="o">*</span> <span class="n">head2</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ListNode</span> <span class="n">dummy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">head1</span> <span class="o">&amp;&amp;</span> <span class="n">head2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head1</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&lt;</span> <span class="n">head2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">head1</span><span class="p">;</span>
            <span class="n">head1</span> <span class="o">=</span> <span class="n">head1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span> 
        <span class="p">{</span>
            <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">head2</span><span class="p">;</span>
            <span class="n">head2</span> <span class="o">=</span> <span class="n">head2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>    
    <span class="k">if</span><span class="p">(</span><span class="n">head1</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">head1</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">head2</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>然后就是递归一半一半来，如下所示：</p>
<div class="highlight"><pre><span class="n">ListNode</span> <span class="o">*</span> <span class="nf">mergesort</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">head</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">list_len</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&gt;</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">swap</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">);</span><span class="c1">//or std::swap(head-&gt;val, head-&gt;next-&gt;val);</span>
            <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">len</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">left_tail</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">left_tail</span> <span class="o">=</span> <span class="n">left_tail</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">right</span> <span class="o">=</span> <span class="n">left_tail</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="n">left_tail</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">left_result</span> <span class="o">=</span> <span class="n">mergesort</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">right_result</span> <span class="o">=</span> <span class="n">mergesort</span><span class="p">(</span><span class="n">right</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">merge</span><span class="p">(</span><span class="n">left_result</span><span class="p">,</span> <span class="n">right_result</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p>当然也可以用快慢指针去找中间的那个。</p>
<div class="highlight"><pre><span class="n">ListNode</span> <span class="o">*</span><span class="nf">sortList</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">NULL</span> <span class="o">==</span> <span class="n">head</span> <span class="o">||</span> <span class="nb">NULL</span> <span class="o">==</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">ListNode</span><span class="o">*</span> <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">ListNode</span><span class="o">*</span> <span class="n">slow</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="nb">NULL</span> <span class="o">!=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">&amp;&amp;</span> <span class="nb">NULL</span> <span class="o">!=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">){</span>
            <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//slow is mid, ignore fast: (last or last but one)</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">slow</span><span class="p">;</span>
        <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span> <span class="c1">//the right part </span>
        <span class="n">mid</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="c1">// cut the left part</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">left</span> <span class="o">=</span> <span class="n">sortList</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">right</span> <span class="o">=</span> <span class="n">sortList</span><span class="p">(</span><span class="n">slow</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>刚开始写的快排，有的testcase过不了(数字范围全是1-3那个共30293个数)，把这个testcase排除掉后，也能AC。</p>
<div class="highlight"><pre> <span class="n">ListNode</span><span class="o">*</span> <span class="nf">quick_sort_</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">head</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">head</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1000</span><span class="p">)</span> <span class="k">return</span> <span class="n">mergeSort</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
    <span class="n">ListNode</span>   <span class="n">lefthead</span> <span class="o">=</span> <span class="n">ListNode</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">ListNode</span>   <span class="n">righthead</span> <span class="o">=</span> <span class="n">ListNode</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">left</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">lefthead</span><span class="p">;</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">right</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">righthead</span><span class="p">;</span>

    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pivot</span> <span class="o">=</span>  <span class="n">head</span><span class="p">;</span> <span class="c1">//or random select one</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">t</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">t</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&lt;=</span> <span class="n">pivot</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">left</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">t</span><span class="p">;</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">left</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span>
        <span class="p">{</span>
            <span class="n">right</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">t</span><span class="p">;</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">right</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="n">left</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="n">right</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">left_result</span> <span class="o">=</span> <span class="n">quick_sort_</span><span class="p">(</span><span class="n">lefthead</span><span class="p">.</span><span class="n">next</span><span class="p">);</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">right_result</span> <span class="o">=</span> <span class="n">quick_sort_</span><span class="p">(</span><span class="n">righthead</span><span class="p">.</span><span class="n">next</span><span class="p">);</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">newresult_head</span> <span class="o">=</span> <span class="n">left_result</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">left_result</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left_result</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">left_result</span> <span class="o">=</span> <span class="n">left_result</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="c1">//left_result-&gt;next is NULL</span>
        <span class="n">left_result</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">pivot</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span>
    <span class="p">{</span>
        <span class="n">newresult_head</span> <span class="o">=</span> <span class="n">pivot</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">pivot</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">right_result</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">newresult_head</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">ListNode</span> <span class="o">*</span> <span class="nf">quick_sort</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">head</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
    <span class="c1">//if(len(head) == 30293) return countSort(head); </span>
    <span class="k">return</span> <span class="n">quick_sort_</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p><span id="Swap-Nodes-in-Pairs"></span></p>

<h2>Swap Nodes in Pairs</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/swap-nodes-in-pairs/">Swap Nodes in Pairs</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="p">,</span><span class="w"> </span><span class="vg">swap</span><span class="w"> </span><span class="vg">every</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">adjacent</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">head</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">-&gt;</span><span class="il">4</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="il">2</span><span class="o">-&gt;</span><span class="il">1</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">3</span><span class="o">.</span>
<span class="vg">Your</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">use</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">constant</span><span class="w"> </span><span class="vg">space</span><span class="o">.</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">modify</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">values</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="p">,</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">itself</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">changed</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>reverseKGroup</h3>

<p>前面刚写了 <a href="#Reverse-Nodes-In-K-Group">reverse-nodes-in-k-group</a>，直接调用一下，传参数2即可。</p>
<div class="highlight"><pre><span class="c1">//reverse [start, tail], return newhead</span>
<span class="n">ListNode</span><span class="o">*</span> <span class="nf">reverse</span><span class="p">(</span><span class="n">ListNode</span><span class="o">*</span> <span class="n">head</span><span class="p">,</span> <span class="n">ListNode</span><span class="o">*</span> <span class="n">tail</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">head</span> <span class="o">!=</span> <span class="n">tail</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">auto</span> <span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">pre</span><span class="p">;</span>
        <span class="n">pre</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">pre</span><span class="p">;</span> <span class="c1">//do not forget tail</span>
    <span class="k">return</span> <span class="n">tail</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">ListNode</span> <span class="o">*</span><span class="nf">reverseKGroup</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">k</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>    
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">lastStart</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">ListNode</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> 
        <span class="k">auto</span> <span class="n">start</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">++</span> <span class="o">&lt;</span> <span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="n">head</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">end</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
            <span class="k">auto</span> <span class="n">nextbak</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="k">auto</span> <span class="n">segStart</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">lastStart</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>  
                <span class="n">result</span> <span class="o">=</span> <span class="n">segStart</span><span class="p">;</span>
            <span class="k">else</span> 
                <span class="n">lastStart</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">segStart</span><span class="p">;</span>
            <span class="n">lastStart</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span>
            <span class="n">head</span> <span class="o">=</span> <span class="n">nextbak</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="c1">//last segment</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">lastStart</span><span class="p">)</span>
                <span class="n">lastStart</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span>
            <span class="k">else</span> <span class="c1">//node len less than k</span>
                <span class="k">return</span> <span class="n">start</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">ListNode</span> <span class="o">*</span><span class="nf">swapPairs</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">return</span> <span class="n">reverseKGroup</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h3>递归版本</h3>

<blockquote>
<div class="highlight"><pre><span class="vg">next</span><span class="p">(</span><span class="vg">p1</span><span class="o">-&gt;</span><span class="vg">p2</span><span class="o">-&gt;</span><span class="vg">p3</span><span class="o">-&gt;</span><span class="vg">p4</span><span class="o">...</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w">   </span>
<span class="vg">p1</span><span class="o">-&gt;</span><span class="vg">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">next</span><span class="p">(</span><span class="vg">p3</span><span class="o">-&gt;</span><span class="vg">p4</span><span class="o">...</span><span class="p">);</span>
<span class="vg">p2</span><span class="o">-&gt;</span><span class="vg">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">p1</span><span class="p">;</span>
<span class="vg">return</span><span class="w"> </span><span class="vg">p2</span><span class="p">;</span>
</pre></div></blockquote>

<p>代码如下:</p>
<div class="highlight"><pre><span class="n">ListNode</span><span class="o">*</span> <span class="nf">next</span><span class="p">(</span><span class="n">ListNode</span><span class="o">*</span><span class="n">p1</span><span class="p">,</span> <span class="n">ListNode</span><span class="o">*</span> <span class="n">p2</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">p1</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">p1</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">p2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">p1</span><span class="p">;</span>
    <span class="n">p1</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="p">(</span><span class="n">p2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">p2</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">?</span> <span class="n">p2</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="nl">next</span> <span class="p">:</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">p2</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p1</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">p2</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">ListNode</span> <span class="o">*</span><span class="nf">swapPairs</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">next</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h3>迭代版本</h3>
<div class="highlight"><pre><span class="n">ListNode</span> <span class="o">*</span><span class="nf">swapPairs</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
    <span class="c1">//1     2   3       4 5</span>
    <span class="c1">//1st   2nd next</span>
    <span class="n">ListNode</span> <span class="n">dummy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">ListNode</span> <span class="o">*</span><span class="n">pre</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy</span><span class="p">;</span>
    <span class="n">ListNode</span> <span class="o">*</span><span class="n">first</span> <span class="o">=</span> <span class="n">head</span><span class="p">,</span> <span class="o">*</span><span class="n">second</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">*</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">first</span> <span class="o">&amp;&amp;</span> <span class="n">first</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">second</span> <span class="o">=</span> <span class="n">first</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">next</span> <span class="o">=</span> <span class="n">second</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>

        <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">second</span><span class="p">;</span>
        <span class="n">second</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">first</span><span class="p">;</span>
        <span class="n">first</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>

        <span class="n">pre</span> <span class="o">=</span> <span class="n">first</span><span class="p">;</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h1>binary tree, 二叉树相关</h1>

<p><span id="Balanced-Binary-Tree"></span></p>

<h2>Balanced Binary Tree</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/balanced-binary-tree/">Balanced Binary Tree </a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">determine</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">height</span><span class="o">-</span><span class="vg">balanced</span><span class="o">.</span>

<span class="vg">For</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">problem</span><span class="p">,</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">height</span><span class="o">-</span><span class="vg">balanced</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">defined</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">depth</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">subtrees</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">every</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">never</span><span class="w"> </span><span class="vg">differ</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">more</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="il">1</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>递归. </p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">depth</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span><span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">bool</span> <span class="nf">isBalanced</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">left</span> <span class="o">-</span> <span class="n">right</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">isBalanced</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">isBalanced</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>其实递归过程中好多都算重复了。 可以将判断过程融合在算高度的方法里。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">depth</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">right</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">abs</span><span class="p">(</span><span class="n">left</span><span class="o">-</span><span class="n">right</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> 
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">bool</span> <span class="nf">isBalanced</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Binary-Tree-Inorder-Traversal"></span></p>

<h2>Binary Tree Inorder Traversal</h2>

<p>题目来源： <a href="https://oj.leetcode.com/problems/binary-tree-Inorder-traversal/">Binary Tree Inorder Traversal</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">inorder</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">nodes</span><span class="c1">&#39; values.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="p">{</span><span class="il">1</span><span class="p">,</span><span class="err">#</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">},</span>
<span class="w">   </span><span class="il">1</span>
<span class="w">    </span><span class="o">\</span>
<span class="w">     </span><span class="il">2</span>
<span class="w">    </span><span class="o">/</span>
<span class="w">   </span><span class="il">3</span>
<span class="vg">return</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">2</span><span class="p">]</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">Recursive</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">trivial</span><span class="p">,</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">iteratively</span><span class="o">?</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>思路一: 直接递归(略)</h3>

<h3>思路二: 用stack.</h3>
<div class="highlight"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">inorderNormal</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
    <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">stacks</span><span class="p">;</span>
    <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">cur</span><span class="p">);</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>

        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">inorderTraversal</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="k">return</span> <span class="nf">inorderNormal</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h3>思路三： Morris遍历. <code>O(1)</code>空间 + <code>O(n)</code>时间</h3>

<p>利用线索二叉树, 利用叶子节点的空指针指向前驱后继来记住状态。算法仍参考<a href="http://www.cnblogs.com/AnnieKim/archive/2013/06/15/MorrisTraversal.html">Morris Traversal</a>，里面讲了详细的案例。</p>

<p>具体算法如下:</p>
<div class="highlight"><pre><span class="err">步骤：</span>
<span class="nl">1</span><span class="o">.</span><span class="w"> </span><span class="err">如果当前节点的左孩子为空，则输出当前节点并将其右孩子作为当前节点。</span>
<span class="nl">2</span><span class="o">.</span><span class="w"> </span><span class="err">如果当前节点的左孩子不为空，在当前节点的左子树中找到当前节点在中序遍历下的前驱节点。</span>
<span class="w">   </span><span class="vg">a</span><span class="p">)</span><span class="w"> </span><span class="err">如果前驱节点的右孩子为空，将它的右孩子设置为当前节点。当前节点更新为当前节点的左孩子。</span>
<span class="w">   </span><span class="vg">b</span><span class="p">)</span><span class="w"> </span><span class="err">如果前驱节点的右孩子为当前节点，将它的右孩子重新设为空（恢复树的形状）。输出当前节点。当前节点更新为当前节点的右孩子。</span>
<span class="nl">3</span><span class="o">.</span><span class="w"> </span><span class="err">重复以上</span><span class="il">1</span><span class="err">、</span><span class="il">2</span><span class="err">直到当前节点为空。</span>
</pre></div><div class="highlight"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">inorderMorris</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
    <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="nb">NULL</span> <span class="o">!=</span> <span class="n">cur</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="n">cur</span><span class="p">)</span>
                <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
                <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="c1">//reset</span>
            <span class="p">{</span>
                <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
                <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p><span id="Binary-Tree-Level-Order-Traversal"></span></p>

<h2>Binary Tree Level Order Traversal</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/binary-tree-level-order-traversal/">Binary Tree Level Order Traversal</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">level</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">nodes</span><span class="c1">&#39; values. (ie, from left to right, level by level).</span>

<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="p">{</span><span class="il">3</span><span class="p">,</span><span class="il">9</span><span class="p">,</span><span class="il">20</span><span class="p">,</span><span class="err">#</span><span class="p">,</span><span class="err">#</span><span class="p">,</span><span class="il">15</span><span class="p">,</span><span class="il">7</span><span class="p">},</span>
<span class="w">    </span><span class="il">3</span>
<span class="w">   </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">  </span><span class="il">9</span><span class="w">  </span><span class="il">20</span>
<span class="w">    </span><span class="o">/</span><span class="w">  </span><span class="o">\</span>
<span class="w">   </span><span class="il">15</span><span class="w">   </span><span class="il">7</span>
<span class="vg">return</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">level</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="nl">as:</span>
<span class="p">[</span>
<span class="w">  </span><span class="p">[</span><span class="il">3</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">9</span><span class="p">,</span><span class="il">20</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">15</span><span class="p">,</span><span class="il">7</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
<p>解题思路：</p>

<h3>常规方法, 两个queue交替</h3>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">levelOrder0</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">queue</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">;</span>
        <span class="n">q1</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">q1</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">level</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">q1</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">q1</span><span class="p">.</span><span class="n">front</span><span class="p">();</span> <span class="n">q1</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                <span class="n">level</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="n">q2</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="n">q2</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="p">);</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">level</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>单queue+隔板</h3>

<p>前面<a href="#Word-Ladder-Ii">word ladder ii</a>就提到过bfs，用隔板将各层之间隔离出来。只用一个queue就能知道某层是否已经遍历完毕。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">levelOrder</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">queue</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">q</span><span class="p">;</span>
        <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">split</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">q</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">split</span><span class="p">);</span>
            <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">level</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">()</span> <span class="o">!=</span> <span class="n">split</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">();</span> <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                <span class="n">level</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">level</span><span class="p">);</span>
            <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span><span class="c1">//pop split;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>递归</h3>

<p>递归写起来就是简单。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">levelOrderRecusion</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="n">level</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">level</span> <span class="o">&gt;=</span> <span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">());</span>
        <span class="n">result</span><span class="p">[</span><span class="n">level</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span>
            <span class="n">levelOrderRecusion</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
            <span class="n">levelOrderRecusion</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">levelOrder</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">levelOrderRecusion</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Binary-Tree-Level-Order-Traversal-II"></span></p>

<h2>Binary Tree Level Order Traversal II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/binary-tree-level-order-traversal-ii/">Binary Tree Level Order Traversal
II</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">bottom</span><span class="o">-</span><span class="vg">up</span><span class="w"> </span><span class="vg">level</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">nodes</span><span class="c1">&#39; values. (ie, from left to right, level by level from leaf to root).</span>

<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="p">{</span><span class="il">3</span><span class="p">,</span><span class="il">9</span><span class="p">,</span><span class="il">20</span><span class="p">,</span><span class="err">#</span><span class="p">,</span><span class="err">#</span><span class="p">,</span><span class="il">15</span><span class="p">,</span><span class="il">7</span><span class="p">},</span>
<span class="w">    </span><span class="il">3</span>
<span class="w">   </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">  </span><span class="il">9</span><span class="w">  </span><span class="il">20</span>
<span class="w">    </span><span class="o">/</span><span class="w">  </span><span class="o">\</span>
<span class="w">   </span><span class="il">15</span><span class="w">   </span><span class="il">7</span>
<span class="vg">return</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">bottom</span><span class="o">-</span><span class="vg">up</span><span class="w"> </span><span class="vg">level</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="nl">as:</span>
<span class="p">[</span>
<span class="w">  </span><span class="p">[</span><span class="il">15</span><span class="p">,</span><span class="il">7</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">9</span><span class="p">,</span><span class="il">20</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">3</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
<p>解题思路：</p>

<p>跟前一题<a href="#Binary-Tree-Level-Order-Traversal">Binary Tree Level Order Traversal</a>唯一的区别就是这个将最后结果reverse一下。
这里就只列了其中一种代码了。</p>

<h3>常规方法, 两个queue交替</h3>

<p>参见<a href="#Binary-Tree-Level-Order-Traversal">Binary Tree Level Order Traversal</a>。</p>

<h3>单queue+隔板</h3>

<p>前面<a href="#Word-Ladder-Ii">word ladder ii</a>就提到过bfs，用隔板将各层之间隔离出来。只用一个queue就能知道某层是否已经遍历完毕。</p>
<div class="highlight"><pre>     <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">levelOrderBottom</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">queue</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">q</span><span class="p">;</span>
        <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">q</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
            <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">level</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">()</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">();</span> <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                <span class="n">level</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">level</span><span class="p">);</span>
            <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span><span class="c1">//pop NULL</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">result</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>递归</h3>

<p>参见<a href="#Binary-Tree-Level-Order-Traversal">Binary Tree Level Order Traversal</a>。</p>

<p><span id="Binary-Tree-Maximum-Path-Sum"></span></p>

<h2>Binary Tree Maximum Path Sum</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/binary-tree-maximum-path-sum/">Binary Tree Maximum Path Sum</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">sum</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">start</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">end</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">any</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">tree</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">below</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span>
<span class="w">  </span><span class="il">1</span>
<span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="nl">2</span><span class="w">   </span><span class="il">3</span>
<span class="vg">Return</span><span class="w"> </span><span class="il">6</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>path路径能以任意节点开头或结尾。注意maxPathSum(root) != max{ maxPathSum(root.left), maxPathSum(root.right), maxPathSum(root.left) + maxPathSum(root.right) + root.val }， 右/左 子树的最大结果很有可能不能跟当前节点连在一起。</p>
<div class="highlight"><pre>    <span class="c1">// ended/started with root, the max path</span>
    <span class="kt">int</span> <span class="nf">subMax</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">global_max</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">l_max</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">r_max</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">l_max</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">subMax</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">global_max</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">//if 0, not choose left child</span>
        <span class="n">r_max</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">subMax</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">global_max</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">max_</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">+</span> <span class="n">l_max</span> <span class="o">+</span> <span class="n">r_max</span><span class="p">;</span> <span class="c1">//global_max: connected current node</span>
        <span class="k">if</span><span class="p">(</span><span class="n">global_max</span> <span class="o">&lt;</span> <span class="n">max_</span><span class="p">)</span>
            <span class="n">global_max</span> <span class="o">=</span> <span class="n">max_</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">l_max</span><span class="p">,</span> <span class="n">r_max</span><span class="p">)</span> <span class="o">+</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">//Attention, for the max(root.right) may not connected with root</span>
    <span class="c1">//maxPathSum(root) != max{ maxPathSum(root.left), maxPathSum(root.right), maxPathSum(root.left) + maxPathSum(root.right) + root.val }</span>

    <span class="kt">int</span> <span class="nf">maxPathSum</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">global_max</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
        <span class="n">subMax</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">global_max</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">global_max</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Binary-Tree-Postorder-Traversal"></span></p>

<h2>Binary Tree Postorder Traversal</h2>

<p>题目来源： <a href="https://oj.leetcode.com/problems/binary-tree-postorder-traversal/">Binary Tree Postorder Traversal</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">postorder</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">nodes</span><span class="c1">&#39; values.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="p">{</span><span class="il">1</span><span class="p">,</span><span class="err">#</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">},</span>
<span class="w">   </span><span class="il">1</span>
<span class="w">    </span><span class="o">\</span>
<span class="w">     </span><span class="il">2</span>
<span class="w">    </span><span class="o">/</span>
<span class="w">   </span><span class="il">3</span>
<span class="vg">return</span><span class="w"> </span><span class="p">[</span><span class="il">3</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">]</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">Recursive</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">trivial</span><span class="p">,</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">iteratively</span><span class="o">?</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>下文用了5种方法实现了对二叉树进行后序遍历。</p>

<h3>思路一: 直接递归</h3>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">postRecursion</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">postRecursion</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">postRecursion</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
        <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">postorderTraversal</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">postRecursion</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>思路二: 非递归. 仿造先序,因为先序的非递归很好写.</h3>

<p>(来自寝室哥们ZZ大神的思路)</p>
<div class="highlight"><pre><span class="err">先序</span><span class="o">:</span><span class="w"> </span><span class="err">`中左右`</span><span class="w"> </span>
<span class="err">后序</span><span class="o">:</span><span class="w"> </span><span class="err">`左右中`</span><span class="w"> </span>
</pre></div>
<p>发现 先序.reverse = <code>右左中</code> 将<code>右左</code>交换就得到<code>左右中</code>.
即将原来的先序变通下就有了下面的算法.</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">postFakePre</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">stacks</span><span class="p">;</span>
        <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span> <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="c1">//pre: push right then left, </span>
            <span class="c1">//fake pre: push left, then right</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">result</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>思路三：传统方法</h3>

<p>用一个指针last记录上一次访问的节点来区分右孩纸是否已经访问过了该回归到父节点。代码如下</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">postNormal</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">stacks</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">last</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">*</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span><span class="c1">//go to left most</span>
            <span class="p">{</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">cur</span><span class="p">);</span>
                <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="c1">//leaf node</span>
            <span class="p">{</span>
                <span class="k">auto</span> <span class="n">peak</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="n">peak</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">peak</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="n">last</span><span class="p">)</span> <span class="c1">// right child has not been visited</span>
                <span class="p">{</span>
                    <span class="n">cur</span> <span class="o">=</span> <span class="n">peak</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">peak</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
                    <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">last</span> <span class="o">=</span> <span class="n">peak</span><span class="p">;</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> 
                        <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>思路四：改进的传统方法</h3>

<p>下面的方法来自网络(但忘了具体出处了). 比较好理解。</p>

<blockquote>
<div class="highlight"><pre><span class="err">要保证根结点在左孩子和右孩子访问之后才能访问，因此对于任一结点</span><span class="vg">P</span><span class="err">，先将其入栈。</span>
<span class="w">    </span><span class="err">如果</span><span class="vg">P</span><span class="err">不存在左孩子和右孩子，则可以直接访问它；或者</span><span class="vg">P</span><span class="err">存在左孩子或者右孩子，但是其左孩子和右孩子都已被访问过了，则同样可以直接访问该结点。</span>
<span class="w">    </span><span class="err">若非上述两种情况，则将</span><span class="vg">P</span><span class="err">的右孩子和左孩子依次入栈，这样就保证了每次取栈顶元素的时候，左孩子在右孩子前面被访问，左孩子和右孩子都在根结点前面被访问。</span>
</pre></div></blockquote>

<p>代码如下:</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">postNormalBetter</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">stacks</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">last</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nb">NULL</span> <span class="o">==</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">&amp;&amp;</span> <span class="nb">NULL</span> <span class="o">==</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="c1">//is leaf node or</span>
                <span class="o">||</span> <span class="p">(</span><span class="n">last</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">last</span> <span class="o">==</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">||</span> <span class="n">last</span> <span class="o">==</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span> <span class="p">)</span><span class="c1">// children have been visited</span>
                <span class="p">{</span>
                    <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
                    <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">last</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="k">else</span><span class="c1">//has children, push right then left</span>
            <span class="p">{</span> 
                <span class="k">if</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
                    <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span> 
                <span class="k">if</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span>
                    <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>思路五：Morris遍历</h3>

<p>以上都用了<code>O(n)</code>的时间+<code>O(n)</code>的空间.
还有就是传说中的利用了线索二叉树<code>O(1)</code>的空间的<code>Morris遍历算法</code>.
主要就是利用了叶子节点的孩纸指针, 指向后继节点记录回退的位置。
<a href="http://www.cnblogs.com/AnnieKim/archive/2013/06/15/MorrisTraversal.html">这篇文章</a>讲得清晰，我就不重复了。
将后续遍历的算法copy过来.</p>

<blockquote>
<div class="highlight"><pre><span class="err">后序遍历稍显复杂，需要建立一个临时节点</span><span class="vg">dump</span><span class="err">，令其左孩子是</span><span class="vg">root</span><span class="err">。并且还需要一个子过程，就是倒序输出某两个节点之间路径上的各个节点。</span>
<span class="err">步骤：</span>
<span class="err">当前节点设置为临时节点</span><span class="vg">dump</span><span class="err">。</span>
<span class="nl">1</span><span class="o">.</span><span class="w"> </span><span class="err">如果当前节点的左孩子为空，则将其右孩子作为当前节点。</span>
<span class="nl">2</span><span class="o">.</span><span class="w"> </span><span class="err">如果当前节点的左孩子不为空，在当前节点的左子树中找到当前节点在中序遍历下的前驱节点。</span>
<span class="w">   </span><span class="vg">a</span><span class="p">)</span><span class="w"> </span><span class="err">如果前驱节点的右孩子为空，将它的右孩子设置为当前节点。当前节点更新为当前节点的左孩子。</span>
<span class="w">   </span><span class="vg">b</span><span class="p">)</span><span class="w"> </span><span class="err">如果前驱节点的右孩子为当前节点，将它的右孩子重新设为空。倒序输出从当前节点的左孩子到该前驱节点这条路径上的所有节点。当前节点更新为当前节点的右孩子。</span>
<span class="nl">3</span><span class="o">.</span><span class="w"> </span><span class="err">重复以上</span><span class="il">1</span><span class="err">、</span><span class="il">2</span><span class="err">直到当前节点为空。</span>
</pre></div></blockquote>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">reverse</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">from</span><span class="p">,</span> <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">to</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">from</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">from</span> <span class="o">==</span> <span class="n">to</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="n">from</span> <span class="o">=</span> <span class="n">from</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">path</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">postMorris</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">TreeNode</span> <span class="n">dump</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">dump</span><span class="p">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">cur</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dump</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">NULL</span> <span class="o">==</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="c1">//1</span>
                <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="k">else</span><span class="c1">//2</span>
            <span class="p">{</span>
                <span class="k">auto</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span> <span class="c1">//pre: left child&#39;s right most</span>
                <span class="k">while</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="n">cur</span><span class="p">)</span>
                    <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span><span class="c1">//2.a</span>
                <span class="p">{</span>
                    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
                <span class="p">}</span><span class="k">else</span> <span class="c1">// 2.b</span>
                <span class="p">{</span>
                    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
                    <span class="k">auto</span> <span class="n">path</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">pre</span><span class="p">);</span>
                    <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">path</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">back_insert</span><span class="p">(</span><span class="n">result</span><span class="p">));</span>
                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Binary-Tree-Preorder-Traversal"></span></p>

<h2>Binary Tree Preorder Traversal</h2>

<p>题目来源： <a href="https://oj.leetcode.com/problems/binary-tree-preorder-traversal/">Binary Tree Preorder Traversal</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">preorder</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">nodes</span><span class="c1">&#39; values.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="p">{</span><span class="il">1</span><span class="p">,</span><span class="err">#</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">},</span>
<span class="w">   </span><span class="il">1</span>
<span class="w">    </span><span class="o">\</span>
<span class="w">     </span><span class="il">2</span>
<span class="w">    </span><span class="o">/</span>
<span class="w">   </span><span class="il">3</span>
<span class="vg">return</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">]</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">Recursive</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">trivial</span><span class="p">,</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">iteratively</span><span class="o">?</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>思路一: 直接递归(略)</h3>

<h3>思路二: 用stack.</h3>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">preNormal</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">stacks</span><span class="p">;</span>
        <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span> <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>思路三： Morris遍历. <code>O(1)</code>空间 + <code>O(n)</code>时间</h3>

<p>利用线索二叉树, 利用叶子节点的空指针指向前驱后继来记住状态。算法仍参考<a href="http://www.cnblogs.com/AnnieKim/archive/2013/06/15/MorrisTraversal.html">Morris Traversal</a>，里面讲了详细的案例。</p>

<p>具体算法如下:</p>
<div class="highlight"><pre><span class="err">步骤：</span>
<span class="nl">1</span><span class="o">.</span><span class="w"> </span><span class="err">如果当前节点的左孩子为空，则输出当前节点并将其右孩子作为当前节点。</span>
<span class="nl">2</span><span class="o">.</span><span class="w"> </span><span class="err">如果当前节点的左孩子不为空，在当前节点的左子树中找到当前节点在中序遍历下的前驱节点。</span>
<span class="w">   </span><span class="vg">a</span><span class="p">)</span><span class="err">如果前驱节点的右孩子为空，将它的右孩子设置为当前节点。输出当前节点（</span><span class="o">**</span><span class="err">在这里输出，这是与中序遍历唯一一点不同</span><span class="o">**</span><span class="err">）。当前节点更新为当前节点的左孩子。</span>
<span class="w">   </span><span class="vg">b</span><span class="p">)</span><span class="err">如果前驱节点的右孩子为当前节点，将它的右孩子重新设为空。当前节点更新为当前节点的右孩子。</span>
<span class="nl">3</span><span class="o">.</span><span class="w"> </span><span class="err">重复以上</span><span class="il">1</span><span class="err">、</span><span class="il">2</span><span class="err">直到当前节点为空。</span>
</pre></div><div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">preMorris</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
                <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span>
            <span class="p">{</span>
                <span class="k">auto</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
                <span class="k">while</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="n">cur</span><span class="p">)</span> 
                    <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span><span class="c1">//2.a</span>
                <span class="p">{</span>
                    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
                    <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
                <span class="p">}</span><span class="k">else</span> <span class="c1">// 2.b</span>
                <span class="p">{</span>
                    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span><span class="c1">//reset</span>
                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Binary-Tree-Zigzag-Level-Order-Traversal"></span></p>

<h2>Binary Tree Zigzag Level Order Traversal</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/binary-tree-zigzag-level-order-traversal/">Binary Tree Zigzag Level Order Traversal
II</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">zigzag</span><span class="w"> </span><span class="vg">level</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">nodes</span><span class="c1">&#39; values. (ie, from left to right, then right to left for the next level and alternate between).</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="p">{</span><span class="il">3</span><span class="p">,</span><span class="il">9</span><span class="p">,</span><span class="il">20</span><span class="p">,</span><span class="err">#</span><span class="p">,</span><span class="err">#</span><span class="p">,</span><span class="il">15</span><span class="p">,</span><span class="il">7</span><span class="p">},</span>
<span class="w">    </span><span class="il">3</span>
<span class="w">   </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">  </span><span class="il">9</span><span class="w">  </span><span class="il">20</span>
<span class="w">    </span><span class="o">/</span><span class="w">  </span><span class="o">\</span>
<span class="w">   </span><span class="il">15</span><span class="w">   </span><span class="il">7</span>
<span class="vg">return</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">zigzag</span><span class="w"> </span><span class="vg">level</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="nl">as:</span>
<span class="p">[</span>
<span class="w">  </span><span class="p">[</span><span class="il">3</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">20</span><span class="p">,</span><span class="il">9</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">15</span><span class="p">,</span><span class="il">7</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
<p>解题思路：</p>

<p>跟前面的题<a href="#Binary-Tree-Level-Order-Traversal">Binary Tree Level Order Traversal</a> 以及<a href="./binary-tree-level-order-traversal-ii.html">Binary Tree Level Order Traversal II</a>。 
区别就是这个将第偶数层的结果reverse一下。
这里就只列了其中一种代码了。</p>

<h3>常规方法, 两个queue交替</h3>

<p>参见<a href="#Binary-Tree-Level-Order-Traversal">Binary Tree Level Order Traversal</a>。</p>

<h3>单queue+隔板</h3>

<p>前面<a href="#Word-Ladder-Ii">word ladder ii</a>就提到过bfs，用隔板将各层之间隔离出来。只用一个queue就能知道某层是否已经遍历完毕。</p>
<div class="highlight"><pre>     <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">zigzagLevelOrder</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">queue</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">q</span><span class="p">;</span>
        <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">q</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
            <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">level</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">()</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">();</span> <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                <span class="n">level</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">++</span> <span class="o">&amp;</span> <span class="mh">0x1</span><span class="p">)</span>
                <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">level</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">level</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">level</span><span class="p">);</span>
            <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span><span class="c1">//pop NULL</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>递归</h3>

<p>参见<a href="#Binary-Tree-Level-Order-Traversal">Binary Tree Level Order Traversal</a>。</p>

<p><span id="Construct-Binary-Tree-from-Inorder-and-Postorder-Traversal"></span></p>

<h2>Construct Binary Tree from Inorder and Postorder Traversal</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/construct-binary-tree-from-inorder-and-postorder-traversal/">Construct Binary Tree from Inorder and Postorder Traversal</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">inorder</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">postorder</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">construct</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">duplicates</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">exist</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">tree</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>仍跟上题一样<a href="#Construct-Binary-Tree-From-Preorder-And-Inorder-Traversal">construct-binary-tree-from-preorder-and-inorder-traversal</a>,同样假设输入合理。
若输入不合法，可参考<a href="http://tanglei.me/data%20structure/dsa-rebuild-tree.html">树重建</a>进行处理。</p>
<div class="highlight"><pre><span class="err">中：左</span><span class="w">  </span><span class="err">中</span><span class="w">  </span><span class="err">右</span>
<span class="err">后：左</span><span class="w">  </span><span class="err">右</span><span class="w">  </span><span class="err">中</span>
<span class="err">在中序中查找后序的最后一个得</span><span class="vg">index</span><span class="err">为</span><span class="vg">left</span>
<span class="vg">left_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">left</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">in_start</span>
<span class="err">对左子树而言</span><span class="o">:</span><span class="w"> </span>
<span class="err">中序左</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="vg">in_start</span><span class="p">,</span><span class="w"> </span><span class="vg">left</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span><span class="p">]</span>
<span class="err">后序左</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="vg">post_start</span><span class="p">,</span><span class="w"> </span><span class="vg">post_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">left_len</span><span class="w"> </span><span class="il">-1</span><span class="p">]</span>
<span class="err">同理</span><span class="w"> </span><span class="err">右子树</span>
<span class="err">中序右</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="vg">left</span><span class="o">+</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">in_end</span><span class="p">]</span>
<span class="err">后序右</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="vg">post_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">left_len</span><span class="p">,</span><span class="w"> </span><span class="vg">post_end</span><span class="il">-1</span><span class="p">]</span>
</pre></div><div class="highlight"><pre>    <span class="n">TreeNode</span> <span class="o">*</span> <span class="nf">buildRecursion</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">postorder</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">inorder</span><span class="p">,</span>
                        <span class="kt">int</span> <span class="n">postStart</span><span class="p">,</span> <span class="kt">int</span> <span class="n">postEnd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">inStart</span><span class="p">,</span> <span class="kt">int</span> <span class="n">inEnd</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">postStart</span> <span class="o">&gt;</span> <span class="n">postEnd</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">postEnd</span> <span class="o">==</span> <span class="n">postStart</span><span class="p">)</span> 
                <span class="k">return</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">postorder</span><span class="p">[</span><span class="n">postStart</span><span class="p">]);</span>
            <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">postorder</span><span class="p">[</span><span class="n">postEnd</span><span class="p">]);</span>
            <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">inStart</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">inorder</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">!=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="c1">//assuming can get, or else should check if index &gt; inEnd</span>
                <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">leftLen</span> <span class="o">=</span> <span class="n">index</span> <span class="o">-</span> <span class="n">inStart</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">rightLen</span> <span class="o">=</span> <span class="n">inEnd</span> <span class="o">-</span> <span class="n">index</span><span class="p">;</span>
            <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">buildRecursion</span><span class="p">(</span><span class="n">postorder</span><span class="p">,</span> <span class="n">inorder</span><span class="p">,</span> <span class="n">postStart</span><span class="p">,</span> <span class="n">postStart</span><span class="o">+</span><span class="n">leftLen</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">inStart</span><span class="p">,</span> <span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">buildRecursion</span><span class="p">(</span><span class="n">postorder</span><span class="p">,</span> <span class="n">inorder</span><span class="p">,</span> <span class="n">postStart</span><span class="o">+</span><span class="n">leftLen</span><span class="p">,</span> <span class="n">postEnd</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">inEnd</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">root</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="n">TreeNode</span> <span class="o">*</span><span class="nf">buildTree</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">inorder</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">postorder</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">return</span>    <span class="n">buildRecursion</span><span class="p">(</span><span class="n">postorder</span><span class="p">,</span> <span class="n">inorder</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">postorder</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">inorder</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> 
    <span class="p">}</span>
</pre></div>
<p><span id="Construct-Binary-Tree-from-Preorder-and-Inorder-Traversal"></span></p>

<h2>Construct Binary Tree from Preorder and Inorder Traversal</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/">Construct Binary Tree from Preorder and Inorder Traversal</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">preorder</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">inorder</span><span class="w"> </span><span class="vg">traversal</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">construct</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">duplicates</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">exist</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">tree</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>递归比较好～但注意下标别搞错.
这里假设输入一定可以构造合理的二叉树。所以没有考虑一些异常情况。这里<a href="http://tanglei.me/data%20structure/dsa-rebuild-tree.html">树重建</a>有考虑不能成功构造出二叉树的情况。</p>
<div class="highlight"><pre><span class="err">先序：中</span><span class="w">     </span><span class="err">左</span><span class="w">     </span><span class="err">右</span>
<span class="err">中序：左</span><span class="w">     </span><span class="err">中</span><span class="w">     </span><span class="err">右</span>
<span class="err">先序左：</span><span class="p">[</span><span class="vg">pre_start</span><span class="o">+</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">pre_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">left_len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span><span class="p">]</span>
<span class="err">中序左：</span><span class="p">[</span><span class="vg">in_start</span><span class="p">,</span><span class="w"> </span><span class="vg">left</span><span class="il">-1</span><span class="p">]</span>

<span class="err">先序右：</span><span class="p">[</span><span class="vg">pre_start</span><span class="o">+</span><span class="vg">left_len</span><span class="o">+</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">pre_end</span><span class="p">]</span>
<span class="err">中序右：</span><span class="p">[</span><span class="vg">left</span><span class="o">+</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">in_end</span><span class="p">]</span>
</pre></div><div class="highlight"><pre>    <span class="c1">//assuming always can get right result</span>
    <span class="n">TreeNode</span> <span class="o">*</span> <span class="nf">buildRecursion</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">preorder</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">inorder</span><span class="p">,</span>
                            <span class="kt">int</span> <span class="n">preStart</span><span class="p">,</span> <span class="kt">int</span> <span class="n">preEnd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">inStart</span><span class="p">,</span> <span class="kt">int</span> <span class="n">inEnd</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">preStart</span> <span class="o">&gt;</span> <span class="n">preEnd</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">preEnd</span> <span class="o">==</span> <span class="n">preStart</span><span class="p">)</span> <span class="c1">// assert(inStart == inEnd)</span>
            <span class="k">return</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">preorder</span><span class="p">[</span><span class="n">preStart</span><span class="p">]);</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">preorder</span><span class="p">[</span><span class="n">preStart</span><span class="p">]);</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">inStart</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">inorder</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">!=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="c1">//assuming can get, or else should check if index &gt; inEnd </span>
            <span class="n">index</span><span class="o">++</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">leftLen</span> <span class="o">=</span> <span class="n">index</span> <span class="o">-</span> <span class="n">inStart</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">rightLen</span> <span class="o">=</span> <span class="n">inEnd</span> <span class="o">-</span> <span class="n">index</span><span class="p">;</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">buildRecursion</span><span class="p">(</span><span class="n">preorder</span><span class="p">,</span> <span class="n">inorder</span><span class="p">,</span> <span class="n">preStart</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">preStart</span><span class="o">+</span><span class="n">leftLen</span><span class="p">,</span> <span class="n">inStart</span><span class="p">,</span> <span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">buildRecursion</span><span class="p">(</span><span class="n">preorder</span><span class="p">,</span> <span class="n">inorder</span><span class="p">,</span> <span class="n">preStart</span><span class="o">+</span><span class="n">leftLen</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">preEnd</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">inEnd</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">root</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">TreeNode</span> <span class="o">*</span><span class="nf">buildTree</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">preorder</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">inorder</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">buildRecursion</span><span class="p">(</span><span class="n">preorder</span><span class="p">,</span> <span class="n">inorder</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">preorder</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">inorder</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Convert-Sorted-List-to-Binary-Search-Tree"></span></p>

<h2>Convert Sorted List to Binary Search Tree</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/convert-sorted-list-to-binary-search-tree/">Convert Sorted List to Binary Search Tree</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">singly</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">ascending</span><span class="w"> </span><span class="vg">order</span><span class="p">,</span><span class="w"> </span><span class="vg">convert</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">height</span><span class="w"> </span><span class="vg">balanced</span><span class="w"> </span><span class="vg">BST</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>tricky 方法, 另外取O(n)空间</h3>

<p>偷懒方法，另外取另外取O(n)空间把list的数据取出来放入数组，然后跟<a href="#Convert-Sorted-Array-To-Binary-Search-Tree"></a>题目一样用数组的方式去做。
代码就略过了。
虽然不是出题者的本意～ 但...... 你咬我呀.</p>

<h3>O(nlogn)时间</h3>

<p>每次用O(len/2)的时间去把中间的节点找出来。然后跟数组一样的方式解决。时间复杂度为O(nlogn).中途找mid不跟数组一样O(1).</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="o">++</span><span class="n">len</span><span class="p">;</span> 
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">len</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">TreeNode</span> <span class="o">*</span> <span class="nf">convert</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">len</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">len</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">--</span><span class="n">i</span><span class="p">)</span>
            <span class="n">pre</span><span class="o">=</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">leftlen</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="kt">int</span> <span class="n">rightlen</span> <span class="o">=</span> <span class="n">len</span><span class="o">-</span><span class="n">mid</span><span class="p">;</span><span class="c1">//even</span>
        <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&amp;</span> <span class="mh">0x1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">leftlen</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span>
            <span class="n">rightlen</span> <span class="o">=</span> <span class="n">len</span><span class="o">-</span><span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>   
        <span class="k">auto</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">leftlen</span><span class="p">);</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">rightlen</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">TreeNode</span> <span class="o">*</span><span class="nf">sortedListToBST</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>从底至上构造Tree, 递归(得忽略递归调用的时间/空间消耗)调用，递归中传同一个链表，链表不停往前走，通过下标关系来控制左右子树。进入递归时链表指向头节点，结束递归时，链表指向尾节点的next。</p>

<p>下面代码中，每次递归调用开始时，节点指针都指向区间第一个，结束时节点的指针指向<em>区间末尾的后一个</em>。每次递归调用时，分成左右两部分，左边构造完时，正好指针指向mid，创建一下root，继续构造右部分子树。<a href="http://www.cnblogs.com/lautsie/p/3346581.html">ref</a></p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="n">head</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="o">++</span><span class="n">len</span><span class="p">;</span> 
            <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">len</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">TreeNode</span> <span class="o">*</span> <span class="nf">convert</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="o">&amp;</span><span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span> 
            <span class="n">head</span><span class="o">=</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">left</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="p">((</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
            <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">root</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">TreeNode</span> <span class="o">*</span><span class="nf">sortedListToBST</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">len</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>或许 convert这样写更简洁。</p>
<div class="highlight"><pre>    <span class="n">TreeNode</span> <span class="o">*</span> <span class="nf">convert</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span> <span class="o">&amp;</span><span class="n">head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">&gt;</span> <span class="n">end</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="p">((</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">left</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span><span class="p">;</span>
        <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">root</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Flatten-Binary-Tree-to-Linked-List"></span></p>

<h2>Flatten Binary Tree to Linked List</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/flatten-binary-tree-to-linked-list/">Flatten Binary Tree to Linked List </a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">flatten</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">in</span><span class="o">-</span><span class="vg">place</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span>

<span class="w">         </span><span class="il">1</span>
<span class="w">        </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">       </span><span class="il">2</span><span class="w">   </span><span class="il">5</span>
<span class="w">      </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">   </span><span class="o">\</span>
<span class="w">     </span><span class="il">3</span><span class="w">   </span><span class="il">4</span><span class="w">   </span><span class="il">6</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">flattened</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">look</span><span class="w"> </span><span class="nl">like:</span>
<span class="w">   </span><span class="il">1</span>
<span class="w">    </span><span class="o">\</span>
<span class="w">     </span><span class="il">2</span>
<span class="w">      </span><span class="o">\</span>
<span class="w">       </span><span class="il">3</span>
<span class="w">        </span><span class="o">\</span>
<span class="w">         </span><span class="il">4</span>
<span class="w">          </span><span class="o">\</span>
<span class="w">           </span><span class="il">5</span>
<span class="w">            </span><span class="o">\</span>
<span class="w">             </span><span class="il">6</span>
<span class="nl">Hints:</span><span class="w"> </span><span class="vg">If</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">notice</span><span class="w"> </span><span class="vg">carefully</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">flattened</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">node</span><span class="c1">&#39;s right child points to the next node of a pre-order traversal.</span>
</pre></div>
<p>解题思路：</p>

<p>先序遍历，可以遍历完后再连接，也可以在遍历过程中连接。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">flatten</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">prefs</span><span class="p">;</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">stacks</span><span class="p">;</span>
        <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="n">prefs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">prefs</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">prefs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
            <span class="n">prefs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">prefs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<p>或者</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">flatten</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">stacks</span><span class="p">;</span>
        <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
        <span class="n">TreeNode</span> <span class="n">tmp</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">last</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">tmp</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">node</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="n">last</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
            <span class="n">last</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
            <span class="n">last</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<p>或者用其他binary tree pre traverse 的方法都行。</p>

<p><span id="Maximum-Depth-of-Binary-Tree"></span></p>

<h2>Maximum Depth of Binary Tree</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/maximum-depth-of-binary-tree/">Maximum Depth of Binary Tree </a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">depth</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">depth</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">along</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">root</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">down</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">farthest</span><span class="w"> </span><span class="vg">leaf</span><span class="w"> </span><span class="vg">node</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>跟<a href="https://oj.leetcode.com/problems/minimum-depth-of-binary-tree/">Minimum Depth of Binary Tree</a>思路一样，这个更简答。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">depth</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="n">left</span> <span class="o">=</span> <span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="n">right</span> <span class="o">=</span> <span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">maxDepth</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">depth</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Minimum-Depth-of-Binary-Tree"></span></p>

<h2>Minimum Depth of Binary Tree</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/minimum-depth-of-binary-tree/">Minimum Depth of Binary Tree</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">depth</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">depth</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">along</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">shortest</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">root</span>
<span class="vg">node</span><span class="w"> </span><span class="vg">down</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">nearest</span><span class="w"> </span><span class="vg">leaf</span><span class="w"> </span><span class="vg">node</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>穷举所有路径即可。 </p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">depthRecursion</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="n">curDepth</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">minDepth</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> 
        <span class="p">{</span>
            <span class="n">minDepth</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">minDepth</span><span class="p">,</span> <span class="n">curDepth</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="n">depthRecursion</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">curDepth</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">minDepth</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="n">depthRecursion</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">curDepth</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">minDepth</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">minDepth</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
        <span class="n">depthRecursion</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>或者这样，递归时把是否有兄弟节点传进去。<a href="https://github.com/soulmachine/leetcode">ref</a>.</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">minDepth2</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">hasBrother</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">hasBrother</span> <span class="o">?</span> <span class="nl">INT_MAX</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">minDepth2</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">),</span> 
                        <span class="n">minDepth2</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">))</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">minDepth</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">minDepth2</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Path-Sum"></span></p>

<h2>Path Sum</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/path-sum/">Path Sum</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">sum</span><span class="p">,</span><span class="w"> </span><span class="vg">determine</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">root</span><span class="o">-</span><span class="vg">to</span><span class="o">-</span><span class="vg">leaf</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">adding</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">values</span><span class="w"> </span><span class="vg">along</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">equals</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">sum</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">below</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">22</span><span class="p">,</span>
<span class="w">              </span><span class="il">5</span>
<span class="w">             </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">            </span><span class="il">4</span><span class="w">   </span><span class="il">8</span>
<span class="w">           </span><span class="o">/</span><span class="w">   </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">          </span><span class="il">11</span><span class="w">  </span><span class="il">13</span><span class="w">  </span><span class="il">4</span>
<span class="w">         </span><span class="o">/</span><span class="w">  </span><span class="o">\</span><span class="w">      </span><span class="o">\</span>
<span class="w">        </span><span class="il">7</span><span class="w">    </span><span class="il">2</span><span class="w">      </span><span class="il">1</span>
<span class="vg">return</span><span class="w"> </span><span class="vg">true</span><span class="p">,</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">exist</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">root</span><span class="o">-</span><span class="vg">to</span><span class="o">-</span><span class="vg">leaf</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="il">5</span><span class="o">-&gt;</span><span class="il">4</span><span class="o">-&gt;</span><span class="il">11</span><span class="o">-&gt;</span><span class="il">2</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">22</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>递归最简单了。</p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">solveRecusive</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span> <span class="o">==</span> <span class="n">sum</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">&amp;&amp;</span> <span class="n">solveRecusive</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">sum</span><span class="o">-</span><span class="n">v</span><span class="p">))</span> <span class="o">||</span>
           <span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">&amp;&amp;</span> <span class="n">solveRecusive</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">sum</span><span class="o">-</span><span class="n">v</span><span class="p">));</span>
<span class="p">}</span>
<span class="kt">bool</span> <span class="nf">hasPathSum</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span><span class="c1">//test case rule</span>
    <span class="k">return</span> <span class="n">solveRecusive</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p><span id="Path-Sum-II"></span></p>

<h2>Path Sum II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/path-sum-ii/">Path Sum II </a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">sum</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">root</span><span class="o">-</span><span class="vg">to</span><span class="o">-</span><span class="vg">leaf</span><span class="w"> </span><span class="vg">paths</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">path</span><span class="c1">&#39;s sum equals the given sum.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">below</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">22</span><span class="p">,</span>
<span class="w">              </span><span class="il">5</span>
<span class="w">             </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">            </span><span class="il">4</span><span class="w">   </span><span class="il">8</span>
<span class="w">           </span><span class="o">/</span><span class="w">   </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">          </span><span class="il">11</span><span class="w">  </span><span class="il">13</span><span class="w">  </span><span class="il">4</span>
<span class="w">         </span><span class="o">/</span><span class="w">  </span><span class="o">\</span><span class="w">    </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">        </span><span class="il">7</span><span class="w">    </span><span class="il">2</span><span class="w">  </span><span class="il">5</span><span class="w">   </span><span class="il">1</span>
<span class="vg">return</span>
<span class="p">[</span>
<span class="w">   </span><span class="p">[</span><span class="il">5</span><span class="p">,</span><span class="il">4</span><span class="p">,</span><span class="il">11</span><span class="p">,</span><span class="il">2</span><span class="p">],</span>
<span class="w">   </span><span class="p">[</span><span class="il">5</span><span class="p">,</span><span class="il">8</span><span class="p">,</span><span class="il">4</span><span class="p">,</span><span class="il">5</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
<p>解题思路：</p>

<p>跟<a href="#Path-Sum">Path Sum</a>思路一样，不过这题把路径存起来。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">node</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span><span class="c1">// Attention 0</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">target</span> <span class="o">==</span> <span class="n">v</span><span class="p">)</span> 
            <span class="p">{</span>
                <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">v</span><span class="p">);</span> <span class="c1">//Attention 1</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">v</span><span class="p">);</span> <span class="c1">//Attention 1</span>
            <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">target</span> <span class="o">-</span> <span class="n">v</span><span class="p">);</span>
            <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">v</span><span class="p">);</span> <span class="c1">//Attention 1</span>
            <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">target</span> <span class="o">-</span> <span class="n">v</span><span class="p">);</span>
            <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">pathSum</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
        <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>注意别被code中的表象所迷惑，将<code>//Attention 1</code>的代码提取到<code>//Attention 0</code>处。 path先后push_back会反映到递归调用里面去的。</p>

<p>不然应该下面这样写。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">search2</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span><span class="c1">//cannot check if target is 0 then putinto result, for this result has been checked before invoke the recursion</span>
        <span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
        <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">target</span> <span class="o">==</span> <span class="n">v</span><span class="p">)</span> 
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">search2</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">target</span> <span class="o">-</span> <span class="n">v</span><span class="p">);</span>
        <span class="n">search2</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">target</span> <span class="o">-</span> <span class="n">v</span><span class="p">);</span>
        <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Populating-Next-Right-Pointers-in-Each-Node"></span></p>

<h2>Populating Next Right Pointers in Each Node</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/populating-next-right-pointers-in-each-node/">Populating Next Right Pointers in Each Node</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span>

<span class="vg">struct</span><span class="w"> </span><span class="vg">TreeLinkNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="vg">TreeLinkNode</span><span class="w"> </span><span class="o">*</span><span class="vg">left</span><span class="p">;</span>
<span class="w">  </span><span class="vg">TreeLinkNode</span><span class="w"> </span><span class="o">*</span><span class="vg">right</span><span class="p">;</span>
<span class="w">  </span><span class="vg">TreeLinkNode</span><span class="w"> </span><span class="o">*</span><span class="vg">next</span><span class="p">;</span>
<span class="p">}</span>
<span class="vg">Populate</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">next</span><span class="w"> </span><span class="vg">pointer</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">point</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">next</span><span class="w"> </span><span class="vg">right</span><span class="w"> </span><span class="vg">node</span><span class="o">.</span><span class="w"> </span><span class="vg">If</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">next</span><span class="w"> </span><span class="vg">right</span><span class="w"> </span><span class="vg">node</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">next</span><span class="w"> </span><span class="vg">pointer</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">NULL</span><span class="o">.</span>

<span class="vg">Initially</span><span class="p">,</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">next</span><span class="w"> </span><span class="vg">pointers</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">NULL</span><span class="o">.</span>

<span class="nl">Note:</span>

<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">use</span><span class="w"> </span><span class="vg">constant</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">space</span><span class="o">.</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">perfect</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">leaves</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">same</span><span class="w"> </span><span class="vg">level</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">every</span><span class="w"> </span><span class="vg">parent</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">children</span><span class="p">)</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="vg">perfect</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span>
<span class="w">         </span><span class="il">1</span>
<span class="w">       </span><span class="o">/</span><span class="w">  </span><span class="o">\</span>
<span class="w">      </span><span class="il">2</span><span class="w">    </span><span class="il">3</span>
<span class="w">     </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">  </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">    </span><span class="il">4</span><span class="w">  </span><span class="il">5</span><span class="w">  </span><span class="il">6</span><span class="w">  </span><span class="il">7</span>
<span class="vg">After</span><span class="w"> </span><span class="vg">calling</span><span class="w"> </span><span class="vg">your</span><span class="w"> </span><span class="vg">function</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">look</span><span class="w"> </span><span class="nl">like:</span>
<span class="w">         </span><span class="il">1</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">NULL</span>
<span class="w">       </span><span class="o">/</span><span class="w">  </span><span class="o">\</span>
<span class="w">      </span><span class="il">2</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">3</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">NULL</span>
<span class="w">     </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">  </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">    </span><span class="il">4</span><span class="o">-&gt;</span><span class="il">5</span><span class="o">-&gt;</span><span class="il">6</span><span class="o">-&gt;</span><span class="il">7</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">NULL</span>
</pre></div>
<p>解题思路：</p>

<p>1种方法是领取数组把每一层存起来，然后连接。不过非常数空间。
另外就是常数空间解法。</p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">connect</span><span class="p">(</span><span class="n">TreeLinkNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="k">while</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">auto</span> <span class="n">left</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
       <span class="k">while</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="c1">//go right</span>
       <span class="p">{</span>
           <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">&amp;&amp;</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
               <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
           <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">&amp;&amp;</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
               <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
           <span class="n">root</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
       <span class="p">}</span>
       <span class="n">root</span> <span class="o">=</span> <span class="n">left</span><span class="p">;</span><span class="c1">//go down</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>还有的写法就是 <a href="#Populating-Next-Right-Pointers-In-Each-Node-Ii">Populating Next Right Pointers in Each Node II</a>了，完全可以用于解这个题目。</p>

<p><span id="populating-next-right-pointers-in-each-node-ii"></span></p>

<h2>populating next right pointers in each node ii</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/populating-next-right-pointers-in-each-node-ii/">Populating Next Right Pointers in Each Node II</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Follow</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">problem</span><span class="w"> </span><span class="s2">&quot;Populating Next Right Pointers in Each Node&quot;</span><span class="o">.</span>
<span class="vg">What</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">any</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="o">?</span><span class="w"> </span><span class="vg">Would</span><span class="w"> </span><span class="vg">your</span><span class="w"> </span><span class="vg">previous</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">still</span><span class="w"> </span><span class="vg">work</span><span class="o">?</span>

<span class="nl">Note:</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">use</span><span class="w"> </span><span class="vg">constant</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">space</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span>
<span class="w">         </span><span class="il">1</span>
<span class="w">       </span><span class="o">/</span><span class="w">  </span><span class="o">\</span>
<span class="w">      </span><span class="il">2</span><span class="w">    </span><span class="il">3</span>
<span class="w">     </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">    </span><span class="o">\</span>
<span class="w">    </span><span class="il">4</span><span class="w">   </span><span class="il">5</span><span class="w">    </span><span class="il">7</span>
<span class="vg">After</span><span class="w"> </span><span class="vg">calling</span><span class="w"> </span><span class="vg">your</span><span class="w"> </span><span class="vg">function</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">look</span><span class="w"> </span><span class="nl">like:</span>
<span class="w">         </span><span class="il">1</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">NULL</span>
<span class="w">       </span><span class="o">/</span><span class="w">  </span><span class="o">\</span>
<span class="w">      </span><span class="il">2</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">3</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">NULL</span>
<span class="w">     </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">    </span><span class="o">\</span>
<span class="w">    </span><span class="il">4</span><span class="o">-&gt;</span><span class="w"> </span><span class="il">5</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">7</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">NULL</span>
</pre></div>
<p>解题思路：</p>

<p>跟 <a href="#Populating-Next-Right-Pointers-In-Each-Node">Populating Next Right Pointers in Each Node</a>思路一致，值得注意的是</p>

<ul>
<li>在填充下一层next时，当前层的next要找完。//Attention 0</li>
<li>往下走时，可能前面的节点没有孩纸节点，也要找完同一层的节点是否存在孩纸节点。//Attention 1</li>
</ul>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">connect</span><span class="p">(</span><span class="n">TreeLinkNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="k">while</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">auto</span> <span class="n">down</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
       <span class="k">if</span><span class="p">(</span><span class="nb">NULL</span> <span class="o">==</span> <span class="n">down</span><span class="p">)</span> <span class="n">down</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
       <span class="k">if</span><span class="p">(</span><span class="nb">NULL</span> <span class="o">==</span> <span class="n">down</span><span class="p">)</span> <span class="n">down</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span><span class="c1">////Attention 1: no child of root, but maybe the next(or next&#39;) node has children, although the same level</span>
       <span class="k">while</span><span class="p">(</span><span class="n">root</span><span class="p">)</span><span class="c1">//go right</span>
       <span class="p">{</span>
           <span class="k">auto</span> <span class="n">next</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span> <span class="c1">//go right to find next&#39;s children</span>
           <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span>
           <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
                   <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
               <span class="k">else</span><span class="p">{</span>
                   <span class="k">while</span> <span class="p">(</span><span class="n">next</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">next</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">))</span> <span class="c1">//Attention 0</span>
                       <span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
                   <span class="k">if</span><span class="p">(</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
                       <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">?</span> <span class="n">next</span><span class="o">-&gt;</span><span class="nl">right</span> <span class="p">:</span> <span class="n">next</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
               <span class="p">}</span>
           <span class="p">}</span>
           <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
           <span class="p">{</span>
               <span class="k">while</span> <span class="p">(</span><span class="n">next</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">next</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">))</span>
                   <span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
               <span class="k">if</span><span class="p">(</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
                   <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">?</span> <span class="n">next</span><span class="o">-&gt;</span><span class="nl">right</span> <span class="p">:</span> <span class="n">next</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
           <span class="p">}</span>
           <span class="n">root</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
       <span class="p">}</span>
       <span class="n">root</span> <span class="o">=</span> <span class="n">down</span><span class="p">;</span><span class="c1">//go down</span>
   <span class="p">}</span>    
<span class="p">}</span>
</pre></div>
<p>上面代码确实比较丑陋～  其实着眼于同一层之前通过pre来记录同一层的前一个节点的话，代码就好看得多。 <a href="https://github.com/soulmachine/leetcode">leetcode-cpp</a></p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">connect</span><span class="p">(</span><span class="n">TreeLinkNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">TreeLinkNode</span> <span class="o">*</span> <span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span><span class="c1">//next level</span>
        <span class="n">TreeLinkNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">root</span><span class="p">)</span><span class="c1">//go right</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="n">next</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">?</span> <span class="n">root</span><span class="o">-&gt;</span><span class="nl">left</span> <span class="p">:</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">pre</span><span class="p">)</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
                <span class="n">pre</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">pre</span><span class="p">)</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
                <span class="n">pre</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">root</span> <span class="o">=</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span><span class="c1">//goto next level</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p><span id="Recover-Binary-Search-Tree"></span></p>

<h2>Recover Binary Search Tree</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/recover-binary-search-tree/">Recover Binary Search Tree</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Two</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">search</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="p">(</span><span class="vg">BST</span><span class="p">)</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">swapped</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">mistake</span><span class="o">.</span>
<span class="vg">Recover</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">without</span><span class="w"> </span><span class="vg">changing</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">structure</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">A</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">O</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="w"> </span><span class="vg">space</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">pretty</span><span class="w"> </span><span class="vg">straight</span><span class="w"> </span><span class="vg">forward</span><span class="o">.</span><span class="w"> </span><span class="vg">Could</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">devise</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">constant</span><span class="w"> </span><span class="vg">space</span><span class="w"> </span><span class="vg">solution</span><span class="o">?</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>求得中序遍历结果,再两边向中间扫描</h3>

<p>O(2*n) 空间解法～
直接中序遍历，然后分别从前往后、从后往前找非升序、非降序的两个node，交换其值即可。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">inorder1</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="n">inorder1</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="n">inorder1</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">recoverTree1</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">inorder_result</span><span class="p">;</span>
        <span class="n">inorder1</span><span class="p">(</span><span class="n">inorder_result</span><span class="p">,</span> <span class="n">root</span><span class="p">);</span>
        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">firstWrong</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">*</span><span class="n">secondWrong</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;::</span><span class="n">iterator</span> <span class="n">it</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="n">it</span> <span class="o">=</span> <span class="n">inorder_result</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">inorder_result</span><span class="p">.</span><span class="n">end</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">((</span><span class="o">*</span><span class="n">it</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">it</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">firstWrong</span> <span class="o">=</span> <span class="o">*</span><span class="n">it</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it2</span> <span class="o">=</span> <span class="n">inorder_result</span><span class="p">.</span><span class="n">end</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">it2</span> <span class="o">!=</span> <span class="n">it</span><span class="p">;</span> <span class="n">it2</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">((</span><span class="o">*</span><span class="n">it2</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">it2</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">secondWrong</span> <span class="o">=</span> <span class="o">*</span><span class="n">it2</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">//swap</span>
        <span class="kt">int</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">firstWrong</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
        <span class="n">firstWrong</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">=</span> <span class="n">secondWrong</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
        <span class="n">secondWrong</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>中序遍历一边遍历，一边扫描。</h3>

<p>当两个节点都找到后，即可退出中序遍历流程。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">recoverTree</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">stacks</span><span class="p">;</span>
        <span class="n">TreeNode</span> <span class="n">tmp</span><span class="p">(</span><span class="n">INT_MIN</span><span class="p">);</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">last</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">tmp</span><span class="p">;</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">node1</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">*</span><span class="n">node2</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="p">);</span> 
                <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="k">break</span><span class="p">;</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="n">last</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&gt;=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">node1</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
                        <span class="p">{</span><span class="n">node1</span> <span class="o">=</span> <span class="n">last</span><span class="p">;</span> <span class="n">node2</span><span class="o">=</span><span class="n">node</span><span class="p">;}</span><span class="c1">//3,2</span>
                    <span class="k">else</span>
                        <span class="n">node2</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">node1</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">,</span> <span class="n">node2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>Morris遍历，常数空间。</h3>

<p>算法解释见<a href="#Binary-Tree-Inorder-Traversal">binary-tree-inorder-traversal</a>;</p>

<p>注意<em>找出两个node后还得让遍历走完～以避免之前的改动revert完毕</em>，否则可能会造成oj check时死循环(传入的树结构修改后不对).</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">recoverTree</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">node1</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">*</span><span class="n">node2</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
        <span class="n">TreeNode</span>  <span class="n">tmp</span><span class="p">(</span><span class="n">INT_MIN</span><span class="p">);</span> 
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">last</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">tmp</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">//visit node</span>
                <span class="k">if</span><span class="p">(</span><span class="n">last</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&gt;=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">node1</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
                        <span class="p">{</span><span class="n">node1</span> <span class="o">=</span> <span class="n">last</span><span class="p">;</span> <span class="n">node2</span> <span class="o">=</span> <span class="n">node</span><span class="p">;}</span>
                    <span class="k">else</span>
                        <span class="n">node2</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span><span class="c1">//can not break;</span>
                <span class="p">}</span> 
                <span class="n">last</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">pre</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
                <span class="k">while</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="n">node</span><span class="p">)</span>
                    <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
                    <span class="c1">//visit node</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">last</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&gt;=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">){</span>
                        <span class="k">if</span><span class="p">(</span><span class="n">node1</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
                            <span class="p">{</span><span class="n">node1</span> <span class="o">=</span> <span class="n">last</span><span class="p">;</span> <span class="n">node2</span> <span class="o">=</span> <span class="n">node</span><span class="p">;}</span>
                        <span class="k">else</span>
                            <span class="n">node2</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span><span class="c1">//can not break;</span>
                    <span class="p">}</span>
                    <span class="n">last</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">node1</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">,</span> <span class="n">node2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Same-Tree"></span></p>

<h2>Same Tree</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/same-tree/">Same Tree </a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">trees</span><span class="p">,</span><span class="w"> </span><span class="vg">write</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">check</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">they</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">equal</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">not</span><span class="o">.</span>
<span class="vg">Two</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">trees</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">considered</span><span class="w"> </span><span class="vg">equal</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">they</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">structurally</span><span class="w"> </span><span class="vg">identical</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">same</span><span class="w"> </span><span class="vg">value</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>思路跟上题<a href="#Symmetric-Tree">对称树</a>一样, 仍分递归和迭代两种方法。</p>

<h3>递归</h3>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isSameTreeRecursion</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="n">TreeNode</span> <span class="o">*</span><span class="n">q</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">q</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">q</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">!=</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">isSameTree</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">isSameTree</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">q</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>迭代</h3>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isSameTree</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="n">TreeNode</span> <span class="o">*</span><span class="n">q</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">stacks</span><span class="p">;</span>
        <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">q</span><span class="p">);</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">n1</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">auto</span> <span class="n">n2</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="n">n1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">n2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">n1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">n2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">n1</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">!=</span> <span class="n">n2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">n1</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
            <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">n2</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
            <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">n1</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">n2</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Sum-Root-to-Leaf-Numbers"></span></p>

<h2>Sum Root to Leaf Numbers</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/sum-root-to-leaf-numbers/">Sum Root to Leaf Numbers</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">containing</span><span class="w"> </span><span class="vg">digits</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="il">0-9</span><span class="w"> </span><span class="vg">only</span><span class="p">,</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">root</span><span class="o">-</span><span class="vg">to</span><span class="o">-</span><span class="vg">leaf</span><span class="w"> </span><span class="vg">path</span>
<span class="vg">could</span><span class="w"> </span><span class="vg">represent</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">number</span><span class="o">.</span>
<span class="vg">An</span><span class="w"> </span><span class="vg">example</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">root</span><span class="o">-</span><span class="vg">to</span><span class="o">-</span><span class="vg">leaf</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="o">-&gt;</span><span class="il">3</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">represents</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">number</span>
<span class="nl">123</span><span class="o">.</span>
<span class="vg">Find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">root</span><span class="o">-</span><span class="vg">to</span><span class="o">-</span><span class="vg">leaf</span><span class="w"> </span><span class="vg">numbers</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="w">   </span><span class="il">1</span>
<span class="w">  </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w"> </span><span class="il">2</span><span class="w">   </span><span class="il">3</span>
<span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">root</span><span class="o">-</span><span class="vg">to</span><span class="o">-</span><span class="vg">leaf</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">2</span><span class="w"> </span><span class="vg">represents</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="il">12</span><span class="o">.</span>
<span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">root</span><span class="o">-</span><span class="vg">to</span><span class="o">-</span><span class="vg">leaf</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="il">1</span><span class="o">-&gt;</span><span class="il">3</span><span class="w"> </span><span class="vg">represents</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="il">13</span><span class="o">.</span>
<span class="w"> </span><span class="vg">Return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">12</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">25</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>直接dfs，将到达叶节点代表的数字加起来即可。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">long</span> <span class="kt">long</span> <span class="n">input</span><span class="p">,</span> <span class="n">TreeNode</span><span class="o">*</span> <span class="n">node</span><span class="p">,</span> <span class="kt">long</span> <span class="kt">long</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">node</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">input</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="c1">//leaf</span>
        <span class="p">{</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">cur</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">)</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">sumNumbers</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>   
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0L</span><span class="p">;</span>
        <span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Symmetric-Tree"></span></p>

<h2>Symmetric Tree</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/symmetric-tree/">Symmetric Tree</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">check</span><span class="w"> </span><span class="vg">whether</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">mirror</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">itself</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">symmetric</span><span class="w"> </span><span class="vg">around</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">center</span><span class="p">)</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="nl">symmetric:</span>
<span class="w">    </span><span class="il">1</span>
<span class="w">   </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">  </span><span class="il">2</span><span class="w">   </span><span class="il">2</span>
<span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="nl">3</span><span class="w">  </span><span class="il">4</span><span class="w"> </span><span class="il">4</span><span class="w">  </span><span class="il">3</span>
<span class="vg">But</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="nl">not:</span>
<span class="w">    </span><span class="il">1</span>
<span class="w">   </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">  </span><span class="il">2</span><span class="w">   </span><span class="il">2</span>
<span class="w">   </span><span class="o">\</span><span class="w">   </span><span class="o">\</span>
<span class="w">   </span><span class="il">3</span><span class="w">    </span><span class="il">3</span>
<span class="nl">Note:</span>
<span class="vg">Bonus</span><span class="w"> </span><span class="vg">points</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">solve</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">both</span><span class="w"> </span><span class="vg">recursively</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">iteratively</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：
左节点的左子树 ＝ 右节点的由子树。 
解题方法跟<a href="#Same-Tree">same tree</a>差不多。</p>

<h3>递归</h3>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isSymmetric</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">node1</span><span class="p">,</span> <span class="n">TreeNode</span><span class="o">*</span> <span class="n">node2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">node2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">node2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node1</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">!=</span> <span class="n">node2</span><span class="o">-&gt;</span><span class="n">val</span> <span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">isSymmetric</span><span class="p">(</span><span class="n">node1</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">node2</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">isSymmetric</span><span class="p">(</span><span class="n">node1</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">node2</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">bool</span> <span class="nf">isSymmetric</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>    
        <span class="k">return</span> <span class="n">isSymmetric</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>迭代</h3>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isSymmetric</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">q</span><span class="p">;</span>
        <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
        <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">q</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">right</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">auto</span> <span class="n">left</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">!=</span> <span class="n">right</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">right</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
            <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
            <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
            <span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">right</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Unique-Binary-Search-Trees"></span></p>

<h2>Unique Binary Search Trees</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/unique-binary-search-trees/">Unique Binary Search Trees</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="p">,</span><span class="w"> </span><span class="vg">how</span><span class="w"> </span><span class="vg">many</span><span class="w"> </span><span class="vg">structurally</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">BST</span><span class="c1">&#39;s (binary search trees) that store values 1...n?</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="il">5</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">BST</span><span class="c1">&#39;s.</span>
<span class="w">   </span><span class="il">1</span><span class="w">         </span><span class="il">3</span><span class="w">     </span><span class="il">3</span><span class="w">      </span><span class="il">2</span><span class="w">      </span><span class="il">1</span>
<span class="w">    </span><span class="o">\</span><span class="w">       </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">      </span><span class="o">\</span>
<span class="w">     </span><span class="il">3</span><span class="w">     </span><span class="il">2</span><span class="w">     </span><span class="il">1</span><span class="w">      </span><span class="il">1</span><span class="w">   </span><span class="il">3</span><span class="w">      </span><span class="il">2</span>
<span class="w">    </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">       </span><span class="o">\</span><span class="w">                 </span><span class="o">\</span>
<span class="w">   </span><span class="il">2</span><span class="w">     </span><span class="il">1</span><span class="w">         </span><span class="il">2</span><span class="w">                 </span><span class="il">3</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>递归</h3>

<p>递归比较好理解。比如 根节点数字为i, 比i小的左孩纸i-1个(子问题), 右孩纸n-i. 于是就有了下面的代码。</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">numTrees</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//recursion, maybe, real input 0 shoule return 0</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">+=</span> <span class="n">numTrees</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">numTrees</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h3>动态规划</h3>

<p>其实可以缓存下, 用动态规划。</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span>  <span class="n">cache</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="mi">1</span><span class="p">);;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span><span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">cache</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">cache</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="p">];</span>
        <span class="n">cache</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">cache</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">numTrees</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h3>数学公式法</h3>

<p>其实这个问题有公式可以直接算的，参考<a href="http://zh.wikipedia.org/wiki/%E5%8D%A1%E5%A1%94%E5%85%B0%E6%95%B0">卡塔兰数</a> 。</p>

<p><span id="Unique-Binary-Search-Trees-II"></span></p>

<h2>Unique Binary Search Trees II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/unique-binary-search-trees-ii/">Unique Binary Search Trees II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="p">,</span><span class="w"> </span><span class="vg">generate</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">structurally</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">BST</span><span class="c1">&#39;s (binary search trees) that</span>
<span class="vg">store</span><span class="w"> </span><span class="vg">values</span><span class="w"> </span><span class="il">1</span><span class="o">...</span><span class="vg">n</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="vg">your</span><span class="w"> </span><span class="vg">program</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="il">5</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">BST</span><span class="c1">&#39;s shown below.</span>
</pre></div></blockquote>
<div class="highlight"><pre><span class="w">  </span><span class="il">1</span><span class="w">         </span><span class="il">3</span><span class="w">     </span><span class="il">3</span><span class="w">      </span><span class="il">2</span><span class="w">      </span><span class="il">1</span>
<span class="w">   </span><span class="o">\</span><span class="w">       </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">      </span><span class="o">/</span><span class="w"> </span><span class="o">\</span><span class="w">      </span><span class="o">\</span>
<span class="w">    </span><span class="il">3</span><span class="w">     </span><span class="il">2</span><span class="w">     </span><span class="il">1</span><span class="w">      </span><span class="il">1</span><span class="w">   </span><span class="il">3</span><span class="w">      </span><span class="il">2</span>
<span class="w">    </span><span class="o">/</span><span class="w">     </span><span class="o">/</span><span class="w">       </span><span class="o">\</span><span class="w">                 </span><span class="o">\</span>
<span class="w">   </span><span class="il">2</span><span class="w">     </span><span class="il">1</span><span class="w">         </span><span class="il">2</span><span class="w">                 </span><span class="il">3</span>
</pre></div>
<p>解题思路：</p>

<p>跟上题<a href="#Unique-Binary-Search-Trees-Ii">Unique Binary Search Trees</a>一样，这个题目需要返回具体的结果。</p>
<div class="highlight"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">generateTreesRec</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">TreeNode</span> <span class="o">*&gt;</span> <span class="n">result</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">end</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">&gt;</span> <span class="n">end</span><span class="p">)</span>
           <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
       <span class="k">else</span>
           <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">start</span><span class="p">));</span>
       <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">auto</span> <span class="n">left</span> <span class="o">=</span> <span class="n">generateTreesRec</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">auto</span> <span class="n">right</span> <span class="o">=</span> <span class="n">generateTreesRec</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it1</span> <span class="o">=</span> <span class="n">left</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it1</span> <span class="o">!=</span> <span class="n">left</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it1</span><span class="o">++</span><span class="p">)</span>
           <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it2</span> <span class="o">=</span> <span class="n">right</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it2</span> <span class="o">!=</span> <span class="n">right</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it2</span><span class="o">++</span><span class="p">)</span>
           <span class="p">{</span>
               <span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
               <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="o">*</span><span class="n">it1</span><span class="p">;</span>
               <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="o">*</span><span class="n">it2</span><span class="p">;</span>
               <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
           <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="n">TreeNode</span> <span class="o">*&gt;</span> <span class="n">generateTrees</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="n">generateTreesRec</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span><span class="c1">//n==0, return TreeNode is NULL, included.</span>
<span class="p">}</span>
</pre></div>
<p>注意当end&gt;start的时候也要返回一个空的Node，因为后面的遍历时，直接用left/right都有的情况才生成新的node。</p>

<p><span id="Validate-Binary-Search-Tree"></span></p>

<h2>Validate Binary Search Tree</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/validate-binary-search-tree/">Validate Binary Search Tree</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">tree</span><span class="p">,</span><span class="w"> </span><span class="vg">determine</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">valid</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">search</span><span class="w"> </span><span class="vg">tree</span><span class="w"> </span><span class="p">(</span><span class="vg">BST</span><span class="p">)</span><span class="o">.</span>
<span class="vg">Assume</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">BST</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">defined</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="nl">follows:</span><span class="w"> </span>
<span class="vg">The</span><span class="w"> </span><span class="vg">left</span><span class="w"> </span><span class="vg">subtree</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">contains</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">keys</span><span class="w"> </span><span class="vg">less</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">node</span><span class="c1">&#39;s key.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">right</span><span class="w"> </span><span class="vg">subtree</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">contains</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">keys</span><span class="w"> </span><span class="vg">greater</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">node</span><span class="c1">&#39;s key.</span>
<span class="vg">Both</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">left</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">right</span><span class="w"> </span><span class="vg">subtrees</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">also</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">search</span><span class="w"> </span><span class="vg">trees</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>递归判断节点值是否满足条件</h3>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">_isBST</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">min_</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max_</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&lt;=</span> <span class="n">min_</span> <span class="o">||</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">&gt;=</span> <span class="n">max_</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">_isBST</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">min_</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span>
             <span class="o">&amp;&amp;</span> <span class="n">_isBST</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">,</span> <span class="n">max_</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">bool</span> <span class="nf">isValidBST</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">_isBST</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">INT_MIN</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>中序遍历</h3>

<p>BST 中序遍历结果是升序。 中序遍历的方法就多了，有递归、迭代、Morris遍历等，详情可以参考<a href="#Binary-Tree-Inorder-Traversal">binary-tree-inorder-traversal</a>, 下面就只列一种了。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isValidBST</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="n">TreeNode</span><span class="o">*&gt;</span> <span class="n">stacks</span><span class="p">;</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">stacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">stacks</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="k">break</span><span class="p">;</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">stacks</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="n">last</span> <span class="o">&gt;=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>再训练下Morris遍历。
跟<a href="#Recover-Binary-Search-Tree">recover-binary-search-tree</a>一样，还是得强调下，Morris遍历中找到不是升序了，也不能return。因为修改了原来树的结构，必须rollback完毕才OK。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isValidBST</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">TreeNode</span> <span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
        <span class="kt">bool</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">last</span> <span class="o">&gt;=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;;</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span>
            <span class="p">{</span>
                <span class="k">auto</span> <span class="n">pre</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
                <span class="k">while</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="n">node</span><span class="p">)</span>
                    <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
                    <span class="n">node</span><span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
                <span class="p">}</span><span class="k">else</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">last</span> <span class="o">&gt;=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">)</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span><span class="c1">//cannot return. return false;</span>
                    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span><span class="c1">//reset</span>
                    <span class="n">last</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>   
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h1>sort, 排序相关</h1>

<p><span id="3Sum-Closest"></span></p>

<h2>3Sum Closest</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/3sum-closest/">3Sum Closest</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">three</span><span class="w"> </span><span class="vg">integers</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">closest</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">number</span><span class="p">,</span><span class="w"> </span><span class="vg">target</span><span class="o">.</span><span class="w"> </span><span class="vg">Return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">three</span><span class="w"> </span><span class="vg">integers</span><span class="o">.</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">input</span><span class="w"> </span><span class="vg">would</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">exactly</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">solution</span><span class="o">.</span>
<span class="w">    </span><span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="il">-1</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">-4</span><span class="p">},</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1</span><span class="o">.</span>
<span class="w">    </span><span class="vg">The</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">closest</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">2</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="il">-1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="p">)</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟<a href="#3sum">3-sum</a>思路一致。</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">threeSumClosest</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
   <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">closest</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
   <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">continue</span><span class="p">;</span>
      <span class="kt">int</span> <span class="n">begin</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
      <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span><span class="p">(</span><span class="n">begin</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">)</span>
      <span class="p">{</span>
          <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">begin</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="p">];</span>
          <span class="k">if</span><span class="p">(</span><span class="n">closest</span> <span class="o">&gt;</span> <span class="n">abs</span><span class="p">(</span><span class="n">sum</span><span class="o">-</span><span class="n">target</span><span class="p">))</span>
               <span class="n">result</span> <span class="o">=</span> <span class="n">sum</span><span class="p">,</span> <span class="n">closest</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">sum</span><span class="o">-</span><span class="n">target</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">&gt;</span> <span class="n">target</span><span class="p">)</span>
              <span class="o">--</span><span class="n">end</span><span class="p">;</span>
          <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">)</span>
              <span class="o">++</span><span class="n">begin</span><span class="p">;</span>
          <span class="k">else</span>
               <span class="k">return</span> <span class="n">sum</span><span class="p">;</span>         
       <span class="p">}</span>
    <span class="p">}</span>
   <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span> 
<span class="p">}</span>
</pre></div>
<p><span id="3Sum"></span></p>

<h2>3Sum</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/3sum/">3Sum</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">a</span><span class="p">,</span><span class="w"> </span><span class="vg">b</span><span class="p">,</span><span class="w"> </span><span class="vg">c</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="o">?</span><span class="w"> </span><span class="vg">Find</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">triplets</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">gives</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">zero</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">Elements</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">triplet</span><span class="w"> </span><span class="p">(</span><span class="vg">a</span><span class="p">,</span><span class="vg">b</span><span class="p">,</span><span class="vg">c</span><span class="p">)</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">descending</span><span class="w"> </span><span class="vg">order</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">c</span><span class="p">)</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">duplicate</span><span class="w"> </span><span class="vg">triplets</span><span class="o">.</span>
<span class="w">    </span><span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="il">-1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="il">-1</span><span class="w"> </span><span class="il">-4</span><span class="p">},</span>
<span class="w">    </span><span class="vg">A</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="nl">is:</span>
<span class="w">    </span><span class="p">(</span><span class="il">-1</span><span class="p">,</span><span class="w"> </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="il">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="il">-1</span><span class="p">,</span><span class="w"> </span><span class="il">-1</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="p">)</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>可以沿用<a href="#Leetcode-Two-Sum">2sum</a>的思路。
排序后以当前值target为基准，从当前值后面的值中找等于-target的所有对。注意去重～</p>

<ul>
<li>当前值i的去重</li>
<li>search对数的时候去重</li>
</ul>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">pairs</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">target</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">while</span><span class="p">(</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="p">];</span>
       <span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="n">pairs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">make_pair</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="p">]));</span>
           <span class="k">while</span><span class="p">(</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
               <span class="o">++</span><span class="n">start</span><span class="p">;</span>
           <span class="o">++</span><span class="n">start</span><span class="p">;</span><span class="c1">//[start] != [start+1]</span>
           <span class="k">while</span><span class="p">(</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
               <span class="o">--</span><span class="n">end</span><span class="p">;</span>
           <span class="o">--</span><span class="n">end</span><span class="p">;</span>
       <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">&gt;</span> <span class="n">target</span><span class="p">)</span>
           <span class="o">--</span><span class="n">end</span><span class="p">;</span>
       <span class="k">else</span>
           <span class="o">++</span><span class="n">start</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">threeSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
   <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="kt">int</span> <span class="n">target</span> <span class="o">=</span> <span class="o">-</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
       <span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">pairs</span><span class="p">;</span>
       <span class="n">search</span><span class="p">(</span><span class="n">pairs</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
       <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">pairs</span><span class="p">.</span><span class="n">empty</span><span class="p">()))</span>
       <span class="p">{</span>
           <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">pairs</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">pairs</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
               <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span><span class="p">,</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">});</span>
       <span class="p">}</span>  
       <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">i</span><span class="o">++</span><span class="p">;</span> 
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p>或者直接这样：</p>
<div class="highlight"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">threeSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
   <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="kt">int</span> <span class="n">begin</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
       <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
       <span class="k">while</span><span class="p">(</span><span class="n">begin</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">begin</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="p">];</span>
           <span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
               <span class="o">--</span><span class="n">end</span><span class="p">;</span>
           <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
               <span class="o">++</span><span class="n">begin</span><span class="p">;</span>
           <span class="k">else</span>
           <span class="p">{</span>
               <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">begin</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="p">]});</span>
               <span class="k">while</span><span class="p">(</span><span class="n">begin</span> <span class="o">&lt;</span> <span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">begin</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">begin</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                   <span class="o">++</span><span class="n">begin</span><span class="p">;</span>
               <span class="o">++</span><span class="n">begin</span><span class="p">;</span>
               <span class="k">while</span><span class="p">(</span><span class="n">begin</span> <span class="o">&lt;</span> <span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                   <span class="o">--</span><span class="n">end</span><span class="p">;</span>
               <span class="o">--</span><span class="n">end</span><span class="p">;</span>
           <span class="p">}</span>
       <span class="p">}</span>
       <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">i</span><span class="o">++</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p><span id="4Sum"></span></p>

<h2>4Sum</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/4sum/">4Sum</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">a</span><span class="p">,</span><span class="w"> </span><span class="vg">b</span><span class="p">,</span><span class="w"> </span><span class="vg">c</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">d</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">target</span><span class="o">?</span><span class="w"> </span><span class="vg">Find</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">quadruplets</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">gives</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">target</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">Elements</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">quadruplet</span><span class="w"> </span><span class="p">(</span><span class="vg">a</span><span class="p">,</span><span class="vg">b</span><span class="p">,</span><span class="vg">c</span><span class="p">,</span><span class="vg">d</span><span class="p">)</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">descending</span><span class="w"> </span><span class="vg">order</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">b</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">c</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">d</span><span class="p">)</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">duplicate</span><span class="w"> </span><span class="vg">quadruplets</span><span class="o">.</span>
<span class="w">    </span><span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="il">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">-1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">-2</span><span class="w"> </span><span class="il">2</span><span class="p">},</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="o">.</span>
<span class="w">    </span><span class="vg">A</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="nl">is:</span>
<span class="w">    </span><span class="p">(</span><span class="il">-1</span><span class="p">,</span><span class="w">  </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="il">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="il">-2</span><span class="p">,</span><span class="w"> </span><span class="il">-1</span><span class="p">,</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="il">-2</span><span class="p">,</span><span class="w">  </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="p">)</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟<a href="#3sum">3-sum</a>思路一样，只不过这个是\( N^2 \) 两两组合，再去找2sum, 得注意去重。</p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">pairs</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">target</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">while</span><span class="p">(</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="p">];</span>
      <span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span>
      <span class="p">{</span>
          <span class="n">pairs</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">make_pair</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="p">]));</span>
          <span class="k">while</span><span class="p">(</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
              <span class="o">++</span><span class="n">start</span><span class="p">;</span>
          <span class="o">++</span><span class="n">start</span><span class="p">;</span><span class="c1">//[start] != [start+1]</span>
          <span class="k">while</span><span class="p">(</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">end</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
              <span class="o">--</span><span class="n">end</span><span class="p">;</span>
          <span class="o">--</span><span class="n">end</span><span class="p">;</span>
      <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">&gt;</span> <span class="n">target</span><span class="p">)</span>
          <span class="o">--</span><span class="n">end</span><span class="p">;</span>
      <span class="k">else</span>
          <span class="o">++</span><span class="n">start</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">fourSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
   <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">)</span> <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
   <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">target</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
       <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
           <span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">pairs</span><span class="p">;</span>
           <span class="n">search</span><span class="p">(</span><span class="n">pairs</span><span class="p">,</span> <span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">target</span><span class="o">-</span><span class="n">sum</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
           <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">pairs</span><span class="p">.</span><span class="n">empty</span><span class="p">()))</span>
           <span class="p">{</span>
               <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">pairs</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">pairs</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>   
                   <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span><span class="p">,</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">});</span>
           <span class="p">}</span>
           <span class="k">while</span> <span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="n">j</span><span class="o">++</span><span class="p">;</span>
       <span class="p">}</span>
       <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">i</span><span class="o">++</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<!-- MathJax Section -->

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<p><span id="Insert-Interval"></span></p>

<h2>Insert Interval</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/insert-interval/">Insert Interval</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">overlapping</span><span class="w"> </span><span class="vg">intervals</span><span class="p">,</span><span class="w"> </span><span class="vg">insert</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">new</span><span class="w"> </span><span class="vg">interval</span><span class="w"> </span><span class="vg">into</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">intervals</span><span class="w"> </span><span class="p">(</span><span class="vg">merge</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">necessary</span><span class="p">)</span><span class="o">.</span><span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">intervals</span><span class="w"> </span><span class="vg">were</span><span class="w"> </span><span class="vg">initially</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">according</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">their</span><span class="w"> </span><span class="vg">start</span><span class="w"> </span><span class="vg">times</span><span class="o">.</span>
<span class="vg">Example</span><span class="w"> </span><span class="il">1</span><span class="o">:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">intervals</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">],[</span><span class="il">6</span><span class="p">,</span><span class="il">9</span><span class="p">],</span><span class="w"> </span><span class="vg">insert</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">merge</span><span class="w"> </span><span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="il">5</span><span class="p">]</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">5</span><span class="p">],[</span><span class="il">6</span><span class="p">,</span><span class="il">9</span><span class="p">]</span><span class="o">.</span>
<span class="vg">Example</span><span class="w"> </span><span class="il">2</span><span class="o">:</span>
<span class="vg">Given</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">],[</span><span class="il">3</span><span class="p">,</span><span class="il">5</span><span class="p">],[</span><span class="il">6</span><span class="p">,</span><span class="il">7</span><span class="p">],[</span><span class="il">8</span><span class="p">,</span><span class="il">10</span><span class="p">],[</span><span class="il">12</span><span class="p">,</span><span class="il">16</span><span class="p">],</span><span class="w"> </span><span class="vg">insert</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">merge</span><span class="w"> </span><span class="p">[</span><span class="il">4</span><span class="p">,</span><span class="il">9</span><span class="p">]</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">],[</span><span class="il">3</span><span class="p">,</span><span class="il">10</span><span class="p">],[</span><span class="il">12</span><span class="p">,</span><span class="il">16</span><span class="p">]</span><span class="o">.</span><span class="w"> </span><span class="vg">This</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">because</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">new</span><span class="w"> </span><span class="vg">interval</span><span class="w"> </span><span class="p">[</span><span class="il">4</span><span class="p">,</span><span class="il">9</span><span class="p">]</span><span class="w"> </span><span class="vg">overlaps</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="p">[</span><span class="il">3</span><span class="p">,</span><span class="il">5</span><span class="p">],[</span><span class="il">6</span><span class="p">,</span><span class="il">7</span><span class="p">],[</span><span class="il">8</span><span class="p">,</span><span class="il">10</span><span class="p">]</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>可以先加进去，然后再按照<a href="#Merge-Intervals">Merge Intervals</a>的算法merge一下就行。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">merge2</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">intervals</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">intervals</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">auto</span> <span class="n">start</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">.</span><span class="n">end</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">.</span><span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">end</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">.</span><span class="n">end</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">start</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">end</span><span class="p">;</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
                    <span class="n">start</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                <span class="k">else</span>
                    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">insert</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">intervals</span><span class="p">,</span> <span class="n">Interval</span> <span class="n">newInterval</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">newInterval</span><span class="p">);</span>
         <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">newIntervals</span><span class="p">(</span><span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>

        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">newInterval</span><span class="p">.</span><span class="n">start</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">start</span> <span class="o">==</span> <span class="n">newInterval</span><span class="p">.</span><span class="n">start</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">end</span> <span class="o">&gt;=</span> <span class="n">newInterval</span><span class="p">.</span><span class="n">end</span><span class="p">)</span>
                    <span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">i</span><span class="o">++</span><span class="p">;</span> <span class="c1">//the newInterval first</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span>
            <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">newIntervals</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
            <span class="n">index</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">newIntervals</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">newInterval</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="n">newIntervals</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
            <span class="n">index</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">merge2</span><span class="p">(</span><span class="n">newIntervals</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>或者 直接加。参考了 <a href="https://github.com/soulmachine/leetcode">leetcode-cpp</a>
原文中的代码貌似有个testcase 过不了TLE。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">insert</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">intervals</span><span class="p">,</span> <span class="n">Interval</span> <span class="n">newInterval</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">newInterval</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="o">&amp;</span><span class="n">it</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="k">if</span><span class="p">(</span><span class="n">newInterval</span><span class="p">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="n">it</span><span class="p">.</span><span class="n">start</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">newInterval</span><span class="p">);</span>
                <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">intervals</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="n">intervals</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">back_inserter</span><span class="p">(</span><span class="n">result</span><span class="p">));</span>
                <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">newInterval</span><span class="p">.</span><span class="n">start</span> <span class="o">&gt;</span> <span class="n">it</span><span class="p">.</span><span class="n">end</span><span class="p">)</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">it</span><span class="p">);</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">newInterval</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">newInterval</span><span class="p">.</span><span class="n">start</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">start</span><span class="p">);</span>
                <span class="n">newInterval</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">newInterval</span><span class="p">.</span><span class="n">end</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">end</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">newInterval</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Longest-Consecutive-Sequence"></span></p>

<h2>Longest Consecutive Sequence</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/longest-consecutive-sequence/">Longest Consecutive Sequence</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">unsorted</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">consecutive</span>
<span class="vg">elements</span><span class="w"> </span><span class="vg">sequence</span><span class="o">.</span>

<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="p">[</span><span class="il">100</span><span class="p">,</span><span class="w"> </span><span class="il">4</span><span class="p">,</span><span class="w"> </span><span class="il">200</span><span class="p">,</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="p">],</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">consecutive</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="il">4</span><span class="p">]</span><span class="o">.</span><span class="w"> </span><span class="vg">Return</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="nl">length:</span>
<span class="nl">4</span><span class="o">.</span>

<span class="vg">Your</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">run</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">O</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="w"> </span><span class="vg">complexity</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<h3>利用hashmap</h3>

<p>用一个set/map记录每个数，然后挨个找相邻的数字，每找到一个就从原set/map中去掉，直到全部遍历完毕。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">longestConsecutive</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">unordered_set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">data</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span> <span class="n">data</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">begin</span><span class="p">());</span>
            <span class="n">data</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">begin</span><span class="p">());</span>
            <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="o">-</span><span class="n">i</span><span class="p">)</span> <span class="o">!=</span> <span class="n">data</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="o">++</span><span class="n">len</span><span class="p">;</span>
                <span class="n">data</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="o">-</span><span class="n">i</span><span class="p">));</span>
                <span class="o">++</span><span class="n">i</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">i</span><span class="p">)</span> <span class="o">!=</span> <span class="n">data</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="o">++</span><span class="n">len</span><span class="p">;</span>
                <span class="n">data</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">i</span><span class="p">));</span>
                <span class="o">++</span><span class="n">i</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>先利用O(n)的排序</h3>

<p>这也是参考了<a href="https://oj.leetcode.com/discuss/2731/this-problem-has-a-o-n-solution?show=4368#a4368">discuss</a>的答案。 先用一个O(n)的排序算法，然后挨个左右看就是。
注意数组中可能含有相同的数字以及负数。</p>

<p>这里用基数排序radixsort，注意基数排序中内部计数排序时注意，输入可能含有负数，因此映射的下标不能是[0,9],而是还得把负数的另外一半算上即[0,18],-9-&gt;0, 9-&gt;18.</p>
<div class="highlight"><pre>    <span class="c1">//-9 ---&gt; index is 0 //9 ---&gt;index is 18</span>
    <span class="kt">int</span> <span class="nf">getBucket</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">base</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">/</span> <span class="n">base</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">9</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//按照个位(base=1)、十位(base=10)排序</span>
    <span class="kt">void</span> <span class="nf">countSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">base</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">numback</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">counts</span><span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numback</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">bucket</span> <span class="o">=</span> <span class="n">getBucket</span><span class="p">(</span><span class="n">numback</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">base</span><span class="p">);</span>
            <span class="o">++</span><span class="n">counts</span><span class="p">[</span><span class="n">bucket</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">counts</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="n">counts</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="n">counts</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">numback</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">getBucket</span><span class="p">(</span><span class="n">numback</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">base</span><span class="p">);</span>
            <span class="n">num</span><span class="p">[</span><span class="n">counts</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">numback</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
            <span class="n">counts</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">//O(N) sort, then scan to get the result</span>
    <span class="kt">void</span> <span class="nf">radixSort</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">INT_MIN</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">max</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">max</span><span class="p">,</span> <span class="n">abs</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span> <span class="c1">//!! abs</span>
        <span class="kt">int</span> <span class="n">base</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">max</span> <span class="o">/</span> <span class="n">base</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">countSort</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">base</span><span class="p">);</span>
            <span class="n">base</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">//ref https://oj.leetcode.com/discuss/2731/this-problem-has-a-o-n-solution?show=4368#a4368</span>
    <span class="kt">int</span> <span class="nf">longestConsecutive2</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">radixSort</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="c1">//!!</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">len</span><span class="o">++</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">max</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">max</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
                <span class="n">len</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">max</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Merge-Intervals"></span></p>

<h2>Merge Intervals</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/merge-intervals/">Merge Intervals</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">collection</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">intervals</span><span class="p">,</span><span class="w"> </span><span class="vg">merge</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">overlapping</span><span class="w"> </span><span class="vg">intervals</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">],[</span><span class="il">2</span><span class="p">,</span><span class="il">6</span><span class="p">],[</span><span class="il">8</span><span class="p">,</span><span class="il">10</span><span class="p">],[</span><span class="il">15</span><span class="p">,</span><span class="il">18</span><span class="p">],</span>
<span class="vg">return</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">6</span><span class="p">],[</span><span class="il">8</span><span class="p">,</span><span class="il">10</span><span class="p">],[</span><span class="il">15</span><span class="p">,</span><span class="il">18</span><span class="p">]</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>先对start排序, 排序时这样 
[1,4] [1,5]时,[1,5][1,4]  统一处理[1,4][2,4]吃掉。 
然后数轴上对前后两个interval作讨论，3种情况，一种including，i+1包含在i里面; i+1和i相交，i+1和i相隔。 </p>
<div class="highlight"><pre>    <span class="cm">/**</span>
<span class="cm">     * Definition for an interval.</span>
<span class="cm">     * struct Interval {</span>
<span class="cm">     *     int start;</span>
<span class="cm">     *     int end;</span>
<span class="cm">     *     Interval() : start(0), end(0) {}</span>
<span class="cm">     *     Interval(int s, int e) : start(s), end(e) {}</span>
<span class="cm">     * };</span>
<span class="cm">     */</span>
    <span class="kt">int</span> <span class="nf">cmp</span><span class="p">(</span><span class="k">const</span> <span class="n">Interval</span> <span class="o">&amp;</span><span class="n">i1</span><span class="p">,</span> <span class="k">const</span> <span class="n">Interval</span> <span class="o">&amp;</span><span class="n">i2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">i1</span><span class="p">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">i2</span><span class="p">.</span><span class="n">start</span><span class="p">)</span> <span class="k">return</span> <span class="n">i1</span><span class="p">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">i2</span><span class="p">.</span><span class="n">end</span><span class="p">;</span> <span class="c1">// make second bigger first</span>
        <span class="k">return</span> <span class="n">i1</span><span class="p">.</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">i2</span><span class="p">.</span><span class="n">start</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">class</span> <span class="nc">Solution</span> 
    <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">merge</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">intervals</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">intervals</span><span class="p">;</span>
            <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">intervals</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">intervals</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">cmp</span><span class="p">);</span>
            <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">auto</span> <span class="n">start</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">.</span><span class="n">end</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">start</span><span class="p">.</span><span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">end</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">.</span><span class="n">end</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">start</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">end</span><span class="p">;</span>
                    <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
                        <span class="n">start</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                    <span class="k">else</span>
                        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
            <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
</pre></div>
<p>当然，也可以借助 <a href="#Insert-Interval">Insert Interval</a> 一个一个插入到结果里面去。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">merge</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">intervals</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">intervals</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">insert</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">intervals</span><span class="p">,</span> <span class="n">Interval</span> <span class="n">newInterval</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">newInterval</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">Interval</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="o">&amp;</span><span class="n">it</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="k">if</span><span class="p">(</span><span class="n">newInterval</span><span class="p">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="n">it</span><span class="p">.</span><span class="n">start</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">newInterval</span><span class="p">);</span>
                <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">intervals</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="n">intervals</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">back_inserter</span><span class="p">(</span><span class="n">result</span><span class="p">));</span>
                <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">newInterval</span><span class="p">.</span><span class="n">start</span> <span class="o">&gt;</span> <span class="n">it</span><span class="p">.</span><span class="n">end</span><span class="p">)</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">it</span><span class="p">);</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">newInterval</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">newInterval</span><span class="p">.</span><span class="n">start</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">start</span><span class="p">);</span>
                <span class="n">newInterval</span><span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">newInterval</span><span class="p">.</span><span class="n">end</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">end</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">newInterval</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Merge-Sorted-Array"></span></p>

<h2>Merge Sorted Array</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/merge-sorted-array/">Merge Sorted Array</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">arrays</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">B</span><span class="p">,</span><span class="w"> </span><span class="vg">merge</span><span class="w"> </span><span class="vg">B</span><span class="w"> </span><span class="vg">into</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">array</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">enough</span><span class="w"> </span><span class="vg">space</span><span class="w"> </span><span class="p">(</span><span class="vg">size</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">greater</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">equal</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">n</span><span class="p">)</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">hold</span><span class="w"> </span><span class="vg">additional</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">B</span><span class="o">.</span><span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">initialized</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">B</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">respectively</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：
    因为A空间足够，所以直接从后往前定位就可以。只需要将B放完即可，若B放完，A也已经呆在应该待的位置了。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">merge</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">B</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">tot</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">B</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
                <span class="n">A</span><span class="p">[</span><span class="n">tot</span><span class="o">--</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">--</span><span class="p">];</span>
            <span class="k">else</span>
                <span class="n">A</span><span class="p">[</span><span class="n">tot</span><span class="o">--</span><span class="p">]</span> <span class="o">=</span> <span class="n">B</span><span class="p">[</span><span class="n">j</span><span class="o">--</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Remove-Duplicates-from-Sorted-Array"></span></p>

<h2>Remove Duplicates from Sorted Array</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/remove-duplicates-from-sorted-array/">Remove Duplicates from Sorted Array</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">array</span><span class="p">,</span><span class="w"> </span><span class="vg">remove</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">duplicates</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">place</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">element</span><span class="w"> </span><span class="vg">appear</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">once</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">new</span><span class="w"> </span><span class="vg">length</span><span class="o">.</span>
<span class="vg">Do</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">allocate</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">space</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">another</span><span class="w"> </span><span class="vg">array</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">place</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">constant</span><span class="w"> </span><span class="vg">memory</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">input</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">],</span>
<span class="vg">Your</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">now</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">]</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">removeDuplicates</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
            <span class="c1">//A[i+1] != A[i] // 1 1 2</span>
            <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">index</span><span class="p">;</span> <span class="c1">//index</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Remove-Duplicates-from-Sorted-Array-II"></span></p>

<h2>Remove Duplicates from Sorted Array II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/remove-duplicates-from-sorted-array-ii/">Remove Duplicates from Sorted Array II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Follow</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="s2">&quot;Remove Duplicates&quot;</span><span class="o">:</span>
<span class="vg">What</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">duplicates</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">allowed</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">most</span><span class="w"> </span><span class="vg">twice</span><span class="o">?</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">],</span>
<span class="vg">Your</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">5</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">now</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">]</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">removeDuplicates</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="n">count</span><span class="o">++</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="c1">//A[i+1] != A[i]</span>
                <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">];</span>
            <span class="p">}</span> <span class="k">else</span>
                <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">index</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div><div class="highlight"><pre>
</pre></div>
<p><span id="Sort-Colors"></span></p>

<h2>Sort Colors</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/sort-colors/">Sort Colors</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">objects</span><span class="w"> </span><span class="vg">colored</span><span class="w"> </span><span class="vg">red</span><span class="p">,</span><span class="w"> </span><span class="vg">white</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">blue</span><span class="p">,</span><span class="w"> </span><span class="vg">sort</span><span class="w"> </span><span class="vg">them</span><span class="w"> </span><span class="vg">so</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">objects</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">same</span><span class="w"> </span><span class="vg">color</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">adjacent</span><span class="p">,</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">colors</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">red</span><span class="p">,</span><span class="w"> </span><span class="vg">white</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">blue</span><span class="o">.</span>
<span class="vg">Here</span><span class="p">,</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">use</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">integers</span><span class="w"> </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">represent</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">color</span><span class="w"> </span><span class="vg">red</span><span class="p">,</span><span class="w"> </span><span class="vg">white</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">blue</span><span class="w"> </span><span class="vg">respectively</span><span class="o">.</span><span class="w">    </span>
<span class="nl">Note:</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">suppose</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">use</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">library</span><span class="c1">&#39;s sort function for this problem.</span>
<span class="vg">A</span><span class="w"> </span><span class="vg">rather</span><span class="w"> </span><span class="vg">straight</span><span class="w"> </span><span class="vg">forward</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">two</span><span class="o">-</span><span class="vg">pass</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">counting</span><span class="w"> </span><span class="vg">sort</span><span class="o">.</span>
<span class="vg">First</span><span class="p">,</span><span class="w"> </span><span class="vg">iterate</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">counting</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="il">0</span><span class="c1">&#39;s, 1&#39;s, and 2&#39;s, then overwrite array with total number of 0&#39;s, then 1&#39;s and followed by 2&#39;s.</span>
<span class="vg">Could</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">come</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">one</span><span class="o">-</span><span class="vg">pass</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">constant</span><span class="w"> </span><span class="vg">space</span><span class="o">?</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>countSort= O(2*n)</h3>

<p>按照提示，分别数数0,1,2各有多少个，然后填充进去即可。简单的countsort.</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">sortColors</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">one</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">two</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">zero</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="o">++</span><span class="n">zero</span><span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
                <span class="o">++</span><span class="n">one</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="o">++</span><span class="n">two</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">zero</span><span class="p">)</span>
            <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">zero</span><span class="o">+</span><span class="n">one</span><span class="p">)</span>
            <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">zero</span><span class="o">+</span><span class="n">one</span><span class="o">+</span><span class="n">two</span><span class="p">)</span>
            <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>O(1*n) 算法</h3>

<p>设前面的数字已经排好序.  0000 111 222 <em>1*02</em>… </p>

<p>记录第一次出现1的index，第一次出现2的index， 当前搜索的数是1的话，将first2改为1，当前index的数改为2即可...即:</p>
<div class="highlight"><pre><span class="vg">current</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1</span><span class="o">:</span><span class="w"> </span><span class="vg">first2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">current</span><span class="o">=</span><span class="il">2</span><span class="p">;</span><span class="w"> </span>
<span class="vg">current</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">0</span><span class="o">:</span><span class="w"> </span><span class="vg">first1</span><span class="o">=</span><span class="il">0</span><span class="p">,</span><span class="vg">first2</span><span class="o">=</span><span class="il">1</span><span class="p">,</span><span class="vg">current</span><span class="o">=</span><span class="il">2</span><span class="p">;</span><span class="w"> </span>
<span class="vg">current</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="o">:</span><span class="w"> </span><span class="vg">continue</span><span class="err">即可。</span><span class="w"> </span>
</pre></div>
<p>注意修改方式从后往前即可避免繁琐的边界值(first2=first1等情况) 
这个主要是参考了<a href="https://oj.leetcode.com/discuss/1827/anyone-with-one-pass-and-constant-space-solution">anyone with one pass and constant space solution</a>.</p>
<div class="highlight"><pre>     <span class="kt">void</span> <span class="nf">sortColors</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">zero</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">one</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">two</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">cur</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">cur</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">cur</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">){</span>
                <span class="n">A</span><span class="p">[</span><span class="n">two</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">cur</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>
                <span class="n">A</span><span class="p">[</span><span class="n">two</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
                <span class="n">A</span><span class="p">[</span><span class="n">one</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span> <span class="c1">//0</span>
                <span class="n">A</span><span class="p">[</span><span class="n">two</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
                <span class="n">A</span><span class="p">[</span><span class="n">one</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
                <span class="n">A</span><span class="p">[</span><span class="n">zero</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<h3>O(1*n) 算法</h3>

<p>双指针算法, 参考 <a href="https://github.com/soulmachine/leetcode">leetcode-cpp</a>.</p>
<div class="highlight"><pre><span class="vg">zero</span><span class="err">记录最后一个</span><span class="il">0</span><span class="err">的的后一个</span><span class="vg">index</span><span class="p">(</span><span class="err">可能是</span><span class="il">1</span><span class="err">或</span><span class="il">2</span><span class="p">),</span><span class="w"> </span><span class="vg">two</span><span class="err">记录最开始一个</span><span class="il">2</span><span class="err">的位置。</span>
<span class="vg">cur</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="il">0</span><span class="o">:</span><span class="w"> </span><span class="err">将</span><span class="vg">zero</span><span class="err">的后一个与</span><span class="vg">cur</span><span class="err">交换</span><span class="p">,</span><span class="w"> </span><span class="err">二者都</span><span class="o">+</span><span class="il">1</span><span class="p">;</span>
<span class="vg">cur</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="il">2</span><span class="o">:</span><span class="w"> </span><span class="err">将</span><span class="vg">two</span><span class="err">和当前对应值交换</span><span class="p">,</span><span class="w"> </span><span class="vg">two</span><span class="err">是放</span><span class="il">2</span><span class="err">的位置，下一次放</span><span class="il">2</span><span class="p">,</span><span class="err">放到</span><span class="vg">two</span><span class="il">-1</span><span class="err">的地方</span><span class="p">,</span><span class="w"> </span><span class="err">交换的值可能是</span><span class="il">0</span><span class="err">，所以</span><span class="vg">cur</span><span class="err">的指针不能后移。`</span><span class="il">1</span><span class="w"> </span><span class="il">2</span><span class="p">(</span><span class="vg">cur</span><span class="p">)</span><span class="w"> </span><span class="il">0</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="err">与</span><span class="il">0</span><span class="err">交换后</span><span class="p">,</span><span class="w"> </span><span class="il">0</span><span class="err">还得与前面的</span><span class="il">1</span><span class="err">交换。</span>
</pre></div><div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">sortColors</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">zero</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">two</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">two</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">zero</span><span class="o">++</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]);</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">two</span><span class="o">--</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="c1">//i cannot ++, maybe A[two] is zero.</span>
            <span class="k">else</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Two-Sum"></span></p>

<h2>Two Sum</h2>

<p>题目来源:<a href="https://oj.leetcode.com/problems/two-sum/">leetcode-two-sum</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">they</span><span class="w"> </span><span class="vg">add</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">specific</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">number</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">twoSum</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">indices</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">they</span><span class="w"> </span><span class="vg">add</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">target</span><span class="p">,</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">index1</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">less</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">index2</span><span class="o">.</span><span class="w"> </span><span class="vg">Please</span><span class="w"> </span><span class="vg">note</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">your</span><span class="w"> </span><span class="vg">returned</span><span class="w"> </span><span class="vg">answers</span><span class="w"> </span><span class="p">(</span><span class="vg">both</span><span class="w"> </span><span class="vg">index1</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">index2</span><span class="p">)</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">zero</span><span class="o">-</span><span class="vg">based</span><span class="o">.</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">input</span><span class="w"> </span><span class="vg">would</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">exactly</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">solution</span><span class="o">.</span>
<span class="nl">Input:</span><span class="w"> </span><span class="vg">numbers</span><span class="o">=</span><span class="p">{</span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="il">7</span><span class="p">,</span><span class="w"> </span><span class="il">11</span><span class="p">,</span><span class="w"> </span><span class="il">15</span><span class="p">},</span><span class="w"> </span><span class="vg">target</span><span class="o">=</span><span class="il">9</span>
<span class="nl">Output:</span><span class="w"> </span><span class="vg">index1</span><span class="o">=</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">index2</span><span class="o">=</span><span class="il">2</span>
</pre></div></blockquote>

<p>解答：</p>

<p>1、先排序（得记录index），i-&gt;0, j-&gt;n 相加结果sum&lt;target, i++ 否则 j—</p>
<div class="highlight"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">twoSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">numbers</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
<span class="p">{</span> 
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">num_index_map</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numbers</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">num_index_map</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
    <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">num_index_map</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num_index_map</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="p">[](</span><span class="k">const</span> <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">){</span><span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">first</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">first</span><span class="p">;}</span> <span class="p">);</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">numbers</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">num_index_map</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">first</span> <span class="o">+</span> <span class="n">num_index_map</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">first</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">tmp</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">//capacity, then push back, becomes 3</span>
            <span class="c1">//quick sort is not stable.</span>
            <span class="k">if</span><span class="p">(</span><span class="n">num_index_map</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span> <span class="o">&lt;</span> <span class="n">num_index_map</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">second</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_index_map</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span><span class="p">);</span>
                <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_index_map</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">second</span><span class="p">);</span>
            <span class="p">}</span><span class="k">else</span>
            <span class="p">{</span>
                <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_index_map</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span><span class="p">);</span>
                <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_index_map</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">second</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">tmp</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span>
        <span class="p">{</span>
            <span class="n">j</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
<p>2、用map存起来～直接找对应的另一半</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">twoSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">numbers</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">unordered_map</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="p">,</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="n">numIndex</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span> <span class="k">auto</span> <span class="nl">num</span> <span class="p">:</span> <span class="n">numbers</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">numIndex</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">target</span> <span class="o">-</span> <span class="n">num</span><span class="p">)</span> <span class="o">!=</span> <span class="n">numIndex</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span> <span class="o">&gt;</span><span class="p">{</span><span class="n">numIndex</span><span class="p">[</span><span class="n">target</span><span class="o">-</span><span class="n">num</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">};</span>
            <span class="p">}</span>
            <span class="n">numIndex</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<h1>search, 搜索相关</h1>

<p><span id="First-Missing-Positive"></span></p>

<h2>First Missing Positive</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/first-missing-positive/">First Missing Positive</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">unsorted</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">array</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">missing</span><span class="w"> </span><span class="vg">positive</span><span class="w"> </span><span class="vg">integer</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">0</span><span class="p">]</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">3</span><span class="p">,</span>
<span class="vg">and</span><span class="w"> </span><span class="p">[</span><span class="il">3</span><span class="p">,</span><span class="il">4</span><span class="p">,</span><span class="il">-1</span><span class="p">,</span><span class="il">1</span><span class="p">]</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">2</span><span class="o">.</span>
<span class="vg">Your</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">run</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">O</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="w"> </span><span class="vg">time</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">uses</span><span class="w"> </span><span class="vg">constant</span><span class="w"> </span><span class="vg">space</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>注意有可能含有重复的，若非重复的可以用应该得的正数和和实际正数和之差得到miss的正数，如果为0的话，就是本来就是连续的数，first missing的就是max+1. 含有重复的话可以用 </p>

<p>这里用原地改变下数组的位置来算，例如 3 3 1 4 0,将index所在的数（[0,n]的数）放到应该放的数里面去（数-1），比如这里应该是放到 3 应该放到index＝2，1放到index＝0，4放到index＝3，所有数的放好后，再从头开始扫描数组，第一个下标所得的数不是index+1，那么差的就是这个数。复杂度不超过O（2*n） 
A里面的数，若A[i]是正数0-n之间的，则把TA放到位置i-1处。即最后达到的效果是 A[i]=i+1，不然就是负数 或者大于n的数。第一遍遍历把所有的数归位，第二遍找，哪个位置差了，就那个位置对应的数i+1就是差的正数。</p>

<p>第一版本的代码确实很戳啊。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">firstMissingPositive</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>

        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
            <span class="kt">bool</span> <span class="n">goon</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">goon</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">tmp</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">tmp</span><span class="o">-</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">tmp</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">tmp</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">goon</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
                        <span class="n">index</span><span class="o">++</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="kt">int</span> <span class="n">tmpbak</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">tmp</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
                        <span class="n">A</span><span class="p">[</span><span class="n">tmp</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
                        <span class="n">tmp</span> <span class="o">=</span> <span class="n">tmpbak</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span><span class="k">else</span>
                <span class="p">{</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">while</span><span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span> <span class="o">||</span>
                  <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="p">))</span>
                <span class="n">index</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">!=</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="n">index</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>其实跟下面的代码一个意思。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">firstMissingPositive</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">n</span> <span class="o">||</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">A</span><span class="p">[</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
            <span class="p">}</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> <span class="k">return</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Median-of-Two-Sorted-Arrays"></span></p>

<h2>Median of Two Sorted Arrays</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/median-of-two-sorted-arrays/">Median of Two Sorted Arrays</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">There</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">arrays</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">B</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">size</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">respectively</span><span class="o">.</span><span class="w"> </span><span class="vg">Find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">median</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">arrays</span><span class="o">.</span><span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">overall</span><span class="w"> </span><span class="vg">run</span><span class="w"> </span><span class="vg">time</span><span class="w"> </span><span class="vg">complexity</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">O</span><span class="p">(</span><span class="vg">log</span><span class="w"> </span><span class="p">(</span><span class="vg">m</span><span class="o">+</span><span class="vg">n</span><span class="p">))</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p><code>log</code> 得二分了。
思想是将A[k/2-1] 与 B[k/2-1]比较：如果 <code>A[k/2-1] &lt; B[k/2-1]</code> 意味着, A[0: k/2-1] 不会大于合并后的第k个数。</p>
<div class="highlight"><pre>    <span class="c1">//kth number, increase. k starts from 1</span>
    <span class="kt">int</span> <span class="nf">findkth</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="n">findkth</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>
        <span class="c1">//m &lt; n</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="kt">int</span> <span class="n">ka</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">k</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">kb</span> <span class="o">=</span> <span class="n">k</span> <span class="o">-</span> <span class="n">ka</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">ka</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">[</span><span class="n">kb</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">findkth</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">ka</span><span class="p">,</span> <span class="n">m</span><span class="o">-</span><span class="n">ka</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="o">-</span><span class="n">ka</span><span class="p">);</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">ka</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">[</span><span class="n">kb</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">findkth</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">b</span><span class="o">+</span><span class="n">kb</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">kb</span><span class="p">,</span> <span class="n">k</span><span class="o">-</span><span class="n">kb</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">[</span><span class="n">ka</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="kt">double</span> <span class="nf">findMedianSortedArrays</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">m</span><span class="o">+</span><span class="n">n</span><span class="p">)</span><span class="o">&amp;</span><span class="mh">0x1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">findkth</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="p">((</span><span class="n">m</span><span class="o">+</span><span class="n">n</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">return</span>  <span class="p">(</span><span class="n">findkth</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="p">((</span><span class="n">m</span><span class="o">+</span><span class="n">n</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">findkth</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="n">n</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">))</span><span class="o">*</span><span class="mf">0.5</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Search-Insert-Position"></span></p>

<h2>Search Insert Position</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/search-insert-position/">Search Insert Position</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">value</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">index</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">found</span><span class="o">.</span><span class="w"> </span><span class="vg">If</span><span class="w"> </span><span class="vg">not</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">index</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">would</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">were</span><span class="w"> </span><span class="vg">inserted</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">order</span><span class="o">.</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">duplicates</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="o">.</span><span class="w"> </span><span class="vg">Here</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">few</span><span class="w"> </span><span class="vg">examples</span><span class="o">.</span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">5</span><span class="p">,</span><span class="il">6</span><span class="p">],</span><span class="w"> </span><span class="il">5</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="il">2</span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">5</span><span class="p">,</span><span class="il">6</span><span class="p">],</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="il">1</span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">5</span><span class="p">,</span><span class="il">6</span><span class="p">],</span><span class="w"> </span><span class="il">7</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="il">4</span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">5</span><span class="p">,</span><span class="il">6</span><span class="p">],</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>注意运算符优先级。mid = start + ((end - start) &gt;&gt; 1); 后面的括号非常有必要！&gt;&gt; 优先级比+低！
参考lowerBound.</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">searchInsert</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">A</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">!=</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="p">((</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span> <span class="k">return</span> <span class="n">mid</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">)</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span> <span class="c1">//NOT mid-1</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">left</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Search-a-2D-Matrix"></span></p>

<h2>Search a 2D Matrix</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/search-a-2d-matrix/">Search a 2D Matrix</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Write</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">efficient</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">searches</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">value</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">matrix</span><span class="o">.</span><span class="w"> </span><span class="vg">This</span><span class="w"> </span><span class="vg">matrix</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="nl">properties:</span>
<span class="vg">Integers</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">row</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">left</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">right</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">row</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">greater</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">last</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">previous</span><span class="w"> </span><span class="vg">row</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Consider</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="nl">matrix:</span>
<span class="p">[</span>
<span class="w">  </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="w">   </span><span class="il">3</span><span class="p">,</span><span class="w">  </span><span class="il">5</span><span class="p">,</span><span class="w">  </span><span class="il">7</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">10</span><span class="p">,</span><span class="w"> </span><span class="il">11</span><span class="p">,</span><span class="w"> </span><span class="il">16</span><span class="p">,</span><span class="w"> </span><span class="il">20</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">23</span><span class="p">,</span><span class="w"> </span><span class="il">30</span><span class="p">,</span><span class="w"> </span><span class="il">34</span><span class="p">,</span><span class="w"> </span><span class="il">50</span><span class="p">]</span>
<span class="p">]</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">true</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路： 
二分查找，将index转化为matrix的row/col即可。 </p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">cmp</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">matrix</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">index</span> <span class="o">/</span> <span class="n">n</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">col</span> <span class="o">=</span> <span class="n">index</span> <span class="o">%</span> <span class="n">n</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">)</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">bool</span> <span class="nf">searchMatrix</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">matrix</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span> <span class="p">;</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="p">((</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
            <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">cmp</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">target</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">return</span> <span class="nb">true</span> <span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span> <span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Search-for-a-Range"></span></p>

<h2>Search for a Range</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/search-for-a-range/">Search for a Range</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">starting</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">ending</span><span class="w"> </span><span class="vg">position</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">value</span><span class="o">.</span>
<span class="vg">Your</span><span class="w"> </span><span class="vg">algorithm</span><span class="c1">&#39;s runtime complexity must be in the order of O(log n).</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">found</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="p">[</span><span class="il">-1</span><span class="p">,</span><span class="w"> </span><span class="il">-1</span><span class="p">]</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="p">[</span><span class="il">5</span><span class="p">,</span><span class="w"> </span><span class="il">7</span><span class="p">,</span><span class="w"> </span><span class="il">7</span><span class="p">,</span><span class="w"> </span><span class="il">8</span><span class="p">,</span><span class="w"> </span><span class="il">8</span><span class="p">,</span><span class="w"> </span><span class="il">10</span><span class="p">]</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">value</span><span class="w"> </span><span class="il">8</span><span class="p">,</span>
<span class="vg">return</span><span class="w"> </span><span class="p">[</span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="il">4</span><span class="p">]</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>二分搜索,搜到了后前后找相同的,非Log(n)算法。
lower返回插入点(相等的最小的index)的位置，upper返回比target大的位置。right从n开始，非n-1；</p>

<p><a href="http://en.cppreference.com/w/cpp/algorithm/lower_bound">std::lower_bound</a>.</p>

<p><a href="http://en.cppreference.com/w/cpp/algorithm/upper_bound">std::upper_bound</a>.</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">lower</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">!=</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="p">((</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">)</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span><span class="c1">//NOT mid-1</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">left</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">upper</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">!=</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="p">((</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">target</span><span class="p">)</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span><span class="c1">//NOT mid-1</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">left</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">searchRange</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">A</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="n">lower</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">target</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">upper</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">target</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">==</span> <span class="n">n</span> <span class="o">||</span> <span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">!=</span> <span class="n">target</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="o">-</span><span class="mi">1</span><span class="p">};</span>

    <span class="p">}</span> 
</pre></div>
<p><span id="Search-in-Rotated-Sorted-Array"></span></p>

<h2>Search in Rotated Sorted Array</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/search-in-rotated-sorted-array/">Search in Rotated Sorted Array</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Suppose</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">rotated</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">some</span><span class="w"> </span><span class="vg">pivot</span><span class="w"> </span><span class="vg">unknown</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">beforehand</span><span class="o">.</span>
<span class="p">(</span><span class="vg">i</span><span class="o">.</span><span class="vg">e</span><span class="o">.</span><span class="p">,</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="il">4</span><span class="w"> </span><span class="il">5</span><span class="w"> </span><span class="il">6</span><span class="w"> </span><span class="il">7</span><span class="w"> </span><span class="vg">might</span><span class="w"> </span><span class="vg">become</span><span class="w"> </span><span class="il">4</span><span class="w"> </span><span class="il">5</span><span class="w"> </span><span class="il">6</span><span class="w"> </span><span class="il">7</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">2</span><span class="p">)</span><span class="o">.</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">value</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">search</span><span class="o">.</span><span class="w"> </span><span class="vg">If</span><span class="w"> </span><span class="vg">found</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">index</span><span class="p">,</span><span class="w"> </span><span class="vg">otherwise</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">-1</span><span class="o">.</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">duplicate</span><span class="w"> </span><span class="vg">exists</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>rotate总是至少有一半是有序的，可以根据这一半有序的值去二分。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">search</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="p">((</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span> <span class="k">return</span> <span class="n">mid</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">])</span><span class="c1">//left is sorted, left may equal mid</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">target</span> <span class="o">&gt;=</span> <span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">target</span> <span class="o">&lt;</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">])</span><span class="c1">//target in A[left,mid]</span>
                    <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="c1">//right is sorted</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">target</span> <span class="o">&gt;</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">target</span> <span class="o">&lt;=</span> <span class="n">A</span><span class="p">[</span><span class="n">right</span><span class="p">])</span> <span class="c1">//target in A[mid,right]</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Search-in-Rotated-Sorted-Array-II"></span></p>

<h2>Search in Rotated Sorted Array II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/search-in-rotated-sorted-array-ii/">Search in Rotated Sorted Array II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Follow</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="s2">&quot;Search in Rotated Sorted Array&quot;</span><span class="o">:</span>
<span class="vg">What</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">duplicates</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">allowed</span><span class="o">?</span><span class="w"> </span>
<span class="vg">Would</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">affect</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">run</span><span class="o">-</span><span class="vg">time</span><span class="w"> </span><span class="vg">complexity</span><span class="o">?</span><span class="w"> </span><span class="vg">How</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">why</span><span class="o">?</span>
<span class="vg">Write</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">determine</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：
跟<a href="#Search-In-Rotated-Sorted-Array">Search in Rotated Sorted Array</a>相比， 不能通过A[left] &lt;= A[mid] 判断这段有序。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">search</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="p">((</span><span class="n">right</span><span class="o">-</span><span class="n">left</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">])</span><span class="c1">//left is sorted</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">target</span> <span class="o">&amp;&amp;</span> <span class="n">target</span> <span class="o">&lt;</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">])</span>
                    <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">A</span><span class="p">[</span><span class="n">right</span><span class="p">])</span><span class="c1">//right is sorted</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">target</span> <span class="o">&amp;&amp;</span> <span class="n">target</span> <span class="o">&lt;=</span> <span class="n">A</span><span class="p">[</span><span class="n">right</span><span class="p">])</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">==</span> <span class="n">A</span><span class="p">[</span><span class="n">mid</span><span class="p">])</span><span class="c1">//1 3 1 1 1</span>
                <span class="o">++</span><span class="n">left</span><span class="p">;</span>
            <span class="k">else</span><span class="c1">//A[mid] == A[right]</span>
                <span class="o">--</span><span class="n">right</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Single-Number"></span></p>

<h2>Single Number</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/single-number/">Single Number</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">every</span><span class="w"> </span><span class="vg">element</span><span class="w"> </span><span class="vg">appears</span><span class="w"> </span><span class="vg">twice</span><span class="w"> </span><span class="vg">except</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">one</span><span class="o">.</span><span class="w"> </span><span class="vg">Find</span>
<span class="vg">that</span><span class="w"> </span><span class="vg">single</span><span class="w"> </span><span class="vg">one</span><span class="o">.</span>

<span class="nl">Note:</span>
<span class="vg">Your</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linear</span><span class="w"> </span><span class="vg">runtime</span><span class="w"> </span><span class="vg">complexity</span><span class="o">.</span><span class="w"> </span><span class="vg">Could</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">implement</span><span class="w"> </span><span class="vg">it</span>
<span class="vg">without</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">memory</span><span class="o">?</span>
</pre></div>
<p>解题思路：</p>

<h3>普通程序员方法</h3>

<p>用一个hashmap数数，再遍历一次即可。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">singleNumber</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">count</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">count</span><span class="p">[</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">++</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">count</span><span class="p">[</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="c1">//error</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>文艺程序员方法</h3>

<p>看题目要求不用额外的存储~ 然后所有数字出现2次～ 然后想想位运算。能想到位运算应该就差不多了。 <code>1^1 = 0</code></p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">singleNumber</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">r</span> <span class="o">^=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Single-Number-II"></span></p>

<h2>Single Number II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/single-number-ii/">Single Number II</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">every</span><span class="w"> </span><span class="vg">element</span><span class="w"> </span><span class="vg">appears</span><span class="w"> </span><span class="vg">three</span><span class="w"> </span><span class="vg">times</span><span class="w"> </span><span class="vg">except</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">one</span><span class="o">.</span><span class="w"> </span><span class="vg">Find</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">single</span><span class="w"> </span><span class="vg">one</span><span class="o">.</span>

<span class="nl">Note:</span>
<span class="vg">Your</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linear</span><span class="w"> </span><span class="vg">runtime</span><span class="w"> </span><span class="vg">complexity</span><span class="o">.</span><span class="w"> </span><span class="vg">Could</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">implement</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">without</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">memory</span><span class="o">?</span>
</pre></div>
<p>解题思路：</p>

<h3>普通程序员方法</h3>

<p>用一个hashmap数数，再遍历一次即可。代码就略了。</p>

<h3>文艺程序员方法</h3>

<p>有了<a href="http://tanglei.me/leetcode/single-number.html">Single Number</a>的思路，可能你会想想用位运算。不过一时半会貌似想不太出来。没关系，开一个32位数组，每个数字出现3次，相应的位肯定出现3次的整数倍。剩下的那些数对应的那个应该就是要找的了。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">singleNumber</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">count</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">32</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">j</span><span class="p">))</span>
                    <span class="n">count</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">count</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">32</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">count</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">r</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">i</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>极品程序员</h3>

<p>从<a href="https://oj.leetcode.com/discuss/857/constant-space-solution">discuss</a>看到极品程序员的答案。值得学习，不过有时候容易搞混。个人认为上面第1种(文艺)程序员的方法就不错。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">singleNumber</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">ones</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">twos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">threes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">threes</span> <span class="o">=</span> <span class="n">twos</span> <span class="o">&amp;</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="c1">//已经出现两次并且再次出现</span>
            <span class="n">twos</span> <span class="o">=</span> <span class="n">twos</span> <span class="o">|</span> <span class="p">(</span><span class="n">ones</span> <span class="o">&amp;</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span> <span class="c1">//曾经出现两次的或者曾经出现一次但是再次出现的</span>
            <span class="n">ones</span> <span class="o">=</span> <span class="n">ones</span> <span class="o">|</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="c1">//出现一次的</span>

            <span class="n">twos</span> <span class="o">=</span> <span class="n">twos</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">threes</span><span class="p">;</span> <span class="c1">//当某一位出现三次后，我们就从出现两次中消除该位</span>
            <span class="n">ones</span> <span class="o">=</span> <span class="n">ones</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">threes</span><span class="p">;</span> <span class="c1">//当某一位出现三次后，我们就从出现一次中消除该位</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">ones</span><span class="p">;</span> <span class="c1">//twos, threes最终都为0. ones是只出现一次的数</span>
    <span class="p">}</span>
</pre></div>
<p>另外，有题目是数组中有2个数不一样，其他都出现2次，找出这两个数。
思路是全部异或得到一个数～然后从这个数中找到一个二进制位为1的位置～（说明原来的两个数这个位不一样，一个为0，一个为1）然后根据这个位可以将原始的数组分成2组。再根据single number i的思路单独每组异或得到结果。</p>

<h1>math, 数学类相关</h1>

<p><span id="Add-Binary"></span></p>

<h2>Add Binary</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/add-binary/">Add Binary</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">strings</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">their</span><span class="w"> </span><span class="vg">sum</span><span class="w"> </span><span class="p">(</span><span class="vg">also</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">string</span><span class="p">)</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;11&quot;</span>
<span class="vg">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span>
<span class="vg">Return</span><span class="w"> </span><span class="s2">&quot;100&quot;</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟前面的 <a href="#Plus-One">plus-one</a> 差不多。 这里注意char和int的转换，别搞错了。</p>
<div class="highlight"><pre>    <span class="n">string</span> <span class="nf">addBinary</span><span class="p">(</span><span class="n">string</span> <span class="n">a</span><span class="p">,</span> <span class="n">string</span> <span class="n">b</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>  <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="n">i</span><span class="p">);</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="n">i</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="n">addBinary</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
        <span class="n">string</span> <span class="n">result</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">,</span><span class="n">j</span><span class="o">--</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">c</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">first</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">first</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">first</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
            <span class="n">result</span> <span class="o">=</span> <span class="s">&quot;1&quot;</span> <span class="o">+</span> <span class="n">result</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Add-Two-Numbers"></span></p>

<h2>Add Two Numbers</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/add-two-numbers/">Add Two Numbers</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">You</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">lists</span><span class="w"> </span><span class="vg">representing</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="w"> </span><span class="vg">numbers</span><span class="o">.</span><span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">digits</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">stored</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">reverse</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">their</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">single</span><span class="w"> </span><span class="vg">digit</span><span class="o">.</span><span class="w"> </span><span class="vg">Add</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">linked</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span>
<span class="nl">Input:</span><span class="w"> </span><span class="p">(</span><span class="il">2</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">4</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">3</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="il">5</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">6</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">4</span><span class="p">)</span>
<span class="nl">Output:</span><span class="w"> </span><span class="il">7</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="il">8</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>递归版</h3>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">addTwoNumbers</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">l1</span><span class="p">,</span> <span class="n">ListNode</span> <span class="o">*</span><span class="n">l2</span><span class="p">,</span> <span class="kt">int</span> <span class="n">carry</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">carry</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//only comes the carry,like 5, 5 = 10, or carry = 0</span>
            <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">carry</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">result</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">+=</span> <span class="n">l1</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l2</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="n">result</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">+=</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
        <span class="n">result</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">addTwoNumbers</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">?</span> <span class="nb">NULL</span> <span class="o">:</span> <span class="n">l1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">?</span> <span class="nb">NULL</span> <span class="o">:</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="n">result</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">/</span> <span class="mi">10</span><span class="p">);</span>
        <span class="n">result</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">%=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">addTwoNumbers</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">l1</span><span class="p">,</span> <span class="n">ListNode</span> <span class="o">*</span><span class="n">l2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">l2</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">l1</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">addTwoNumbers</span><span class="p">(</span><span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>迭代版</h3>
<div class="highlight"><pre>    <span class="n">ListNode</span> <span class="o">*</span><span class="nf">addTwoNumbers</span><span class="p">(</span><span class="n">ListNode</span> <span class="o">*</span><span class="n">l1</span><span class="p">,</span> <span class="n">ListNode</span> <span class="o">*</span><span class="n">l2</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">l2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="n">l1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">?</span> <span class="nl">l2</span> <span class="p">:</span> <span class="n">l1</span><span class="p">;</span>
        <span class="n">ListNode</span> <span class="n">dummy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">ListNode</span> <span class="o">*</span> <span class="n">pre</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dummy</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">l1</span> <span class="o">&amp;&amp;</span> <span class="n">l2</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">l1</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">+</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">l1</span> <span class="o">=</span> <span class="n">l1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">l2</span> <span class="o">=</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">while</span><span class="p">(</span><span class="n">l1</span><span class="p">){</span>
            <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">l1</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">l1</span> <span class="o">=</span> <span class="n">l1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>    
        <span class="p">}</span>
        <span class="k">while</span><span class="p">(</span><span class="n">l2</span><span class="p">){</span>
            <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">l2</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
            <span class="n">l2</span> <span class="o">=</span> <span class="n">l2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>    
        <span class="p">}</span>
        <span class="n">pre</span> <span class="o">=</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">pre</span><span class="p">){</span>
            <span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">t</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">pre</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">=</span> <span class="n">t</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span> 
                <span class="k">if</span><span class="p">(</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span>
                    <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">val</span> <span class="o">+=</span> <span class="n">t</span> <span class="o">/</span> <span class="mi">10</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="p">{</span><span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ListNode</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="mi">10</span><span class="p">);</span> <span class="k">break</span><span class="p">;}</span>
            <span class="p">}</span>
            <span class="n">pre</span> <span class="o">=</span> <span class="n">pre</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">dummy</span><span class="p">.</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Divide-Two-Integers"></span></p>

<h2>Divide Two Integers</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/divide-two-integers/">Divide Two Integers</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Divide</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">integers</span><span class="w"> </span><span class="vg">without</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">multiplication</span><span class="p">,</span><span class="w"> </span><span class="vg">division</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">mod</span><span class="w"> </span><span class="vg">operator</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>只能用减法了，一个一个减比较慢。
注意考虑溢出的情况～ </p>

<blockquote>
<p>In 2&#39;s complement systems, the absolute value of the most-negative value is out of range, e.g. for 32-bit 2&#39;s complement type int, INT_MIN is -2147483648, but the would-be result 2147483648 is greater than INT_MAX, which is 2147483647.</p>
</blockquote>

<p>long的表达是4个字节～要用llabs才能AC。 <a href="http://en.cppreference.com/w/cpp/numeric/math/abs">cppreference 关于abs几个函数的说明在此</a>. </p>
<div class="highlight"><pre><span class="kt">int</span>       <span class="nf">abs</span><span class="p">(</span> <span class="kt">int</span> <span class="n">n</span> <span class="p">);</span>
<span class="kt">long</span>      <span class="nf">abs</span><span class="p">(</span> <span class="kt">long</span> <span class="n">n</span> <span class="p">);</span>
<span class="kt">long</span> <span class="kt">long</span> <span class="nf">abs</span><span class="p">(</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">n</span> <span class="p">);</span>
<span class="p">(</span><span class="n">since</span> <span class="n">C</span><span class="o">++</span><span class="mi">11</span><span class="p">)</span>
<span class="kt">long</span>       <span class="n">labs</span><span class="p">(</span> <span class="kt">long</span> <span class="n">n</span> <span class="p">);</span>
<span class="kt">long</span> <span class="kt">long</span> <span class="nf">llabs</span><span class="p">(</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">n</span> <span class="p">);</span>
</pre></div>
<p>labs参数和返回值是long, oj 4个字节不够～ 用下面的或者用llabs都可以。</p>
<div class="highlight"><pre><span class="kt">long</span> <span class="kt">long</span>  <span class="n">m</span> <span class="o">=</span> <span class="n">abs</span><span class="p">((</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">divisor</span><span class="p">);</span>
<span class="kt">long</span> <span class="kt">long</span>  <span class="n">n</span> <span class="o">=</span> <span class="n">abs</span><span class="p">((</span><span class="kt">long</span> <span class="kt">long</span><span class="p">)</span><span class="n">dividend</span><span class="p">);</span> 
</pre></div><div class="highlight"><pre><span class="kt">int</span> <span class="nf">divide</span><span class="p">(</span><span class="kt">int</span> <span class="n">dividend</span><span class="p">,</span> <span class="kt">int</span> <span class="n">divisor</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">sign</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span><span class="n">dividend</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">divisor</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">dividend</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">divisor</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// dividend * divisor &gt; 0, this way be overflow</span>
   <span class="c1">//    long long  m = labs(divisor); this not work in leetcode&#39;s oj</span>
 <span class="c1">//   long long  n = labs(dividend);</span>
   <span class="kt">long</span> <span class="kt">long</span>  <span class="n">m</span> <span class="o">=</span> <span class="n">llabs</span><span class="p">(</span><span class="n">divisor</span><span class="p">);</span>
   <span class="kt">long</span> <span class="kt">long</span>  <span class="n">n</span> <span class="o">=</span> <span class="n">llabs</span><span class="p">(</span><span class="n">dividend</span><span class="p">);</span> 
   <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">sign</span> <span class="o">*</span> <span class="n">n</span><span class="p">;</span>
   <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="n">sign</span><span class="p">;</span>
   <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">while</span><span class="p">(</span><span class="n">n</span> <span class="o">&gt;=</span> <span class="n">m</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="kt">int</span> <span class="n">pow</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
       <span class="kt">int</span> <span class="n">mm</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
       <span class="k">while</span><span class="p">(</span><span class="n">n</span> <span class="o">&gt;=</span> <span class="n">mm</span> <span class="o">&amp;&amp;</span> <span class="n">mm</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">// mm &gt; 0 important</span>
       <span class="p">{</span>
           <span class="n">n</span> <span class="o">-=</span> <span class="n">mm</span><span class="p">;</span>
           <span class="n">result</span> <span class="o">+=</span> <span class="n">pow</span><span class="p">;</span>
           <span class="n">pow</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span>
           <span class="n">mm</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span>
       <span class="p">}</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">sign</span> <span class="o">*</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id="Gray-Code"></span></p>

<h2>Gray Code</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/gray-code/">Gray Code</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">The</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">numeral</span><span class="w"> </span><span class="vg">system</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">successive</span><span class="w"> </span><span class="vg">values</span><span class="w"> </span><span class="vg">differ</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">bit</span><span class="o">.</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">representing</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">bits</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">code</span><span class="p">,</span><span class="w"> </span><span class="vg">print</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="o">.</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">begin</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="il">0</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="p">[</span><span class="il">0</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">2</span><span class="p">]</span><span class="o">.</span><span class="w"> </span><span class="vg">Its</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="nl">is:</span>
<span class="nl">00</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">0</span>
<span class="nl">01</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="nl">11</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">3</span>
<span class="nl">10</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">2</span>
<span class="nl">Note:</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">n</span><span class="p">,</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">uniquely</span><span class="w"> </span><span class="vg">defined</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="il">0</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">1</span><span class="p">]</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">also</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">valid</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">according</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">above</span><span class="w"> </span><span class="vg">definition</span><span class="o">.</span><span class="w">    </span>
<span class="vg">For</span><span class="w"> </span><span class="vg">now</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">judge</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">able</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">judge</span><span class="w"> </span><span class="vg">based</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">instance</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">sequence</span><span class="o">.</span><span class="w"> </span><span class="vg">Sorry</span><span class="w"> </span><span class="vg">about</span><span class="w"> </span><span class="vg">that</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>逆序</h3>

<p>注意观察，n每增加1，即是在n-1的结果之上，最高位加1，并按照n-1的逆序。 </p>
<div class="highlight"><pre><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span>
<span class="vg">n</span><span class="o">=</span><span class="il">2</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="o">---</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
<span class="vg">n</span><span class="o">=</span><span class="il">3</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
<span class="o">------</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
</pre></div><div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">grayCode</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">len</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">i</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>公式法</h3>

<p><a href="http://zh.wikipedia.org/zh-cn/%E6%A0%BC%E9%9B%B7%E7%A0%81">格雷码</a></p>
<div class="highlight"><pre><span class="vg">G</span><span class="err">：格雷码</span><span class="w">  </span><span class="vg">B</span><span class="err">：二进制码</span><span class="w"> </span>
<span class="vg">G</span><span class="p">(</span><span class="vg">N</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="vg">B</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="o">/</span><span class="il">2</span><span class="p">)</span><span class="w"> </span><span class="ow">XOR</span><span class="w"> </span><span class="vg">B</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="w"> </span>
<span class="vg">Binary</span><span class="w"> </span><span class="vg">Code</span><span class="p">(</span><span class="il">1011</span><span class="p">)</span><span class="err">要转换成</span><span class="vg">Gray</span><span class="w"> </span><span class="vg">Code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="il">1011</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="il">1</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="vg">1011</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1110</span><span class="w"> </span>
</pre></div><div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">grayCode</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">;</span><span class="c1">//std::pow(2,n);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">(</span><span class="n">len</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span><span class="o">^</span><span class="n">i</span><span class="p">;</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Integer-to-Roman"></span></p>

<h2>Integer to Roman</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/integer-to-roman/">Integer to Roman</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">integer</span><span class="p">,</span><span class="w"> </span><span class="vg">convert</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">roman</span><span class="w"> </span><span class="vg">numeral</span><span class="o">.</span>
<span class="vg">Input</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">guaranteed</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">within</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">range</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="il">3999</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟<a href="#Roman-To-Integer">roman-to-integer</a>一样，搞一个map对应关系，这个题目把一些特殊的比如4/9之类的也放进map里，然后遍历得到, 不然会搞得很复杂。 参考了<a href="">Discuss</a>.</p>
<div class="highlight"><pre><span class="n">string</span> <span class="nf">intToRoman</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">string</span> <span class="n">vs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;I&quot;</span><span class="p">,</span> <span class="s">&quot;IV&quot;</span><span class="p">,</span> <span class="s">&quot;V&quot;</span><span class="p">,</span> <span class="s">&quot;IX&quot;</span><span class="p">,</span> <span class="s">&quot;X&quot;</span><span class="p">,</span> <span class="s">&quot;XL&quot;</span><span class="p">,</span> <span class="s">&quot;L&quot;</span><span class="p">,</span> <span class="s">&quot;XC&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&quot;CD&quot;</span><span class="p">,</span> <span class="s">&quot;D&quot;</span><span class="p">,</span> <span class="s">&quot;CM&quot;</span><span class="p">,</span> <span class="s">&quot;M&quot;</span><span class="p">};</span>
   <span class="kt">int</span> <span class="n">ks</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">900</span><span class="p">,</span> <span class="mi">1000</span><span class="p">};</span>
   <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ks</span><span class="p">)</span><span class="o">/</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

   <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">len</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="n">num</span><span class="p">;</span>
   <span class="n">string</span> <span class="n">result</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
   <span class="k">while</span><span class="p">(</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">if</span><span class="p">(</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">ks</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
           <span class="n">result</span> <span class="o">+=</span> <span class="n">vs</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">value</span> <span class="o">-=</span> <span class="n">ks</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
       <span class="k">else</span>
           <span class="n">index</span><span class="o">--</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id="Multiply-Strings"></span></p>

<h2>Multiply Strings</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/multiply-strings/">Multiply Strings</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">represented</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">strings</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">multiplication</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">arbitrarily</span><span class="w"> </span><span class="vg">large</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>大正整数乘法, 题目说了非负了。
跟 <a href="#Plus-One">plus-one</a>、 <a href="./add-binary.html">add-binary</a>差不多。</p>
<div class="highlight"><pre>    <span class="n">string</span> <span class="nf">multiply</span><span class="p">(</span><span class="n">string</span> <span class="n">num1</span><span class="p">,</span> <span class="n">string</span> <span class="n">num2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">num1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">*</span> <span class="n">num2</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">num1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">num2</span><span class="p">.</span><span class="n">length</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">multiply</span><span class="p">(</span><span class="n">num2</span><span class="p">,</span> <span class="n">num1</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">num1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">num1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;0&quot;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">num1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="n">num2</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">num2</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">num2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;0&quot;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">num2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="n">num1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//num1.length &gt; num2.length : num1 * num2</span>
        <span class="kt">int</span> <span class="n">total_len</span> <span class="o">=</span> <span class="n">num1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">+</span> <span class="n">num2</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="kt">int</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">total_len</span><span class="p">];</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">*</span> <span class="n">total_len</span><span class="p">);</span>

        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">num2</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">n2</span> <span class="o">=</span> <span class="n">num2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">total_len</span> <span class="o">-</span> <span class="p">(</span><span class="n">num2</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">-</span> <span class="n">i</span><span class="p">);</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">num1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">jindex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">,</span><span class="n">jindex</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">int</span> <span class="n">n1</span> <span class="o">=</span> <span class="n">num1</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
                <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">*</span> <span class="n">n1</span><span class="p">;</span>
                <span class="n">result</span><span class="p">[</span><span class="n">index</span> <span class="o">-</span> <span class="n">jindex</span><span class="p">]</span> <span class="o">+=</span> <span class="n">m</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">total_len</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">index</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
            <span class="n">result</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span>
            <span class="n">result</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">m</span> <span class="o">/</span> <span class="mi">10</span><span class="p">);</span>
            <span class="n">index</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//skip first 0</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">total_len</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">str</span> <span class="o">+=</span> <span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="sc">&#39;0&#39;</span><span class="p">);</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">delete</span> <span class="p">[]</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">str</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Palindrome-Number"></span></p>

<h2>Palindrome Number</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/palindrome-number/">Palindrome Number</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Determine</span><span class="w"> </span><span class="vg">whether</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">palindrome</span><span class="o">.</span><span class="w"> </span><span class="vg">Do</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">without</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">space</span><span class="o">.</span>
<span class="vg">Some</span><span class="w"> </span><span class="nl">hints:</span>
<span class="vg">Could</span><span class="w"> </span><span class="vg">negative</span><span class="w"> </span><span class="vg">integers</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">palindromes</span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="il">-1</span><span class="p">)</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">thinking</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">converting</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">string</span><span class="p">,</span><span class="w"> </span><span class="vg">note</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">restriction</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">space</span><span class="o">.</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">also</span><span class="w"> </span><span class="vg">try</span><span class="w"> </span><span class="vg">reversing</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">integer</span><span class="o">.</span><span class="w"> </span><span class="vg">However</span><span class="p">,</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">solved</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">problem</span><span class="w"> </span><span class="s2">&quot;Reverse Integer&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">know</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">reversed</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">might</span><span class="w"> </span><span class="vg">overflow</span><span class="o">.</span><span class="w"> </span><span class="vg">How</span><span class="w"> </span><span class="vg">would</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">handle</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">case</span><span class="o">?</span>
<span class="vg">There</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">more</span><span class="w"> </span><span class="vg">generic</span><span class="w"> </span><span class="vg">way</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">solving</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">problem</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>常量空间~ 关键得到长度,然后求reverse的数字，判断是否相等。</p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">isPalindrome</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kt">long</span> <span class="kt">long</span> <span class="n">base</span> <span class="o">=</span> <span class="mi">10L</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">xbak</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
   <span class="k">while</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="n">base</span><span class="p">)</span>
       <span class="n">base</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="n">base</span> <span class="o">/=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">xbak</span><span class="p">;</span>
   <span class="kt">long</span> <span class="kt">long</span> <span class="n">reverse</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">base2</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">while</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">reverse</span> <span class="o">+=</span> <span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">base</span> <span class="o">%</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">base2</span><span class="p">;</span>
       <span class="n">base2</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span>
       <span class="n">base</span> <span class="o">/=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">reverse</span> <span class="o">==</span> <span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id="Plus-One"></span></p>

<h2>Plus One</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/plus-one/">Plus One </a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">represented</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">digits</span><span class="p">,</span><span class="w"> </span><span class="vg">plus</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">number</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">digits</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">stored</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">most</span><span class="w"> </span><span class="vg">significant</span><span class="w"> </span><span class="vg">digit</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">head</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">list</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>直接从后往前加即可。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">plusOne</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">digits</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">digits</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">digits</span><span class="p">;</span>
        <span class="n">digits</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="n">digits</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="n">digits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">t</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="n">digits</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">t</span> <span class="o">/</span> <span class="mi">10</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">digits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">digits</span><span class="p">);</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">digits</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">digits</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">digits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">10</span><span class="p">);</span>
            <span class="n">digits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">digits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">digits</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Pow(x,-n)"></span></p>

<h2>Pow(x, n)</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/powx-n/">Pow(x, n)</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Implement</span><span class="w"> </span><span class="vg">pow</span><span class="p">(</span><span class="vg">x</span><span class="p">,</span><span class="w"> </span><span class="vg">n</span><span class="p">)</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>
<div class="highlight"><pre><span class="kt">double</span> <span class="nf">pow</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>  
<span class="p">{</span> 
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">)</span> <span class="k">return</span> <span class="mf">1.0</span><span class="p">;</span> 
    <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0x1</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="k">return</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">n</span><span class="p">);</span>  
    <span class="k">return</span> <span class="n">rpow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span> 
<span class="p">}</span>  
<span class="kt">double</span> <span class="nf">rpow</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
<span class="p">{</span> 
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mf">1.0</span><span class="p">;</span> 
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">x</span><span class="p">;</span> 
    <span class="kt">double</span> <span class="n">r</span> <span class="o">=</span> <span class="n">rpow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span> 
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&amp;</span> <span class="mh">0x1</span><span class="p">)</span> 
        <span class="k">return</span> <span class="n">r</span><span class="o">*</span><span class="n">r</span><span class="o">*</span><span class="n">x</span><span class="p">;</span> 
    <span class="k">return</span> <span class="n">r</span><span class="o">*</span><span class="n">r</span><span class="p">;</span> 
<span class="p">}</span> 
</pre></div>
<p><span id="Reverse-Integer"></span></p>

<h2>Reverse Integer</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/reverse-integer/">Reverse Integer</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Reverse</span><span class="w"> </span><span class="vg">digits</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">integer</span><span class="o">.</span>
<span class="nl">Example1:</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">123</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">321</span>
<span class="nl">Example2:</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">-123</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">-321</span>
<span class="vg">Have</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">thought</span><span class="w"> </span><span class="vg">about</span><span class="w"> </span><span class="vg">this</span><span class="o">?</span>
<span class="vg">Here</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">some</span><span class="w"> </span><span class="vg">good</span><span class="w"> </span><span class="vg">questions</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">ask</span><span class="w"> </span><span class="vg">before</span><span class="w"> </span><span class="vg">coding</span><span class="o">.</span><span class="w"> </span><span class="vg">Bonus</span><span class="w"> </span><span class="vg">points</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">already</span><span class="w"> </span><span class="vg">thought</span><span class="w"> </span><span class="vg">through</span><span class="w"> </span><span class="vg">this!</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">integer</span><span class="c1">&#39;s last digit is 0, what should the output be? ie, cases such as 10, 100.</span>
<span class="vg">Did</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">notice</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">reversed</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">might</span><span class="w"> </span><span class="vg">overflow</span><span class="o">?</span><span class="w"> </span><span class="vg">Assume</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">input</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="il">32</span><span class="o">-</span><span class="vg">bit</span><span class="w"> </span><span class="vg">integer</span><span class="p">,</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">reverse</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="il">1000000003</span><span class="w"> </span><span class="vg">overflows</span><span class="o">.</span><span class="w"> </span><span class="vg">How</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">handle</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">cases</span><span class="o">?</span>
<span class="vg">Throw</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">exception</span><span class="o">?</span><span class="w"> </span><span class="vg">Good</span><span class="p">,</span><span class="w"> </span><span class="vg">but</span><span class="w"> </span><span class="vg">what</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">throwing</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">exception</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">option</span><span class="o">?</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">would</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">re</span><span class="o">-</span><span class="vg">design</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">add</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">parameter</span><span class="p">)</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>按照 <a href="#Palindrome-Number">palindrome-number</a>的思路，一样。</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">reverse</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> 
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">sign</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>   
  <span class="n">x</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
  <span class="kt">long</span> <span class="kt">long</span> <span class="n">base</span> <span class="o">=</span> <span class="mi">10L</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">xbak</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">while</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="n">base</span><span class="p">)</span>
      <span class="n">base</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="n">base</span> <span class="o">/=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">xbak</span><span class="p">;</span>
  <span class="kt">long</span> <span class="kt">long</span> <span class="n">reverse</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">base2</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">while</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="n">reverse</span> <span class="o">+=</span> <span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">base</span> <span class="o">%</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">base2</span><span class="p">;</span>
      <span class="n">base2</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span>
      <span class="n">base</span> <span class="o">/=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">reverse</span> <span class="o">*</span> <span class="n">sign</span><span class="p">;</span>    
<span class="p">}</span>
</pre></div>
<p><span id="Roman-to-Integer"></span></p>

<h2>Roman to Integer</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/roman-to-integer/">Roman to Integer</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">roman</span><span class="w"> </span><span class="vg">numeral</span><span class="p">,</span><span class="w"> </span><span class="vg">convert</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">integer</span><span class="o">.</span>
<span class="vg">Input</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">guaranteed</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">within</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">range</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="il">3999</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>IV， I比V对应的数值小，结果就是result + （-I)，不然就是直接加 I.</p>

<p>学习下<a href="http://zh.cppreference.com/w/cpp/language/list_initialization">unordered_map的初始化</a></p>

<p>末尾加个0，让串都解析完毕。</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">romanToInt</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">kv</span><span class="p">({</span> <span class="p">{</span><span class="sc">&#39;I&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="sc">&#39;V&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">},</span> <span class="p">{</span><span class="sc">&#39;X&#39;</span><span class="p">,</span><span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="sc">&#39;L&#39;</span><span class="p">,</span><span class="mi">50</span><span class="p">},</span> <span class="p">{</span><span class="sc">&#39;C&#39;</span><span class="p">,</span><span class="mi">100</span><span class="p">},</span> <span class="p">{</span><span class="sc">&#39;D&#39;</span><span class="p">,</span><span class="mi">500</span><span class="p">},</span> <span class="p">{</span><span class="sc">&#39;M&#39;</span><span class="p">,</span><span class="mi">1000</span><span class="p">},</span> <span class="p">{</span><span class="sc">&#39;0&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span> <span class="p">});</span>
   <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="n">s</span> <span class="o">+=</span> <span class="s">&quot;0&quot;</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
       <span class="k">if</span><span class="p">(</span><span class="n">kv</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">kv</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]])</span>
           <span class="n">result</span> <span class="o">-=</span> <span class="n">kv</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
       <span class="k">else</span>
           <span class="n">result</span> <span class="o">+=</span> <span class="n">kv</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
   <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id="Sqrt(x)"></span></p>

<h2>Sqrt(x)</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/sqrtx/">Sqrt(x)</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Implement</span><span class="w"> </span><span class="vg">int</span><span class="w"> </span><span class="vg">sqrt</span><span class="p">(</span><span class="vg">int</span><span class="w"> </span><span class="vg">x</span><span class="p">)</span><span class="o">.</span>
<span class="vg">Compute</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">square</span><span class="w"> </span><span class="vg">root</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">x</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>二分</h3>

<p>注意 可能越界Int。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">binarySearch</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//(x/2)^2 &gt;= x ==&gt;x &gt;=4</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">long</span> <span class="kt">long</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="p">((</span><span class="n">right</span><span class="o">-</span><span class="n">left</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">mid</span><span class="o">*</span><span class="n">mid</span> <span class="o">==</span> <span class="n">x</span><span class="p">)</span> <span class="k">return</span> <span class="n">mid</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">mid</span><span class="o">*</span><span class="n">mid</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">((</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">)</span> <span class="c1">//(mid+1)*(mid+1) may over int</span>
                    <span class="k">return</span> <span class="n">mid</span><span class="p">;</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> 
                <span class="n">right</span> <span class="o">=</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> 
    <span class="p">}</span>

    <span class="kt">int</span> <span class="nf">sqrt</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">binarySearch</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>或者牛顿迭代法, <a href="http://blog.punkid.org/2008/02/28/compute-the-square-root-via-newtons-iteration/">参考这里</a>.</p>

<p>假设f(x)是关于X的函数:</p>

<p><img src="http://tl3shi.github.com/resource/blogimage/leetcode-sqrtx.png" alt=""></p>

<p>求出f(x)的一阶导，即斜率: </p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">f</span><span class="c1">&#39;(x) = (f(x_n) - 0) / (x_n - x_(n+1) ==&gt;</span>
<span class="vg">x_</span><span class="p">(</span><span class="vg">n</span><span class="o">+</span><span class="il">1</span><span class="p">)</span><span class="o">=</span><span class="vg">x_n</span><span class="o">-</span><span class="p">(</span><span class="vg">f</span><span class="p">(</span><span class="vg">x_n</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="vg">f</span><span class="o">^</span><span class="c1">&#39;(x_n)) </span>
<span class="err">令</span><span class="vg">x</span><span class="o">^</span><span class="vg">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">n</span><span class="err">，假设一关于</span><span class="vg">X</span><span class="err">的函数</span><span class="vg">f</span><span class="p">(</span><span class="vg">x</span><span class="p">)</span><span class="err">为</span><span class="o">:</span>
<span class="vg">f</span><span class="p">(</span><span class="vg">X</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">X</span><span class="o">^</span><span class="il">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">n</span>
<span class="err">求</span><span class="vg">f</span><span class="p">(</span><span class="vg">X</span><span class="p">)</span><span class="err">的一阶导为</span><span class="o">:</span>
<span class="vg">f</span><span class="c1">&#39;(X) = 2X</span>
<span class="err">代入前面求到的最终式中</span><span class="o">:</span>
<span class="vg">x_</span><span class="p">(</span><span class="vg">k</span><span class="o">+</span><span class="il">1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1</span><span class="o">/</span><span class="il">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="vg">x_k</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="vg">x_k</span><span class="p">)</span>
</pre></div>
<p>其实牛顿迭代法也可以看作是泰勒公式(Taylor Series)的简化.</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">sqrt</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
        <span class="kt">double</span> <span class="n">r</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">round</span><span class="p">(</span><span class="n">r</span><span class="o">*</span><span class="n">r</span><span class="p">)</span> <span class="o">==</span> <span class="n">x</span><span class="p">)</span>
                <span class="k">return</span> <span class="kt">int</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
            <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">x</span><span class="o">/</span><span class="n">r</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>$$
f&#39;(x_{n}) = \frac{ \mathrm{rise} }{ \mathrm{run} } = \frac{ \mathrm{\Delta y} }{ \mathrm{\Delta x} } = \frac{ f( x_{n} ) - 0 }{ x_{n} - x_{n+1} } = \frac{0 - f(x_{n})}{(x_{n+1} - x_{n})}
$$</p>

<p><span id="String-to-Integer-(atoi)"></span></p>

<h2>String to Integer (atoi)</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/string-to-integer-atoi/">String to Integer (atoi)</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Implement</span><span class="w"> </span><span class="vg">atoi</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">convert</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">integer</span><span class="o">.</span>
<span class="nl">Hint:</span><span class="w"> </span><span class="vg">Carefully</span><span class="w"> </span><span class="vg">consider</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">input</span><span class="w"> </span><span class="vg">cases</span><span class="o">.</span><span class="w"> </span><span class="vg">If</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">want</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">challenge</span><span class="p">,</span><span class="w"> </span><span class="vg">please</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">see</span><span class="w"> </span><span class="vg">below</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">ask</span><span class="w"> </span><span class="vg">yourself</span><span class="w"> </span><span class="vg">what</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">input</span><span class="w"> </span><span class="vg">cases</span><span class="o">.</span>
<span class="nl">Notes:</span><span class="w"> </span><span class="vg">It</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">intended</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">problem</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">specified</span><span class="w"> </span><span class="vg">vaguely</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">input</span><span class="w"> </span><span class="vg">specs</span><span class="p">)</span><span class="o">.</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">responsible</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">gather</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">input</span><span class="w"> </span><span class="vg">requirements</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">front</span><span class="o">.</span>
<span class="vg">Requirements</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="nl">atoi:</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">discards</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">many</span><span class="w"> </span><span class="vg">whitespace</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">necessary</span><span class="w"> </span><span class="vg">until</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">whitespace</span><span class="w"> </span><span class="vg">character</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">found</span><span class="o">.</span><span class="w"> </span><span class="vg">Then</span><span class="p">,</span><span class="w"> </span><span class="vg">starting</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">character</span><span class="p">,</span><span class="w"> </span><span class="vg">takes</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">optional</span><span class="w"> </span><span class="vg">initial</span><span class="w"> </span><span class="vg">plus</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">minus</span><span class="w"> </span><span class="vg">sign</span><span class="w"> </span><span class="vg">followed</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">many</span><span class="w"> </span><span class="vg">numerical</span><span class="w"> </span><span class="vg">digits</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">possible</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">interprets</span><span class="w"> </span><span class="vg">them</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">numerical</span><span class="w"> </span><span class="vg">value</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">additional</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="vg">after</span><span class="w"> </span><span class="vg">those</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">form</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">integral</span><span class="w"> </span><span class="vg">number</span><span class="p">,</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">ignored</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">effect</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">behavior</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">function</span><span class="o">.</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">whitespace</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">str</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">valid</span><span class="w"> </span><span class="vg">integral</span><span class="w"> </span><span class="vg">number</span><span class="p">,</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">exists</span><span class="w"> </span><span class="vg">because</span><span class="w"> </span><span class="vg">either</span><span class="w"> </span><span class="vg">str</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">empty</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">contains</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">whitespace</span><span class="w"> </span><span class="vg">characters</span><span class="p">,</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">conversion</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">performed</span><span class="o">.</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">valid</span><span class="w"> </span><span class="vg">conversion</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">performed</span><span class="p">,</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">zero</span><span class="w"> </span><span class="vg">value</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">returned</span><span class="o">.</span><span class="w"> </span><span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">correct</span><span class="w"> </span><span class="vg">value</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">out</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">range</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">representable</span><span class="w"> </span><span class="vg">values</span><span class="p">,</span><span class="w"> </span><span class="vg">INT_MAX</span><span class="w"> </span><span class="p">(</span><span class="il">2147483647</span><span class="p">)</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">INT_MIN</span><span class="w"> </span><span class="p">(</span><span class="il">-2147483648</span><span class="p">)</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">returned</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>注意的问题：</p>

<ul>
<li>前面的空格, 正负数；</li>
<li>字符串前面的字符部分匹配了数字，返回这部分匹配的，忽略后面非法的。</li>
<li>越界问题。INT_MAX (2147483647) or INT_MIN (-2147483648) is returned. </li>
</ul>

<h3>从后往前</h3>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">atoi</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
   <span class="kt">int</span> <span class="n">startIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">while</span><span class="p">(</span><span class="n">startIndex</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">startIndex</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>
       <span class="o">++</span><span class="n">startIndex</span><span class="p">;</span>
   <span class="k">if</span><span class="p">(</span><span class="n">startIndex</span> <span class="o">==</span> <span class="n">len</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">sign</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">if</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">startIndex</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span> <span class="o">||</span> <span class="n">str</span><span class="p">[</span><span class="n">startIndex</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span><span class="p">)</span>
       <span class="n">sign</span> <span class="o">=</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">startIndex</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">),</span> <span class="o">++</span><span class="n">startIndex</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">startIndex</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">startIndex</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="sc">&#39;9&#39;</span><span class="p">))</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">endIndex</span> <span class="o">=</span> <span class="n">startIndex</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="n">endIndex</span> <span class="o">=</span> <span class="n">startIndex</span><span class="p">;</span> <span class="n">endIndex</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">endIndex</span><span class="o">++</span><span class="p">)</span>
       <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">endIndex</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">endIndex</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="sc">&#39;9&#39;</span><span class="p">))</span> <span class="k">break</span><span class="p">;</span>
   <span class="o">--</span><span class="n">endIndex</span><span class="p">;</span>
   <span class="kt">long</span> <span class="kt">long</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0L</span><span class="p">;</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">base</span> <span class="o">=</span> <span class="mi">1L</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">endIndex</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">startIndex</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">,</span> <span class="n">base</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="sc">&#39;0&#39;</span><span class="p">)</span><span class="o">*</span><span class="n">base</span><span class="p">;</span>
       <span class="k">if</span><span class="p">(</span><span class="n">result</span> <span class="o">&gt;</span> <span class="n">INT_MAX</span><span class="p">)</span> <span class="k">return</span> <span class="n">sign</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">?</span> <span class="nl">INT_MAX</span> <span class="p">:</span> <span class="n">INT_MIN</span><span class="p">;</span><span class="c1">//break;</span>
   <span class="p">}</span>
   <span class="n">result</span> <span class="o">*=</span> <span class="n">sign</span><span class="p">;</span>
   <span class="c1">//if (result &gt;= INT_MAX) return INT_MAX;</span>
   <span class="c1">//if (result &lt;= INT_MIN) return INT_MIN;</span>
   <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>上面的解法从后往前，注意base可能越界。也可以用下面的解法，从前往后。</p>

<h3>从前往后</h3>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">atoi</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">str</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="o">*</span> <span class="n">str</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span> <span class="p">)</span> <span class="n">str</span><span class="o">++</span><span class="p">;</span> <span class="c1">//trim blank</span>
    <span class="kt">bool</span> <span class="n">nagative</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">str</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">nagative</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="n">str</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">str</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span><span class="p">)</span> <span class="c1">//ignore &#39;+&#39;</span>
        <span class="n">str</span><span class="o">++</span><span class="p">;</span>
    <span class="kt">long</span> <span class="kt">long</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0L</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="o">*</span> <span class="n">str</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="o">*</span><span class="n">str</span> <span class="o">&gt;=</span> <span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span> <span class="n">str</span> <span class="o">&lt;=</span> <span class="sc">&#39;9&#39;</span> <span class="p">))</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="n">result</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span><span class="o">*</span> <span class="n">str</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span> <span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">result</span> <span class="o">&gt;</span> <span class="n">INT_MAX</span> <span class="p">)</span> <span class="k">return</span> <span class="n">nagative</span> <span class="o">?</span> <span class="nl">INT_MIN</span> <span class="p">:</span> <span class="n">INT_MAX</span> <span class="p">;</span>
        <span class="n">str</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">nagative</span><span class="p">)</span> <span class="n">result</span> <span class="o">=</span> <span class="o">-</span><span class="n">result</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span> <span class="kt">int</span><span class="p">)</span><span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>若不用long long的话，可以在<code>*10 +</code>之前先判断是否越界即 <code>result &gt; INT_MAX/10 || result == INT_MAX/10 &amp;&amp; *str-&#39;0&#39;&gt; INT_MAX%10</code>
<span id="Valid-Number"></span></p>

<h2>Valid Number</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/valid-number/">Valid Number</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Validate</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">numeric</span><span class="o">.</span>
<span class="vg">Some</span><span class="w"> </span><span class="nl">examples:</span>
<span class="s2">&quot;0&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="vg">true</span>
<span class="s2">&quot; 0.1 &quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="vg">true</span>
<span class="s2">&quot;abc&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="vg">false</span>
<span class="s2">&quot;1 a&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="vg">false</span>
<span class="s2">&quot;2e10&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="vg">true</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">It</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">intended</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">problem</span><span class="w"> </span><span class="vg">statement</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">ambiguous</span><span class="o">.</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">gather</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">requirements</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">front</span><span class="w"> </span><span class="vg">before</span><span class="w"> </span><span class="vg">implementing</span><span class="w"> </span><span class="vg">one</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>粗暴方法</h3>

<p>自己写的代码丑陋无比，一种情况一种情况试, 实在是无参考价值。
主要是各种情况，例如：</p>

<p>| input | result|
|------|------|
|.123| true |
|12. |True|
|47e+6|True |
|__1.__ |True|
|. |False |
|46.e3|OJ里的 .2e81  true  0.e false  46.e3 true |
|+3 |True| 
|-.3|True |
|6e6.5 |false |</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isNumber</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>
            <span class="n">s</span><span class="o">++</span><span class="p">;</span> <span class="c1">//skip 空格</span>
        <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span> <span class="o">||</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span><span class="p">)</span> <span class="n">s</span><span class="o">++</span><span class="p">;</span>
        <span class="kt">bool</span> <span class="n">firstnumber</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">((</span><span class="o">*</span><span class="n">s</span> <span class="o">&gt;=</span> <span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">s</span> <span class="o">&lt;=</span> <span class="sc">&#39;9&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">)</span>
            <span class="n">firstnumber</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="n">firstnumber</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="kt">bool</span> <span class="n">has_e_before</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="kt">bool</span> <span class="n">has_dot_before</span> <span class="o">=</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">has_dot_before</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">s</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">&gt;=</span> <span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">s</span> <span class="o">&lt;=</span> <span class="sc">&#39;9&#39;</span><span class="p">))</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">// &quot;.&quot;</span>
        <span class="p">}</span>
        <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">&gt;=</span> <span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">s</span> <span class="o">&lt;=</span> <span class="sc">&#39;9&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">s</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;e&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">has_e_before</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span><span class="c1">//.2e81  true  //0.e false  //46.e3 true</span>
                <span class="n">has_e_before</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                <span class="n">s</span><span class="o">++</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span> <span class="o">||</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">)</span> <span class="n">s</span><span class="o">++</span><span class="p">;</span> <span class="c1">//005047e+6 ok</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">&gt;=</span> <span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">s</span> <span class="o">&lt;=</span> <span class="sc">&#39;9&#39;</span><span class="p">))</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">//&quot;e.&quot; &quot;e 1&quot;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>
                    <span class="n">s</span><span class="o">++</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span><span class="c1">//&quot;  1.2  &quot;</span>
                    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">//&quot; 2.3  3&quot; </span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">)</span> 
            <span class="p">{</span> 
                <span class="k">if</span><span class="p">(</span><span class="n">has_dot_before</span> <span class="o">||</span> <span class="n">has_e_before</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> 
                <span class="n">has_dot_before</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> 
                <span class="n">s</span><span class="o">++</span><span class="p">;</span> 
            <span class="p">}</span><span class="k">else</span> 
            <span class="p">{</span> 
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> 
            <span class="p">}</span> 
        <span class="p">}</span> 
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> 
    <span class="p">}</span>   
</pre></div>
<p>整理下上面的代码，可以更好看些。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isNumber</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="kt">bool</span> <span class="n">isNum</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> <span class="kt">bool</span> <span class="n">isDot</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> <span class="kt">bool</span> <span class="n">isExp</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">end</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">end</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="n">end</span><span class="o">++</span><span class="p">;</span>
        <span class="o">--</span><span class="n">end</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">end</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="o">--</span><span class="n">end</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="n">s</span><span class="o">++</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span><span class="p">)</span><span class="n">s</span><span class="o">++</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">)</span><span class="n">s</span><span class="o">++</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">s</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="o">&gt;=</span> <span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">s</span> <span class="o">&lt;=</span> <span class="sc">&#39;9&#39;</span><span class="p">){</span>
                <span class="n">isNum</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">){</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">isDot</span> <span class="o">||</span> <span class="n">isExp</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
                <span class="n">isDot</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;e&#39;</span><span class="p">){</span>
                <span class="k">if</span><span class="p">(</span><span class="n">isExp</span><span class="o">||!</span><span class="n">isNum</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
                <span class="n">isExp</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                <span class="n">isNum</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span><span class="c1">//e 后面必须得有数字</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span><span class="o">||*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">){</span>
                <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">s</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="sc">&#39;e&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> 
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="n">s</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">isNum</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>利用strtod.</h3>

<p>利用函数<strong>strtod</strong>. </p>
<div class="highlight"><pre><span class="vg">double</span><span class="w">      </span><span class="vg">strtod</span><span class="p">(</span><span class="w"> </span><span class="vg">const</span><span class="w"> </span><span class="vg">char</span><span class="w">          </span><span class="o">*</span><span class="vg">str</span><span class="p">,</span><span class="w"> </span><span class="vg">char</span><span class="w">          </span><span class="o">**</span><span class="vg">str_end</span><span class="w"> </span><span class="p">);</span>
</pre></div>
<p>能够一步一步提取str中能够组成的double, str_end为提取后剩下的串。这里找了一份实现, 有兴趣的可以参考下 <a href="https://code.google.com/p/retrobsd/source/browse/trunk/src/libc/stdlib/strtod.c?r=509&amp;spec=svn509">strtod的源码</a>.</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isNumber</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">char</span> <span class="o">*</span> <span class="n">end</span><span class="p">;</span>
        <span class="n">strtod</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">end</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">end</span> <span class="o">==</span> <span class="n">s</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">// &quot;  &quot;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">end</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">end</span> <span class="o">!=</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="n">end</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>利用自动机</h3>

<p>可参考 <a href="http://blog.csdn.net/kenden23/article/details/18696083">自动机实现valid-number</a>.</p>
<div class="highlight"><pre><span class="err">注释一下本题分多少状态吧：</span>
<span class="nl">0</span><span class="err">初始无输入或者只有</span><span class="vg">space</span><span class="err">的状态</span>
<span class="nl">1</span><span class="err">输入了数字之后的状态</span>
<span class="nl">2</span><span class="err">前面无数字，只输入了</span><span class="vg">Dot</span><span class="err">的状态</span>
<span class="nl">3</span><span class="err">输入了符号状态</span>
<span class="nl">4</span><span class="err">前面有数字和有</span><span class="vg">dot</span><span class="err">的状态</span>
<span class="nl">5</span><span class="c1">&#39;e&#39; or &#39;E&#39;输入后的状态</span>
<span class="nl">6</span><span class="err">输入</span><span class="vg">e</span><span class="err">之后输入</span><span class="vg">Sign</span><span class="err">的状态</span>
<span class="nl">7</span><span class="err">输入</span><span class="vg">e</span><span class="err">后输入数字的状态</span>
<span class="nl">8</span><span class="err">前面有有效数输入之后，输入</span><span class="vg">space</span><span class="err">的状态</span>
<span class="err">共</span><span class="il">9</span><span class="err">种状态了，难设计的是</span><span class="il">6</span><span class="p">,</span><span class="il">7</span><span class="p">,</span><span class="il">8</span><span class="err">状态。</span>
<span class="err">分好之后就好办了，设计出根据输入进行状态转换就</span><span class="vg">OK</span><span class="err">了。</span>
</pre></div><div class="highlight"><pre>    <span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
         <span class="kt">bool</span> <span class="n">isNumber</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">enum</span> <span class="n">InputType</span> <span class="p">{</span>
                   <span class="n">INVALID</span><span class="p">,</span>          <span class="c1">// 0 Include: Alphas, &#39;(&#39;, &#39;&amp;&#39; ans so on</span>
                   <span class="n">SPACE</span><span class="p">,</span>          <span class="c1">// 1</span>
                   <span class="n">SIGN</span><span class="p">,</span>          <span class="c1">// 2 &#39;+&#39;,&#39;-&#39;</span>
                   <span class="n">DIGIT</span><span class="p">,</span>          <span class="c1">// 3 numbers</span>
                   <span class="n">DOT</span><span class="p">,</span>               <span class="c1">// 4 &#39;.&#39;</span>
                   <span class="n">EXPONENT</span><span class="p">,</span>          <span class="c1">// 5 &#39;e&#39; &#39;E&#39;</span>
              <span class="p">};</span>
              <span class="kt">int</span> <span class="n">transTable</span><span class="p">[][</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
              <span class="c1">//0INVA,1SPA,2SIG,3DI,4DO,5E</span>
                   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="c1">//0初始无输入或者只有space的状态</span>
                   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span><span class="c1">//1输入了数字之后的状态</span>
                   <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="c1">//2前面无数字，只输入了Dot的状态</span>
                   <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="c1">//3输入了符号状态</span>
                   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span><span class="c1">//4前面有数字和有dot的状态</span>
                   <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="c1">//5&#39;e&#39; or &#39;E&#39;输入后的状态</span>
                   <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="c1">//6输入e之后输入Sign的状态</span>
                   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="c1">//7输入e后输入数字的状态</span>
                   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="c1">//8前面有有效数输入之后，输入space的状态</span>
              <span class="p">};</span>
              <span class="kt">int</span> <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
              <span class="k">while</span> <span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">)</span>
              <span class="p">{</span>
                   <span class="n">InputType</span> <span class="n">input</span> <span class="o">=</span> <span class="n">INVALID</span><span class="p">;</span>
                   <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="n">input</span> <span class="o">=</span> <span class="n">SPACE</span><span class="p">;</span>
                   <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span> <span class="o">||</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">)</span> <span class="n">input</span> <span class="o">=</span> <span class="n">SIGN</span><span class="p">;</span>
                   <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">))</span> <span class="n">input</span> <span class="o">=</span> <span class="n">DIGIT</span><span class="p">;</span>
                   <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">)</span> <span class="n">input</span> <span class="o">=</span> <span class="n">DOT</span><span class="p">;</span>
                   <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;e&#39;</span> <span class="o">||</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;E&#39;</span><span class="p">)</span> <span class="n">input</span> <span class="o">=</span> <span class="n">EXPONENT</span><span class="p">;</span>
                   <span class="n">state</span> <span class="o">=</span> <span class="n">transTable</span><span class="p">[</span><span class="n">state</span><span class="p">][</span><span class="n">input</span><span class="p">];</span>
                   <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
                   <span class="o">++</span><span class="n">s</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">return</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">||</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">7</span> <span class="o">||</span> <span class="n">state</span> <span class="o">==</span> <span class="mi">8</span><span class="p">;</span>
         <span class="p">}</span>
    <span class="p">};</span>
</pre></div>
<h1>string, 字符串处理相关</h1>

<p><span id="Anagrams"></span></p>

<h2>Anagrams</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/anagrams/">Anagrams</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">strings</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">groups</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">strings</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">anagrams</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">All</span><span class="w"> </span><span class="vg">inputs</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">lower</span><span class="o">-</span><span class="vg">case</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>变位词sort后是一样的，因此可用map存起来。</p>
<div class="highlight"><pre>    <span class="c1">////[from discuss] single one is not counted yet!</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">anagrams</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">strs</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">sortedKeyValue</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">strs</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">strs</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">tmp</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">tmp</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
            <span class="n">sortedKeyValue</span><span class="p">[</span><span class="n">tmp</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">strs</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">sortedKeyValue</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(;</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">sortedKeyValue</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">((</span><span class="o">*</span><span class="n">it</span><span class="p">).</span><span class="n">second</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">((</span><span class="o">*</span><span class="n">it</span><span class="p">).</span><span class="n">second</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">).</span><span class="n">second</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">back_inserter</span><span class="p">(</span><span class="n">result</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Count-and-Say"></span></p>

<h2>Count and Say</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/count-and-say/">Count and Say</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">The</span><span class="w"> </span><span class="vg">count</span><span class="o">-</span><span class="vg">and</span><span class="o">-</span><span class="vg">say</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">integers</span><span class="w"> </span><span class="vg">beginning</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="nl">follows:</span>
<span class="nl">1</span><span class="p">,</span><span class="w"> </span><span class="il">11</span><span class="p">,</span><span class="w"> </span><span class="il">21</span><span class="p">,</span><span class="w"> </span><span class="il">1211</span><span class="p">,</span><span class="w"> </span><span class="il">111221</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="w">    </span>
<span class="nl">1</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">read</span><span class="w"> </span><span class="vg">off</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="s2">&quot;one 1&quot;</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="il">11</span><span class="o">.</span>
<span class="nl">11</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">read</span><span class="w"> </span><span class="vg">off</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="s2">&quot;two 1s&quot;</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="il">21</span><span class="o">.</span>
<span class="nl">21</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">read</span><span class="w"> </span><span class="vg">off</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="s2">&quot;one 2, then one 1&quot;</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="il">1211</span><span class="o">.</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">n</span><span class="p">,</span><span class="w"> </span><span class="vg">generate</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">nth</span><span class="w"> </span><span class="vg">sequence</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">integers</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">represented</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>递归数数即可。</p>
<div class="highlight"><pre>    <span class="n">string</span> <span class="nf">to_str</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">stringstream</span> <span class="n">ss</span><span class="p">;</span>
        <span class="n">ss</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">;</span>
        <span class="n">string</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">ss</span> <span class="o">&gt;&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">string</span> <span class="nf">countAndSay</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
        <span class="k">const</span> <span class="n">string</span> <span class="n">str</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;11&quot;</span><span class="p">,</span> <span class="s">&quot;21&quot;</span><span class="p">,</span> <span class="s">&quot;1211&quot;</span><span class="p">,</span> <span class="s">&quot;111221&quot;</span><span class="p">};</span>
        <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">str</span><span class="p">)</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">string</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">)</span> <span class="k">return</span> <span class="n">str</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
        <span class="n">string</span> <span class="n">last</span> <span class="o">=</span> <span class="n">countAndSay</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">last</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="n">string</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">last</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">last</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                <span class="o">++</span><span class="n">count</span><span class="p">,</span> <span class="o">++</span><span class="n">i</span><span class="p">;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">to_str</span><span class="p">(</span><span class="n">count</span><span class="p">);</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">to_str</span><span class="p">(</span><span class="n">last</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="sc">&#39;0&#39;</span><span class="p">);</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Evaluate-Reverse-Polish-Notation"></span></p>

<h2>Evaluate Reverse Polish Notation</h2>

<blockquote>
<p>Evaluate the value of an arithmetic expression in Reverse Polish Notation.
Valid operators are +, -, *, /. Each operand may be an integer or another expression.
Some examples:</p>

<p>[&quot;2&quot;, &quot;1&quot;, &quot;+&quot;, &quot;3&quot;, &quot;*&quot;] -&gt; ((2 + 1) * 3) -&gt; 9<br>
  [&quot;4&quot;, &quot;13&quot;, &quot;5&quot;, &quot;/&quot;, &quot;+&quot;] -&gt; (4 + (13 / 5)) -&gt; 6</p>
</blockquote>

<p>解题思路：后缀表达式求值，用一个stack即可。
字符串转数字其实可以用库函数: int <a href="http://www.cplusplus.com/reference/string/stoi/?kw=stoi">stoi</a> (const string&amp;  str, size_t* idx = 0, int base = 10);</p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">isOperator</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span>
       <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span> <span class="o">||</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span> <span class="o">||</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span> <span class="o">||</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;/&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">toInt</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">){</span>
    <span class="n">stringstream</span> <span class="n">ss</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">r</span><span class="p">;</span>
    <span class="n">ss</span> <span class="o">&gt;&gt;</span> <span class="n">r</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">evalRPN</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">tokens</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">op</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">tokens</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">string</span> <span class="n">t</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">op2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">op1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">isOperator</span><span class="p">(</span><span class="n">t</span><span class="p">)){</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]){</span>
                <span class="k">case</span> <span class="sc">&#39;+&#39;</span><span class="o">:</span>
                    <span class="n">assert</span><span class="p">(</span><span class="n">op</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">);</span>
                    <span class="n">op2</span> <span class="o">=</span> <span class="n">op</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">op</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">op1</span> <span class="o">=</span> <span class="n">op</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">op</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">op</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">op1</span><span class="o">+</span><span class="n">op2</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="sc">&#39;-&#39;</span><span class="o">:</span>
                    <span class="n">assert</span><span class="p">(</span><span class="n">op</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">);</span>
                    <span class="n">op2</span> <span class="o">=</span> <span class="n">op</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">op</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">op1</span> <span class="o">=</span> <span class="n">op</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">op</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">op</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">op1</span><span class="o">-</span><span class="n">op2</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="sc">&#39;*&#39;</span><span class="o">:</span>
                    <span class="n">assert</span><span class="p">(</span><span class="n">op</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">);</span>
                    <span class="n">op2</span> <span class="o">=</span> <span class="n">op</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">op</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">op1</span> <span class="o">=</span> <span class="n">op</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">op</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">op</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">op1</span><span class="o">*</span><span class="n">op2</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="sc">&#39;/&#39;</span><span class="o">:</span>
                    <span class="n">assert</span><span class="p">(</span><span class="n">op</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">);</span>
                    <span class="n">op2</span> <span class="o">=</span> <span class="n">op</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">op</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">op1</span> <span class="o">=</span> <span class="n">op</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">op</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">assert</span><span class="p">(</span><span class="n">op2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
                    <span class="n">op</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">op1</span><span class="o">/</span><span class="n">op2</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">default</span><span class="o">:</span>
                    <span class="n">assert</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">op</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">toInt</span><span class="p">(</span><span class="n">t</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">op</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
<p><span id="Implement-strStr()"></span></p>

<h2>Implement strStr()</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/implement-strstr/">Implement strStr()</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Implement</span><span class="w"> </span><span class="vg">strStr</span><span class="p">()</span><span class="o">.</span>
<span class="vg">Returns</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">pointer</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">occurrence</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">needle</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">haystack</span><span class="p">,</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">null</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">needle</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">part</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">haystack</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>暴力法 \( O(m*n)\)</h3>
<div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span><span class="nf">strStr</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">haystack</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">needle</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="n">assert</span><span class="p">(</span><span class="n">haystack</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">needle</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
   <span class="kt">char</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">haystack</span><span class="p">);</span>
   <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">needle</span><span class="p">);</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">-</span><span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
       <span class="k">for</span><span class="p">(;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="k">if</span><span class="p">(</span><span class="n">haystack</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="n">needle</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
               <span class="k">break</span><span class="p">;</span>
       <span class="p">}</span>
       <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="n">m</span><span class="p">)</span>
           <span class="p">{</span><span class="n">result</span> <span class="o">=</span> <span class="n">haystack</span> <span class="o">+</span> <span class="n">i</span><span class="p">;</span> <span class="k">return</span> <span class="n">result</span><span class="p">;}</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h3>KMP, \( O(m + n) \)</h3>

<p><a href="http://blog.csdn.net/v_july_v/article/details/7041827">这篇文章</a> 讲得比较详细.</p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">getNext</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="n">p</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">next</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">next</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
   <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">while</span><span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">if</span><span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">p</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">p</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
       <span class="p">{</span>
           <span class="o">++</span><span class="n">j</span><span class="p">;</span><span class="o">++</span><span class="n">k</span><span class="p">;</span>
           <span class="n">next</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="n">p</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">?</span> <span class="nl">k</span> <span class="p">:</span> <span class="n">next</span><span class="p">[</span><span class="n">k</span><span class="p">];</span> 
       <span class="p">}</span><span class="k">else</span>
           <span class="n">k</span> <span class="o">=</span> <span class="n">next</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>
   <span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">kmpSearch</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="n">s</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">next</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
   <span class="n">getNext</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">next</span><span class="p">);</span>
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
   <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">p</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
           <span class="o">++</span><span class="n">i</span><span class="p">,</span> <span class="o">++</span><span class="n">j</span><span class="p">;</span>
       <span class="k">else</span>
           <span class="n">j</span> <span class="o">=</span> <span class="n">next</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
   <span class="p">}</span>
   <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="n">m</span><span class="p">)</span>
       <span class="k">return</span> <span class="n">i</span> <span class="o">-</span> <span class="n">j</span><span class="p">;</span>
   <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">char</span> <span class="o">*</span><span class="nf">strStr</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">haystack</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">needle</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="n">assert</span><span class="p">(</span><span class="n">haystack</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">needle</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
   <span class="kt">char</span> <span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">kmpSearch</span><span class="p">(</span><span class="n">haystack</span><span class="p">,</span> <span class="n">needle</span><span class="p">);</span>
   <span class="k">if</span><span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
       <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
   <span class="k">return</span> <span class="n">haystack</span> <span class="o">+</span> <span class="n">index</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>这里的参考资料还不错： </p>

<ul>
<li><a href="https://www.xuetangx.com/c4x/TsinghuaX/30240184_2X/asset/11.String.C1.Kmp.memorization.pdf">邓俊辉老师讲的这个</a> 还不错～可以参考下. </li>
<li><a href="http://v.youku.com/v_show/id_XNzQzMjQ1OTYw.html">还有这个视频也不错</a> ～</li>
<li><a href="http://blog.csdn.net/v_july_v/article/details/7041827">july的这篇文章</a></li>
</ul>

<!-- MathJax Section -->

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<p><span id="Length-of-Last-Word"></span></p>

<h2>Length of Last Word</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/length-of-last-word/">Length of Last Word</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="vg">consists</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">upper</span><span class="o">/</span><span class="vg">lower</span><span class="o">-</span><span class="vg">case</span><span class="w"> </span><span class="vg">alphabets</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">empty</span><span class="w"> </span><span class="vg">space</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="c1">&#39; &#39;, return the length of last word in the string.</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">last</span><span class="w"> </span><span class="vg">word</span><span class="w"> </span><span class="vg">does</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">exist</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">0</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">word</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">defined</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">character</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">consists</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">space</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="vg">only</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hello World&quot;</span><span class="p">,</span>
<span class="vg">return</span><span class="w"> </span><span class="il">5</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>去掉首位的空格, 从最后往前走到第一个空格或开头停止。</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">lengthOfLastWord</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span> <span class="n">start</span> <span class="o">=</span> <span class="k">const_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">start</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">start</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span>
        <span class="n">start</span><span class="o">++</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">start</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span> <span class="n">end</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">end</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span>
        <span class="n">end</span><span class="o">++</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">end</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="o">--</span><span class="n">end</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">end</span> <span class="o">&gt;=</span> <span class="n">start</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">end</span> <span class="o">!=</span><span class="sc">&#39; &#39;</span><span class="p">)</span>
        <span class="o">++</span><span class="n">len</span><span class="p">,</span> <span class="o">--</span><span class="n">end</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">len</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>这个思路用STL写就简单了, <a href="https://github.com/soulmachine/leetcode">ref</a>。 <a href="http://www.cplusplus.com/reference/functional/ptr_fun/">std::ptr_fun<arg type, result type> 模版取函数指针</a>.</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">lengthOfLastWord</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">string</span> <span class="n">str</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
        <span class="k">auto</span> <span class="n">start</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">find_if</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">rbegin</span><span class="p">(),</span> <span class="n">str</span><span class="p">.</span><span class="n">rend</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">ptr_fun</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">isalpha</span><span class="p">));</span>
        <span class="k">auto</span> <span class="n">last</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">find_if_not</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">str</span><span class="p">.</span><span class="n">rend</span><span class="p">(),</span> <span class="n">std</span><span class="o">::</span><span class="n">ptr_fun</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">isalpha</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">distance</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">last</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>直接从前往后，记录每一个单词的长度，后面的单词长度会取代前面的长度，注意得跳过中间的连续空格。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">lengthOfLastWord</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="n">s</span><span class="o">++</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">!=</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>
                <span class="n">len</span><span class="o">++</span><span class="p">;</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>
                    <span class="n">s</span><span class="o">++</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="n">len</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//*s != &#39; &#39;</span>
            <span class="p">}</span>
            <span class="n">s</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">len</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Longest-Common-Prefix"></span></p>

<h2>Longest Common Prefix</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/longest-common-prefix/">Longest Common Prefix</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Write</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">common</span><span class="w"> </span><span class="vg">prefix</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">amongst</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">strings</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>从前往后一个一个对比就是。</p>
<div class="highlight"><pre><span class="n">string</span> <span class="nf">longestCommonPrefix</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">strs</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">strs</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">strs</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">strs</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">strs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">while</span><span class="p">(</span><span class="n">size</span> <span class="o">&lt;</span> <span class="n">strs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">length</span><span class="p">())</span>
   <span class="p">{</span>
       <span class="kt">char</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">strs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">size</span><span class="p">];</span>
       <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">strs</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
           <span class="k">if</span><span class="p">(</span><span class="n">size</span> <span class="o">&gt;=</span> <span class="n">strs</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">length</span><span class="p">()</span> <span class="o">||</span> <span class="n">strs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">size</span><span class="p">]</span> <span class="o">!=</span> <span class="n">ch</span><span class="p">)</span>
               <span class="k">return</span> <span class="n">strs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
       <span class="n">size</span><span class="o">++</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">strs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p><span id="Longest-Palindromic-Substring"></span></p>

<h2>Longest Palindromic Substring</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/longest-palindromic-substring/">Longest Palindromic Substring</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">S</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">palindromic</span><span class="w"> </span><span class="vg">substring</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">S</span><span class="o">.</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">1000</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">exists</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">palindromic</span><span class="w"> </span><span class="vg">substring</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>暴力搜索, \(O(N^2) \)</h3>

<p>最简单的方法就是选中i(0~n-1)，然后向两边扩展，复杂度为\(O(N^2) \) . 注意回文长度可能是奇数或者偶数， 即
<code>aba or abba</code></p>
<div class="highlight"><pre><span class="n">string</span> <span class="nf">longestPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
      <span class="c1">//center: i</span>
      <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
      <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">right</span> <span class="o">&lt;</span> <span class="n">n</span>
          <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">right</span><span class="p">])</span>
          <span class="o">--</span><span class="n">left</span><span class="p">,</span> <span class="o">++</span><span class="n">right</span><span class="p">;</span>
      <span class="c1">//s[left] != s[right] , s[left+1 : right-1] is palindrome</span>
      <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="p">(</span><span class="n">right</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">left</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">maxLen</span><span class="p">)</span>
          <span class="n">start</span> <span class="o">=</span> <span class="n">left</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
      <span class="c1">//center: between s[i] and s[i+1]</span>
      <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
      <span class="p">{</span>
          <span class="n">left</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
          <span class="n">right</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
          <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">right</span> <span class="o">&lt;</span> <span class="n">n</span>
              <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">right</span><span class="p">])</span>
              <span class="o">--</span><span class="n">left</span><span class="p">,</span> <span class="o">++</span><span class="n">right</span><span class="p">;</span>
          <span class="n">len</span> <span class="o">=</span> <span class="p">(</span><span class="n">right</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">left</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">maxLen</span><span class="p">)</span>
              <span class="n">start</span> <span class="o">=</span> <span class="n">left</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
      <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">maxLen</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p>或者可以这样，将中间相同的字符跳过，不考虑奇数还是偶数的串(其实还是考虑了，也包括在内了)。</p>
<div class="highlight"><pre><span class="vg">abbbbbbbbba</span><span class="p">,</span><span class="w"> </span><span class="vg">left</span><span class="o">=</span><span class="il">1</span><span class="err">时</span><span class="p">,</span><span class="vg">right</span><span class="err">一直走到最后一个</span><span class="vg">b</span><span class="p">,</span><span class="w"> </span><span class="err">然后往两边判断是否相等</span><span class="o">.</span>
</pre></div><div class="highlight"><pre><span class="n">string</span> <span class="nf">longestPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
       <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
       <span class="k">while</span><span class="p">(</span><span class="n">right</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">right</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="p">])</span>
           <span class="o">++</span><span class="n">right</span><span class="p">;</span>
       <span class="c1">//s[right+1] != s[left], s[right]=s[left]</span>
       <span class="n">i</span> <span class="o">=</span> <span class="n">right</span><span class="p">;</span> <span class="c1">//skip the same char</span>
       <span class="c1">//a[bbbbbbbb]a</span>
       <span class="k">while</span><span class="p">(</span><span class="n">left</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">right</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span>
           <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">right</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
           <span class="o">--</span><span class="n">left</span><span class="p">,</span> <span class="o">++</span><span class="n">right</span><span class="p">;</span>
       <span class="c1">//s[left : right] is palindrome</span>
       <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">right</span> <span class="o">-</span> <span class="n">left</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
       <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">maxLen</span><span class="p">)</span>
           <span class="n">start</span> <span class="o">=</span> <span class="n">left</span><span class="p">,</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">maxLen</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h3>DP, \(O(N^2) \)</h3>

<p>dp[i][j] 表示 s[i:j] 是回文, 当且尽当<code>s[i] == [j] &amp;&amp; dp[i+1][j-1]</code>, 即计算dp[i][j]时, dp[i+1][j-1]得先计算出来，算dp[x][i]，必须先把dp[x][i-1]先计算出来了来。</p>
<div class="highlight"><pre><span class="n">string</span> <span class="nf">longestPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="c1">//vector&lt;vector&lt;bool&gt; &gt; dp(n, vector&lt;bool&gt;(n, false));</span>
   <span class="kt">bool</span> <span class="n">dp</span><span class="p">[</span><span class="mi">1000</span><span class="p">][</span><span class="mi">1000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="nb">false</span><span class="p">};</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
       <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
   <span class="c1">//dp[j][i]: s[j:i] is palindrome, dp[j+1][i-1] true + s[j]==s[i]</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
       <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
           <span class="p">{</span>
               <span class="n">dp</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
               <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
               <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">maxLen</span><span class="p">)</span>
                   <span class="n">maxLen</span> <span class="o">=</span> <span class="n">len</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
           <span class="p">}</span>
       <span class="p">}</span>
   <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">maxLen</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p>计算s[:5]的结果，先得把所有s[:4]结尾的回文算出来了来。
上面比如在算dp[i][5]时，用到了dp[x][4]，在上面的循环中,dp[x][4]已经算出来了的。
另外，虽然都是平方的算法，上面用vector还过不了，用数组才能过。</p>

<h3>\( O(n) \) 算法, Manacher 算法</h3>

<p><a href="http://www.felix021.com/blog/read.php?2040">felix021的文章讲得很清楚</a>，这里“偷”过来。</p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="err">首先用一个非常巧妙的方式，将所有可能的奇数</span><span class="o">/</span><span class="err">偶数长度的回文子串都转换成了奇数长度：在每个字符的两边都插入一个特殊的符号。比如</span><span class="w"> </span><span class="vg">abba</span><span class="w"> </span><span class="err">变成</span><span class="w"> </span><span class="err">#</span><span class="vg">a#b#b#a#</span><span class="err">，</span><span class="w"> </span><span class="vg">aba</span><span class="err">变成</span><span class="w"> </span><span class="err">#</span><span class="vg">a#b#a#</span><span class="err">。</span><span class="w"> </span><span class="err">为了进一步减少编码的复杂度，可以在字符串的开始加入另一个特殊字符，这样就不用特殊处理越界问题，比如$#</span><span class="vg">a#b#a#</span><span class="err">（注意，下面的代码是用</span><span class="vg">C</span><span class="err">语言写就，由于</span><span class="vg">C</span><span class="err">语言规范还要求字符串末尾有一个</span><span class="c1">&#39;\0&#39;所以正好OK，但其他语言可能会导致越界）。</span>

<span class="err">下面以字符串</span><span class="il">12212321</span><span class="err">为例，经过上一步，变成了</span><span class="w"> </span><span class="vg">S</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;$#1#2#2#1#2#3#2#1#&quot;</span><span class="p">;</span>

<span class="err">然后用一个数组</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="err">来记录以字符</span><span class="vg">S</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">为中心的最长回文子串向左</span><span class="o">/</span><span class="err">右扩张的长度（包括</span><span class="vg">S</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">，也就是把该回文串“对折”以后的长度），比如</span><span class="vg">S</span><span class="err">和</span><span class="vg">P</span><span class="err">的对应关系：</span>
<span class="vg">S</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">3</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="err">#</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="err">#</span>
<span class="vg">P</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">5</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">4</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">6</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">1</span><span class="w">  </span><span class="il">2</span><span class="w">  </span><span class="il">1</span>
<span class="p">(</span><span class="vg">p</span><span class="o">.</span><span class="vg">s</span><span class="o">.</span><span class="w"> </span><span class="err">可以看出，</span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="il">-1</span><span class="err">正好是原字符串中回文串的总长度）</span>
<span class="err">那么怎么计算</span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">呢？该算法增加两个辅助变量（其实一个就够了，两个更清晰）</span><span class="vg">id</span><span class="err">和</span><span class="vg">mx</span><span class="err">，其中</span><span class="vg">id</span><span class="err">表示最大回文子串中心的位置，</span><span class="vg">mx</span><span class="err">则为</span><span class="vg">id</span><span class="o">+</span><span class="vg">P</span><span class="p">[</span><span class="vg">id</span><span class="p">]</span><span class="err">，也就是最大回文子串的边界。</span>

<span class="err">然后可以得到一个非常神奇的结论，这个算法的关键点就在这里了：如果</span><span class="vg">mx</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">i</span><span class="err">，那么</span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">MIN</span><span class="p">(</span><span class="vg">P</span><span class="p">[</span><span class="il">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="vg">id</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="p">],</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="p">)</span><span class="err">。就是这个串卡了我非常久。实际上如果把它写得复杂一点，理解起来会简单很多：</span>
<span class="o">//</span><span class="err">记</span><span class="vg">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="vg">id</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="err">，也就是说</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="err">是</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="err">关于</span><span class="w"> </span><span class="vg">id</span><span class="w"> </span><span class="err">的对称点。</span>
<span class="vg">if</span><span class="w"> </span><span class="p">(</span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">])</span><span class="w"> </span>
<span class="w">    </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">];</span>
<span class="vg">else</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="err">，取最小值，之后再匹配更新。</span>
<span class="err">当然光看代码还是不够清晰，还是借助图来理解比较容易。</span>
<span class="err">当</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="err">的时候，以</span><span class="vg">S</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="err">为中心的回文子串包含在以</span><span class="vg">S</span><span class="p">[</span><span class="vg">id</span><span class="p">]</span><span class="err">为中心的回文子串中，由于</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="vg">j</span><span class="w"> </span><span class="err">对称，以</span><span class="vg">S</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">为中心的回文子串必然包含在以</span><span class="vg">S</span><span class="p">[</span><span class="vg">id</span><span class="p">]</span><span class="err">为中心的回文子串中，所以必有</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="err">，见下图。</span>
</pre></div>
<p><img src="http://tl3shi.github.io/resource/blogimage/leetcode-longest-palindromic-substring-0.png" alt=""></p>
<div class="highlight"><pre><span class="err">当</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="err">的时候，以</span><span class="vg">S</span><span class="p">[</span><span class="vg">j</span><span class="p">]</span><span class="err">为中心的回文子串不一定完全包含于以</span><span class="vg">S</span><span class="p">[</span><span class="vg">id</span><span class="p">]</span><span class="err">为中心的回文子串中，但是基于对称性可知，下图中两个绿框所包围的部分是相同的，也就是说以</span><span class="vg">S</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">为中心的回文子串，其向右至少会扩张到</span><span class="vg">mx</span><span class="err">的位置，也就是说</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="vg">i</span><span class="err">。至于</span><span class="vg">mx</span><span class="err">之后的部分是否对称，就只能老老实实去匹配了。</span>
</pre></div>
<p><img src="http://tl3shi.github.io/resource/blogimage/leetcode-longest-palindromic-substring-1.png" alt=""></p>
<div class="highlight"><pre><span class="err">对于</span><span class="w"> </span><span class="vg">mx</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="err">的情况，无法对</span><span class="w"> </span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="err">做更多的假设，只能</span><span class="vg">P</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1</span><span class="err">，然后再去匹配了。</span>
</pre></div>
<p>代码如下：</p>
<div class="highlight"><pre><span class="c1">//Manacher O(n)</span>
<span class="c1">//ref1: http://leetcode.com/2011/11/longest-palindromic-substring-part-ii.html</span>
<span class="c1">//ref2: http://blog.csdn.net/pickless/article/details/9040293</span>
<span class="c1">//ref3: http://www.felix021.com/blog/read.php?2040</span>
<span class="n">string</span> <span class="nf">longestPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
   <span class="n">string</span> <span class="n">news</span><span class="p">(</span><span class="n">len</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="sc">&#39; &#39;</span><span class="p">);</span>
   <span class="n">news</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="sc">&#39;$&#39;</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">news</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;#&#39;</span><span class="p">;</span>
       <span class="n">news</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
   <span class="p">}</span>
   <span class="n">news</span><span class="p">[</span><span class="n">len</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;#&#39;</span><span class="p">;</span>
   <span class="n">news</span><span class="p">[</span><span class="n">len</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">(</span><span class="n">len</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
   <span class="kt">int</span> <span class="n">mx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">mx</span> <span class="o">&gt;</span> <span class="n">i</span> <span class="o">?</span> <span class="n">min</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">id</span><span class="o">-</span><span class="n">i</span><span class="p">],</span> <span class="n">mx</span><span class="o">-</span><span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
       <span class="k">while</span><span class="p">(</span><span class="n">news</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">==</span> <span class="n">news</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span> <span class="o">++</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
       <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">mx</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="n">mx</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
           <span class="n">id</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
       <span class="p">}</span>
   <span class="p">}</span>
   <span class="kt">int</span> <span class="n">maxLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">center</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">maxLen</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="n">maxLen</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
           <span class="n">center</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
       <span class="p">}</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">((</span><span class="n">center</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">maxLen</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">maxLen</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<!-- MathJax Section -->

<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<p><span id="Longest-Substring-Without-Repeating-Characters"></span></p>

<h2>Longest Substring Without Repeating Characters</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/longest-substring-without-repeating-characters/">Longest Substring Without Repeating Characters</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">substring</span><span class="w"> </span><span class="vg">without</span><span class="w"> </span><span class="vg">repeating</span><span class="w"> </span><span class="vg">characters</span><span class="o">.</span><span class="w"> </span><span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">substring</span><span class="w"> </span><span class="vg">without</span><span class="w"> </span><span class="vg">repeating</span><span class="w"> </span><span class="vg">letters</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="s2">&quot;abcabcbb&quot;</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="s2">&quot;abc&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">3</span><span class="o">.</span><span class="w"> </span><span class="vg">For</span><span class="w"> </span><span class="s2">&quot;bbbbb&quot;</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">substring</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="il">1</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>记录上一次出现同字符到当前字符的长度，如下图。
<img src="http://tl3shi.github.com/resource/blogimage/leetcode-longest-substring-without-repeating-characters.png" alt=""></p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">lengthOfLongestSubstring</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">table</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span> 
   <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">if</span><span class="p">(</span><span class="n">table</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span>
           <span class="n">start</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
       <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
       <span class="n">table</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>注意数组初始化, <code>int table[256]={-1}; //只有第一个为-1，其他为0.</code></p>

<p>我不会告诉你我参考了<a href="http://blog.csdn.net/likecool21/article/details/10858799">这篇文章的</a>.</p>

<p><span id="Longest-Valid-Parentheses"></span></p>

<h2>Longest Valid Parentheses</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/longest-valid-parentheses/">Longest Valid Parentheses</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">containing</span><span class="w"> </span><span class="vg">just</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="c1">&#39;(&#39; and &#39;)&#39;, find the length of the longest valid (well-formed) parentheses substring.</span>
<span class="vg">For</span><span class="w"> </span><span class="s2">&quot;(()&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">valid</span><span class="w"> </span><span class="vg">parentheses</span><span class="w"> </span><span class="vg">substring</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="s2">&quot;()&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="o">.</span>
<span class="vg">Another</span><span class="w"> </span><span class="vg">example</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="s2">&quot;)()())&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">longest</span><span class="w"> </span><span class="vg">valid</span><span class="w"> </span><span class="vg">parentheses</span><span class="w"> </span><span class="vg">substring</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="s2">&quot;()()&quot;</span><span class="p">,</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">4</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>找连续合法的括号对数。</p>

<h3>O(2*N)</h3>

<p>1、用一个数组记录每个括号的配对状态，借助stack找配对的index，最后再扫描一遍，找连续配对的数量max.<a href="https://oj.leetcode.com/discuss/5907/an-easy-understanding-way-to-solve-it">ref1</a>.</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">longestValidParentheses</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">match</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">(),</span> <span class="nb">false</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;(&#39;</span><span class="p">)</span>
                <span class="n">left</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="k">else</span><span class="c1">//&#39;)&#39;</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="n">left</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
                <span class="p">{</span>
                    <span class="n">match</span><span class="p">[</span><span class="n">left</span><span class="p">.</span><span class="n">top</span><span class="p">()]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="n">left</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">match</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                <span class="p">}</span><span class="c1">//else default false</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">match</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">len</span><span class="o">++</span><span class="p">;</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>O(N)</h3>

<p>用last记录上一个还没配对的右括号”)”, 用一个栈记录下”(“的index, 遇到”)”, 配对时pop掉，记录其长度, pop完时，长度为当前 <code>index-last</code>, 没完时，长度为当前<code>index-stack.top()</code>. <a href="http://www.cnblogs.com/lichen782/p/leetcode_Longest_Valid_Parentheses.html">ref2</a></p>

<p>例如:</p>
<div class="highlight"><pre><span class="err">`</span><span class="p">)(()())</span><span class="err">`</span><span class="w"> </span><span class="vg">last</span><span class="err">＝</span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="vg">index</span><span class="o">=</span><span class="il">3</span><span class="err">时</span><span class="p">,</span><span class="w"> </span><span class="vg">pop</span><span class="p">(),</span><span class="vg">len</span><span class="o">=</span><span class="il">3</span><span class="o">-</span><span class="vg">left</span><span class="o">.</span><span class="vg">top</span><span class="p">()</span><span class="o">=</span><span class="il">2</span><span class="p">,</span><span class="w"> </span>
<span class="vg">index</span><span class="o">=</span><span class="il">5</span><span class="err">时</span><span class="p">,</span><span class="w"> </span><span class="vg">pop</span><span class="p">(),</span><span class="vg">len</span><span class="o">=</span><span class="il">5</span><span class="o">-</span><span class="vg">left</span><span class="o">.</span><span class="vg">top</span><span class="p">()</span><span class="o">=</span><span class="il">4</span><span class="p">,</span><span class="w"> </span>
<span class="vg">index</span><span class="o">=</span><span class="il">6</span><span class="err">时</span><span class="p">,</span><span class="w"> </span><span class="vg">empty</span><span class="p">()</span><span class="w"> </span><span class="vg">len</span><span class="o">=</span><span class="il">6</span><span class="o">-</span><span class="vg">last</span><span class="o">=</span><span class="il">6</span><span class="o">.</span>
</pre></div><div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">longestValidParentheses</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">left</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;(&#39;</span><span class="p">)</span>
                <span class="n">left</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="k">else</span><span class="c1">//&#39;)&#39;</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">left</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
                    <span class="n">last</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="n">left</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">left</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
                        <span class="n">len</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">last</span><span class="p">;</span>
                    <span class="k">else</span>
                        <span class="n">len</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">left</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Minimum-Window-Substring"></span></p>

<h2>Minimum Window Substring</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/minimum-window-substring/">Minimum Window Substring</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">T</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">window</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">T</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">complexity</span><span class="w"> </span><span class="vg">O</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ADOBECODEBANC&quot;</span>
<span class="vg">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ABC&quot;</span>
<span class="vg">Minimum</span><span class="w"> </span><span class="vg">window</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="s2">&quot;BANC&quot;</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">window</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">covers</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">T</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">emtpy</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="o">.</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">multiple</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">windows</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">guaranteed</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">always</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">window</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">S</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>始终先找到一个包含所有T中的串，记录其window长度，然后继续往后扫面，到第二个合法的window的时候，前面begin指针往后，删除window中冗余的，期间比较window的size，记录一个最小的。有了一个window之后，后面的变化始终保持window中包含一个合法的T。 
用has[]表示找到的相应字符的数量，need[]表示T中应该有的数量。
例如：</p>
<div class="highlight"><pre><span class="vg">S</span><span class="err">＝</span><span class="w"> </span><span class="vg">acbbaca</span><span class="p">,</span><span class="w"> </span><span class="vg">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">aba</span>
<span class="vg">begin</span><span class="p">,</span><span class="vg">end</span><span class="err">扫描，</span><span class="p">[</span><span class="vg">acbba</span><span class="p">]</span><span class="vg">ca</span><span class="w"> </span><span class="err">第一个合法</span><span class="vg">window</span><span class="err">后，</span><span class="vg">end</span><span class="err">继续</span>
<span class="err">到</span><span class="p">[</span><span class="vg">acbbaca</span><span class="p">]</span><span class="err">发现第二个合法，</span><span class="vg">begin</span><span class="err">此时指向了</span><span class="vg">a</span><span class="err">，而此时</span><span class="vg">has</span><span class="p">[</span><span class="vg">a</span><span class="p">]</span><span class="o">=</span><span class="il">3</span><span class="o">&gt;</span><span class="vg">need</span><span class="p">[</span><span class="vg">a</span><span class="p">]</span><span class="o">=</span><span class="il">2</span><span class="err">，</span><span class="vg">a</span><span class="err">冗余，后移</span><span class="vg">begin</span><span class="err">，</span><span class="vg">has</span><span class="p">[</span><span class="vg">a</span><span class="p">]</span><span class="o">--</span><span class="p">;</span><span class="w"> </span>
<span class="vg">ac</span><span class="p">[</span><span class="vg">bbaca</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="vg">c</span><span class="err">不包含在</span><span class="vg">T</span><span class="err">中，直接略过，到</span><span class="vg">b</span><span class="p">,</span><span class="w"> </span><span class="vg">has</span><span class="p">[</span><span class="vg">b</span><span class="p">]</span><span class="o">=</span><span class="il">2</span><span class="o">&gt;</span><span class="vg">need</span><span class="p">[</span><span class="vg">b</span><span class="p">]</span><span class="o">=</span><span class="il">1</span><span class="p">,</span><span class="vg">b</span><span class="err">冗余，继续后移，并</span><span class="vg">has</span><span class="p">[</span><span class="vg">b</span><span class="p">]</span><span class="err">—</span><span class="p">;</span>
<span class="vg">acb</span><span class="p">[</span><span class="vg">baca</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="vg">has</span><span class="p">[</span><span class="vg">b</span><span class="p">]</span><span class="o">=</span><span class="vg">need</span><span class="p">[</span><span class="vg">b</span><span class="p">]</span><span class="err">不能减少了，记录这个短的</span><span class="vg">window</span><span class="p">,</span><span class="err">并于当前比较。</span>
<span class="err">其中</span><span class="vg">end</span><span class="o">/</span><span class="vg">start</span><span class="err">都只</span><span class="o">+</span><span class="err">不</span><span class="o">-</span><span class="err">，复杂度为</span><span class="vg">O</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="o">.</span>
</pre></div>
<p>代码如下：</p>
<div class="highlight"><pre>    <span class="n">string</span> <span class="nf">minWindow</span><span class="p">(</span><span class="n">string</span> <span class="n">S</span><span class="p">,</span> <span class="n">string</span> <span class="n">T</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">S</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">T</span><span class="p">.</span><span class="n">length</span><span class="p">())</span> <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">need</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">T</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">need</span><span class="p">[</span><span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">++</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">has</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">windowStart</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">minLen</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">minStart</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">windowEnd</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">windowEnd</span> <span class="o">&lt;</span> <span class="n">S</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">windowEnd</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">need</span><span class="p">[</span><span class="n">S</span><span class="p">[</span><span class="n">windowEnd</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span><span class="c1">//skip</span>
            <span class="k">if</span><span class="p">(</span><span class="n">has</span><span class="p">[</span><span class="n">S</span><span class="p">[</span><span class="n">windowEnd</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">need</span><span class="p">[</span><span class="n">S</span><span class="p">[</span><span class="n">windowEnd</span><span class="p">]])</span>
                <span class="o">++</span><span class="n">count</span><span class="p">;</span>
            <span class="o">++</span><span class="n">has</span><span class="p">[</span><span class="n">S</span><span class="p">[</span><span class="n">windowEnd</span><span class="p">]];</span>
            <span class="k">if</span><span class="p">(</span><span class="n">count</span> <span class="o">==</span> <span class="n">T</span><span class="p">.</span><span class="n">length</span><span class="p">())</span><span class="c1">//a window found</span>
            <span class="p">{</span>
                <span class="k">while</span><span class="p">(</span><span class="n">windowStart</span> <span class="o">&lt;</span> <span class="n">windowEnd</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">need</span><span class="p">[</span><span class="n">S</span><span class="p">[</span><span class="n">windowStart</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="c1">//skip</span>
                    <span class="p">{</span>
                        <span class="o">++</span><span class="n">windowStart</span><span class="p">;</span>
                    <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">has</span><span class="p">[</span><span class="n">S</span><span class="p">[</span><span class="n">windowStart</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">need</span><span class="p">[</span><span class="n">S</span><span class="p">[</span><span class="n">windowStart</span><span class="p">]])</span>
                    <span class="p">{</span>
                        <span class="o">--</span><span class="n">has</span><span class="p">[</span><span class="n">S</span><span class="p">[</span><span class="n">windowStart</span><span class="p">]];</span>
                        <span class="o">++</span><span class="n">windowStart</span><span class="p">;</span>
                    <span class="p">}</span><span class="k">else</span>
                    <span class="p">{</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">windowEnd</span> <span class="o">-</span> <span class="n">windowStart</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&lt;</span> <span class="n">minLen</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">minLen</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
                    <span class="n">minStart</span> <span class="o">=</span> <span class="n">windowStart</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">minLen</span> <span class="o">==</span> <span class="n">INT_MAX</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">S</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">minStart</span><span class="p">,</span> <span class="n">minLen</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><a href="http://www.cnblogs.com/lichen782/p/leetcode_minimum_window_substring_3.html">Ref</a></p>

<p><span id="Regular-Expression-Matching"></span></p>

<h2>Regular Expression Matching</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/regular-expression-matching/">Regular Expression Matching</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Implement</span><span class="w"> </span><span class="vg">regular</span><span class="w"> </span><span class="vg">expression</span><span class="w"> </span><span class="vg">matching</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">support</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="c1">&#39;.&#39; and &#39;*&#39;.</span>
<span class="c1">&#39;.&#39; Matches any single character.</span>
<span class="c1">&#39;*&#39; Matches zero or more of the preceding element.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">matching</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">cover</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">entire</span><span class="w"> </span><span class="vg">input</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="p">(</span><span class="vg">not</span><span class="w"> </span><span class="vg">partial</span><span class="p">)</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">prototype</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="nl">be:</span>
<span class="vg">bool</span><span class="w"> </span><span class="vg">isMatch</span><span class="p">(</span><span class="vg">const</span><span class="w"> </span><span class="vg">char</span><span class="w"> </span><span class="o">*</span><span class="vg">s</span><span class="p">,</span><span class="w"> </span><span class="vg">const</span><span class="w"> </span><span class="vg">char</span><span class="w"> </span><span class="o">*</span><span class="vg">p</span><span class="p">)</span>
<span class="vg">Some</span><span class="w"> </span><span class="nl">examples:</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">false</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="s2">&quot;aa&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">true</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aaa&quot;</span><span class="p">,</span><span class="s2">&quot;aa&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">false</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;a*&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">true</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;.*&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">true</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;.*&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">true</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aab&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;c*a*b&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">true</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>注意理解请题意，* 和前面的字符是一个整体, c* 可以表示&#39;&#39;, &#39;c&#39;,&#39;ccccc&#39; 等。&#39;.*&#39; 表示 &#39;[......]&#39;</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isMatch</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//.* ----&gt; .[......]</span>
            <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="o">*</span><span class="n">p</span> <span class="o">||</span> <span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">isMatch</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="o">+</span><span class="mi">2</span><span class="p">))</span>
                    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
                <span class="o">++</span><span class="n">s</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">isMatch</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="o">*</span><span class="n">p</span> <span class="o">||</span> <span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">isMatch</span><span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Reverse-Words-in-a-String"></span></p>

<h2>Reverse Words in a String</h2>

<blockquote>
<p>Given an input string, reverse the string word by word.
For example,
Given s = &quot;the sky is blue&quot;,
return &quot;blue is sky the&quot;.</p>
</blockquote>

<p>解题思路：类似矩阵转置的操作 (AB)^t = B^tA^t</p>

<p>例如 “hello world”.reverse = “dlrow olleh” 
然后针对每一个word进行reverse，拼接而成得到”world hello”</p>

<p>注意的地方: 
1. 全是空格的情况； 
2. 中间单词间隔多个空格； 
3. reverse最后一个单词。</p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">reverseWords</span><span class="p">(</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="n">start</span><span class="o">++</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="n">end</span><span class="o">--</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">end</span> <span class="o">&lt;</span> <span class="n">start</span><span class="p">)</span><span class="c1">//1.</span>
    <span class="p">{</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span> <span class="c1">//if all blank</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span> <span class="c1">//trim</span>
    <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">s</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="n">s</span> <span class="o">+=</span> <span class="sc">&#39; &#39;</span><span class="p">;</span> <span class="c1">//3. for the last word</span>
    <span class="n">string</span> <span class="n">result</span><span class="p">;</span>
    <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">){</span>
            <span class="n">string</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span><span class="c1">//tmp including &#39;_&#39;(blank)</span>
            <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">tmp</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">tmp</span><span class="p">.</span><span class="n">end</span><span class="p">());</span><span class="c1">//&#39;_word1_word2&#39;</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">tmp</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="n">i</span><span class="o">++</span><span class="p">;</span> <span class="c1">//2.</span>
            <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">())</span> 
                <span class="k">break</span><span class="p">;</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p>从<a href="https://oj.leetcode.com/discuss/3378/is-my-solution-good-enough">discuss</a>里面还看到了简短的代码～值得学习。 通过stringstream 一次提取一个单词出来, 然后将这个单词与上一次的结果连接(逆序)。</p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">reverseWords2</span><span class="p">(</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">stringstream</span> <span class="n">ss</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
    <span class="n">string</span> <span class="n">tmp</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">result</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">ss</span> <span class="o">&gt;&gt;</span> <span class="n">tmp</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">tmp</span> <span class="o">+=</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
        <span class="n">tmp</span> <span class="o">+=</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p><span id="Simplify-Path"></span></p>

<h2>Simplify Path</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/simplify-path/">Simplify Path</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">absolute</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">file</span><span class="w"> </span><span class="p">(</span><span class="vg">Unix</span><span class="o">-</span><span class="vg">style</span><span class="p">),</span><span class="w"> </span><span class="vg">simplify</span><span class="w"> </span><span class="vg">it</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/home/&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;/home&quot;</span>
<span class="vg">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/a/./b/../../c/&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;/c&quot;</span>
<span class="vg">Corner</span><span class="w"> </span><span class="nl">Cases:</span>
<span class="vg">Did</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">consider</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">case</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/../&quot;</span><span class="o">?</span>
<span class="vg">In</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">case</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="s2">&quot;/&quot;</span><span class="o">.</span>
<span class="vg">Another</span><span class="w"> </span><span class="vg">corner</span><span class="w"> </span><span class="vg">case</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">path</span><span class="w"> </span><span class="vg">might</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">multiple</span><span class="w"> </span><span class="vg">slashes</span><span class="w"> </span><span class="c1">&#39;/&#39; together, such as &quot;/home//foo/&quot;.</span>
<span class="vg">In</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">case</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">ignore</span><span class="w"> </span><span class="vg">redundant</span><span class="w"> </span><span class="vg">slashes</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="s2">&quot;/home/foo&quot;</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>把&quot;//&quot;替换成&quot;/&quot;然后split一下，用stack记录，&quot;..&quot;之类的就去掉。
这个Java写起来方便些。</p>

<p>主要就是一些testcase能否想到。</p>
<div class="highlight"><pre>    <span class="kd">public</span>  <span class="n">String</span> <span class="nf">simplifyPath</span><span class="o">(</span><span class="n">String</span> <span class="n">path</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">path</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">path</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="o">)</span> <span class="k">return</span> <span class="n">path</span><span class="o">;</span>
        <span class="c1">//assuming always start with &quot;/&quot;, //skip the first &quot;/&quot;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">length</span><span class="o">()-</span><span class="mi">1</span><span class="o">)</span> <span class="o">==</span> <span class="sc">&#39;/&#39;</span> <span class="o">)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">path</span><span class="o">.</span><span class="na">length</span><span class="o">()-</span><span class="mi">1</span><span class="o">);</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span> <span class="s">&quot;//&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span> <span class="o">);</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">strs</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">split</span><span class="o">(</span> <span class="s">&quot;/&quot;</span><span class="o">);</span>
        <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">ss</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">strs</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
        <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">strs</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;.&quot;</span> <span class="o">))</span>
                <span class="k">continue</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">strs</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;..&quot;</span> <span class="o">))</span>
            <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">ss</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
                    <span class="n">ss</span><span class="o">.</span><span class="na">pop</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">else</span>
            <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">strs</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">length</span><span class="o">()&gt;</span><span class="mi">0</span><span class="o">)</span>
                    <span class="n">ss</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">strs</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">ss2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
        <span class="k">while</span><span class="o">(</span><span class="n">ss</span><span class="o">.</span><span class="na">size</span><span class="o">()&gt;</span><span class="mi">0</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="n">ss2</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">ss</span><span class="o">.</span><span class="na">pop</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">ss2</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;/&quot;</span><span class="o">;</span>
        <span class="k">while</span><span class="o">(</span><span class="n">ss2</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">ss2</span><span class="o">.</span><span class="na">pop</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
</pre></div>
<p>C++ 一样的。</p>
<div class="highlight"><pre>    <span class="n">string</span> <span class="nf">simplifyPath</span><span class="p">(</span><span class="n">string</span> <span class="n">path</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">splits</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">path</span> <span class="o">+=</span> <span class="s">&quot;/&quot;</span><span class="p">;</span> <span class="c1">//make sure the last segment can put into splits.</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">path</span><span class="p">.</span><span class="n">length</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;/&#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
                    <span class="n">splits</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">start</span><span class="p">));</span> <span class="c1">//no including the current &#39;/&#39;(i-start+1)</span>
                    <span class="n">start</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">path</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;/&#39;</span><span class="p">)</span> <span class="c1">// ignore remain &#39;/&#39; of &quot;///&quot;</span>
                <span class="p">{</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="n">start</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">++</span><span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">splits</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span><span class="p">(</span><span class="n">splits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;/..&quot;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">result</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">splits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;/.&quot;</span><span class="p">)</span>
                <span class="p">;</span>
            <span class="k">else</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">splits</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="n">string</span> <span class="n">str_result</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">str_result</span> <span class="o">+=</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="n">str_result</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="s">&quot;/&quot;</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">str_result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Text-Justification"></span></p>

<h2>Text Justification</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/text-justification/">Text Justification</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">L</span><span class="p">,</span><span class="w"> </span><span class="vg">format</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">text</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">line</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">exactly</span><span class="w"> </span><span class="vg">L</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">fully</span><span class="w"> </span><span class="p">(</span><span class="vg">left</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">right</span><span class="p">)</span><span class="w"> </span><span class="vg">justified</span><span class="o">.</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">pack</span><span class="w"> </span><span class="vg">your</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">greedy</span><span class="w"> </span><span class="vg">approach</span><span class="p">;</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">is</span><span class="p">,</span><span class="w"> </span><span class="vg">pack</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">many</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">line</span><span class="o">.</span><span class="w"> </span><span class="vg">Pad</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">spaces</span><span class="w"> </span><span class="c1">&#39; &#39; when necessary so that each line has exactly L characters.</span>
<span class="vg">Extra</span><span class="w"> </span><span class="vg">spaces</span><span class="w"> </span><span class="vg">between</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">distributed</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">evenly</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">possible</span><span class="o">.</span><span class="w"> </span><span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">spaces</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">line</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">divide</span><span class="w"> </span><span class="vg">evenly</span><span class="w"> </span><span class="vg">between</span><span class="w"> </span><span class="vg">words</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">empty</span><span class="w"> </span><span class="vg">slots</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">left</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">assigned</span><span class="w"> </span><span class="vg">more</span><span class="w"> </span><span class="vg">spaces</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">slots</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">right</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">last</span><span class="w"> </span><span class="vg">line</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">text</span><span class="p">,</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">left</span><span class="w"> </span><span class="vg">justified</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">space</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">inserted</span><span class="w"> </span><span class="vg">between</span><span class="w"> </span><span class="vg">words</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="nl">words:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;This&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;is&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;an&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;example&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;of&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;justification.&quot;</span><span class="p">]</span>
<span class="nl">L:</span><span class="w"> </span><span class="il">16</span><span class="o">.</span><span class="w">  </span>
<span class="vg">Return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">formatted</span><span class="w"> </span><span class="vg">lines</span><span class="w"> </span><span class="nl">as:</span>
<span class="p">[</span>
<span class="w">   </span><span class="s2">&quot;This    is    an&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="s2">&quot;example  of text&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="s2">&quot;justification.  &quot;</span>
<span class="p">]</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">Each</span><span class="w"> </span><span class="vg">word</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">guaranteed</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">exceed</span><span class="w"> </span><span class="vg">L</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">length</span><span class="o">.</span>
<span class="vg">Corner</span><span class="w"> </span><span class="nl">Cases:</span>
<span class="vg">A</span><span class="w"> </span><span class="vg">line</span><span class="w"> </span><span class="vg">other</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">last</span><span class="w"> </span><span class="vg">line</span><span class="w"> </span><span class="vg">might</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">word</span><span class="o">.</span><span class="w"> </span><span class="vg">What</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">case</span><span class="o">?</span>
<span class="vg">In</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">case</span><span class="p">,</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">line</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">left</span><span class="o">-</span><span class="vg">justified</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>一步一步来即可。注意最后一行需要特殊处理。最后一行的空格尽量留在行末，而其他行是多余的空格尽量分布在行首。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">fullJustify</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">words</span><span class="p">,</span> <span class="kt">int</span> <span class="n">L</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">words</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">words</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">words</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="n">L</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="n">words</span><span class="p">);}</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">curIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">curLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">realwordLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">curIndex</span> <span class="o">&lt;</span> <span class="n">words</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">while</span><span class="p">(</span><span class="n">curIndex</span> <span class="o">&lt;</span> <span class="n">words</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">curLen</span> <span class="o">+</span> <span class="n">words</span><span class="p">[</span><span class="n">curIndex</span><span class="p">].</span><span class="n">length</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">L</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">curLen</span> <span class="o">+=</span> <span class="n">words</span><span class="p">[</span><span class="n">curIndex</span><span class="p">].</span><span class="n">length</span><span class="p">();</span>
                <span class="n">realwordLen</span> <span class="o">+=</span> <span class="n">words</span><span class="p">[</span><span class="n">curIndex</span><span class="p">].</span><span class="n">length</span><span class="p">();</span>
                <span class="k">if</span><span class="p">(</span><span class="n">curLen</span> <span class="o">!=</span> <span class="n">L</span><span class="p">)</span>
                    <span class="o">++</span><span class="n">curLen</span><span class="p">;</span><span class="c1">//blank</span>
                <span class="o">++</span><span class="n">curIndex</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="c1">//curLen + words[curIndex].length() &gt; L, can not use curIndex</span>
            <span class="p">{</span>
                <span class="kt">int</span> <span class="n">blank</span> <span class="o">=</span> <span class="n">L</span> <span class="o">-</span> <span class="n">realwordLen</span><span class="p">;</span>
                <span class="kt">int</span> <span class="n">wordCount</span> <span class="o">=</span> <span class="n">curIndex</span> <span class="o">-</span> <span class="n">lastIndex</span><span class="p">;</span>
                <span class="kt">int</span> <span class="n">eachblank</span> <span class="o">=</span> <span class="n">wordCount</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">?</span> <span class="nl">blank</span> <span class="p">:</span> <span class="n">blank</span> <span class="o">/</span> <span class="p">(</span><span class="n">wordCount</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                <span class="kt">int</span> <span class="n">moreblank</span> <span class="o">=</span> <span class="n">wordCount</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">blank</span> <span class="o">%</span> <span class="p">(</span><span class="n">wordCount</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                <span class="n">string</span> <span class="n">line</span><span class="p">;</span>
                <span class="n">string</span> <span class="n">eachblankstr</span><span class="p">;</span>
                <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">eachblank</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                    <span class="n">eachblankstr</span> <span class="o">+=</span> <span class="sc">&#39; &#39;</span><span class="p">;</span>
                <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">=</span> <span class="n">lastIndex</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">curIndex</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">line</span> <span class="o">+=</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">wordCount</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">curIndex</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//last one</span>
                    <span class="p">{</span>
                        <span class="n">line</span> <span class="o">+=</span> <span class="n">eachblankstr</span><span class="p">;</span>
                        <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">moreblank</span><span class="p">)</span>
                            <span class="n">line</span> <span class="o">+=</span> <span class="sc">&#39; &#39;</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">line</span><span class="p">);</span>
                <span class="n">lastIndex</span> <span class="o">=</span> <span class="n">curIndex</span><span class="p">;</span>
                <span class="n">curLen</span> <span class="o">=</span> <span class="n">realwordLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">//special deal with last line</span>
        <span class="n">string</span> <span class="n">lastline</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
        <span class="n">string</span> <span class="nf">lastlineshould</span><span class="p">(</span><span class="n">lastline</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="sc">&#39; &#39;</span><span class="p">);</span>
        <span class="kt">bool</span> <span class="n">blank</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">L</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">lastline</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">lastlineshould</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">lastline</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                <span class="n">blank</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">blank</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">blank</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
                <span class="n">lastlineshould</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39; &#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="o">++</span><span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">lastlineshould</span><span class="p">;</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Valid-Parentheses"></span></p>

<h2>Valid Parentheses</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/valid-parentheses/">Valid Parentheses</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">containing</span><span class="w"> </span><span class="vg">just</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">characters</span><span class="w"> </span><span class="c1">&#39;(&#39;, &#39;)&#39;, &#39;{&#39;, &#39;}&#39;, &#39;[&#39; and &#39;]&#39;, determine if the input string is valid.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">brackets</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">close</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">correct</span><span class="w"> </span><span class="vg">order</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;()&quot;</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="s2">&quot;()[]{}&quot;</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">valid</span><span class="w"> </span><span class="vg">but</span><span class="w"> </span><span class="s2">&quot;(]&quot;</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="s2">&quot;([)]&quot;</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">not</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>用stack. </p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">isValid</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="n">stack</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">ss</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">switch</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
       <span class="p">{</span>
           <span class="k">case</span> <span class="sc">&#39;(&#39;</span><span class="o">:</span>
           <span class="k">case</span> <span class="sc">&#39;[&#39;</span><span class="o">:</span>
           <span class="k">case</span> <span class="sc">&#39;{&#39;</span><span class="o">:</span>
               <span class="n">ss</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
               <span class="k">break</span><span class="p">;</span>
           <span class="k">case</span> <span class="sc">&#39;)&#39;</span><span class="o">:</span>
               <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">ss</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">ss</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">==</span> <span class="sc">&#39;(&#39;</span><span class="p">)</span>
                   <span class="n">ss</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
               <span class="k">else</span>
                   <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
               <span class="k">break</span><span class="p">;</span>
           <span class="k">case</span> <span class="sc">&#39;]&#39;</span><span class="o">:</span>
               <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">ss</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">ss</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">==</span> <span class="sc">&#39;[&#39;</span><span class="p">)</span>
                   <span class="n">ss</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
               <span class="k">else</span>
                   <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
               <span class="k">break</span><span class="p">;</span>
           <span class="k">case</span> <span class="sc">&#39;}&#39;</span><span class="o">:</span>
               <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">ss</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">ss</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">==</span> <span class="sc">&#39;{&#39;</span><span class="p">)</span>
                   <span class="n">ss</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
               <span class="k">else</span>
                   <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
               <span class="k">break</span><span class="p">;</span>
           <span class="k">default</span><span class="o">:</span>
               <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
       <span class="p">}</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">ss</span><span class="p">.</span><span class="n">empty</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
<p><span id="Wildcard-Matching"></span></p>

<h2>Wildcard Matching</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/wildcard-matching/">Wildcard Matching</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Implement</span><span class="w"> </span><span class="vg">wildcard</span><span class="w"> </span><span class="vg">pattern</span><span class="w"> </span><span class="vg">matching</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">support</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="c1">&#39;?&#39; and &#39;*&#39;.</span>
<span class="c1">&#39;?&#39; Matches any single character.</span>
<span class="c1">&#39;*&#39; Matches any sequence of characters (including the empty sequence).</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">matching</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">cover</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">entire</span><span class="w"> </span><span class="vg">input</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="p">(</span><span class="vg">not</span><span class="w"> </span><span class="vg">partial</span><span class="p">)</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">prototype</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="nl">be:</span>
<span class="vg">bool</span><span class="w"> </span><span class="vg">isMatch</span><span class="p">(</span><span class="vg">const</span><span class="w"> </span><span class="vg">char</span><span class="w"> </span><span class="o">*</span><span class="vg">s</span><span class="p">,</span><span class="w"> </span><span class="vg">const</span><span class="w"> </span><span class="vg">char</span><span class="w"> </span><span class="o">*</span><span class="vg">p</span><span class="p">)</span>
<span class="vg">Some</span><span class="w"> </span><span class="nl">examples:</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">false</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="s2">&quot;aa&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">true</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aaa&quot;</span><span class="p">,</span><span class="s2">&quot;aa&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">false</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;*&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">true</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;a*&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">true</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;?*&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">true</span>
<span class="vg">isMatch</span><span class="p">(</span><span class="s2">&quot;aab&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;c*a*b&quot;</span><span class="p">)</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="vg">false</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟 <a href="#Regular-Expression-Matching">regular-expression-matching</a> 类似。</p>

<h3>递归</h3>

<p>主要是考虑 “*” 匹配任意字符的问题， 下面代码超时了。</p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">isMatch</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span> <span class="o">||</span> <span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span> <span class="n">p</span><span class="o">++</span><span class="p">;</span><span class="c1">//skip all continous * </span>
        <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">isMatch</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> 
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="n">s</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">p</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="o">*</span><span class="n">p</span> <span class="o">||</span> <span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;?&#39;</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">s</span><span class="o">++</span><span class="p">;</span> <span class="n">p</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h3>迭代</h3>

<p>Key point, compare char one by one, if not matched, and &#39;*&#39; matched before, then pattern backtrace to &#39;*&#39;, and string backtrace to the later one of compared char of last iterative time. 
参考了 <a href="http://discuss.leetcode.com/questions/222/wildcard-matching">discuss.leetcode</a>.</p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">isMatch</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span> <span class="o">||</span> <span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="n">s</span> <span class="o">==</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">star_p</span><span class="o">=</span><span class="nb">NULL</span><span class="p">,</span><span class="o">*</span><span class="n">star_s</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;?&#39;</span> <span class="o">||</span> <span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="o">++</span><span class="n">p</span><span class="p">,</span><span class="o">++</span><span class="n">s</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//skip all continuous &#39;*&#39;</span>
            <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">p</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span> <span class="o">++</span><span class="n">p</span><span class="p">;</span>

            <span class="k">if</span><span class="p">(</span><span class="o">!*</span><span class="n">p</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">//if end with &#39;*&#39;, its match.</span>

            <span class="n">star_p</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span> <span class="c1">//star_p is later char of &#39;*&#39;,</span>
            <span class="n">star_s</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span> <span class="c1">//store &#39;*&#39; pos for string</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">((</span><span class="o">!*</span><span class="n">p</span> <span class="o">||</span> <span class="o">*</span><span class="n">p</span> <span class="o">!=</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span>  <span class="o">&amp;&amp;</span> <span class="n">star_p</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">s</span> <span class="o">=</span> <span class="o">++</span><span class="n">star_s</span><span class="p">;</span> <span class="c1">//skip non-match char of string, regard it matched in &#39;*&#39;</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">star_p</span><span class="p">;</span> <span class="c1">//pattern backtrace to later char of &#39;*&#39;</span>
        <span class="p">}</span><span class="k">else</span>
            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//check if later part of p are all &#39;*&#39;</span>
    <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="o">++</span> <span class="o">!=</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id="ZigZag-Conversion"></span></p>

<h2>ZigZag Conversion</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/zigzag-conversion/">ZigZag Conversion</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">The</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="s2">&quot;PAYPALISHIRING&quot;</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">written</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">zigzag</span><span class="w"> </span><span class="vg">pattern</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">rows</span><span class="w"> </span><span class="vg">like</span><span class="w"> </span><span class="nl">this:</span><span class="w"> </span><span class="p">(</span><span class="vg">you</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">want</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">display</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">pattern</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">fixed</span><span class="w"> </span><span class="vg">font</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">better</span><span class="w"> </span><span class="vg">legibility</span><span class="p">)</span>
<span class="vg">P</span><span class="w">   </span><span class="vg">A</span><span class="w">   </span><span class="vg">H</span><span class="w">   </span><span class="vg">N</span>
<span class="vg">A</span><span class="w"> </span><span class="vg">P</span><span class="w"> </span><span class="vg">L</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="vg">I</span><span class="w"> </span><span class="vg">I</span><span class="w"> </span><span class="vg">G</span>
<span class="vg">Y</span><span class="w">   </span><span class="vg">I</span><span class="w">   </span><span class="vg">R</span>
<span class="vg">And</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">read</span><span class="w"> </span><span class="vg">line</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="nl">line:</span><span class="w"> </span><span class="s2">&quot;PAHNAPLSIIGYIR&quot;</span>
<span class="vg">Write</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">take</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">make</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">conversion</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="nl">rows:</span>
<span class="vg">string</span><span class="w"> </span><span class="vg">convert</span><span class="p">(</span><span class="vg">string</span><span class="w"> </span><span class="vg">text</span><span class="p">,</span><span class="w"> </span><span class="vg">int</span><span class="w"> </span><span class="vg">nRows</span><span class="p">);</span>
<span class="vg">convert</span><span class="p">(</span><span class="s2">&quot;PAYPALISHIRING&quot;</span><span class="p">,</span><span class="w"> </span><span class="il">3</span><span class="p">)</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="s2">&quot;PAHNAPLSIIGYIR&quot;</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>对勾的形式一个周期～hash一下到具体哪一个row～</p>
<div class="highlight"><pre><span class="nl">0</span><span class="w">           </span><span class="il">0</span><span class="w">           </span><span class="il">0</span>
<span class="nl">1</span><span class="w">       </span><span class="il">5</span><span class="w">   </span><span class="il">1</span><span class="w">       </span><span class="il">5</span>
<span class="nl">2</span><span class="w">   </span><span class="il">4</span><span class="w">       </span><span class="il">2</span><span class="w">   </span><span class="il">4</span>
<span class="nl">3</span><span class="w">           </span><span class="il">3</span>
</pre></div><div class="highlight"><pre><span class="n">string</span> <span class="nf">convert</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nRows</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">if</span><span class="p">(</span><span class="n">nRows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">rows</span><span class="p">(</span><span class="n">nRows</span><span class="p">);</span>
   <span class="kt">int</span> <span class="n">T</span> <span class="o">=</span> <span class="n">nRows</span> <span class="o">+</span> <span class="n">nRows</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="kt">int</span> <span class="n">bucket</span> <span class="o">=</span> <span class="n">i</span> <span class="o">%</span> <span class="n">T</span><span class="p">;</span>
       <span class="n">bucket</span> <span class="o">=</span> <span class="n">bucket</span> <span class="o">&gt;=</span> <span class="n">nRows</span> <span class="o">?</span> <span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">bucket</span><span class="p">)</span> <span class="o">:</span> <span class="n">bucket</span><span class="p">;</span>
       <span class="n">rows</span><span class="p">[</span><span class="n">bucket</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
   <span class="p">}</span>
   <span class="n">string</span> <span class="n">result</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">;</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nRows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">size</span><span class="p">();</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
           <span class="n">result</span> <span class="o">+=</span> <span class="n">rows</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h1>combination and permutation, 排列组合相关</h1>

<p><span id="Combinations"></span></p>

<h2>Combinations</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/combinations/">Combinations</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">integers</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">k</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">combinations</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">out</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="vg">n</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">4</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="nl">is:</span>
</pre></div></blockquote>
<div class="highlight"><pre><span class="cp">[</span>
  <span class="err">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="cp">]</span><span class="x">,</span>
<span class="x">  </span><span class="cp">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="cp">]</span><span class="x">,</span>
<span class="x">  </span><span class="cp">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="cp">]</span><span class="x">,</span>
<span class="x">  </span><span class="cp">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="cp">]</span><span class="x">,</span>
<span class="x">  </span><span class="cp">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="cp">]</span><span class="x">,</span>
<span class="x">  </span><span class="cp">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="cp">]</span><span class="x">,</span>
<span class="x">]</span>
</pre></div>
<p>解题思路：</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">input</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">k</span><span class="p">){</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="n">input</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="n">search</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
            <span class="n">input</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">combine</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">k</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">input</span><span class="p">;</span>
        <span class="n">search</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Combination-Sum"></span></p>

<h2>Combination Sum</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/combination-sum/">combination Sum</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">candidate</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="p">(</span><span class="vg">C</span><span class="p">)</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="p">(</span><span class="vg">T</span><span class="p">),</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">combinations</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">C</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">candidate</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">sums</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">T</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">same</span><span class="w"> </span><span class="vg">repeated</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">chosen</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">C</span><span class="w"> </span><span class="vg">unlimited</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">times</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">All</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="p">(</span><span class="vg">including</span><span class="w"> </span><span class="vg">target</span><span class="p">)</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">positive</span><span class="w"> </span><span class="vg">integers</span><span class="o">.</span>
<span class="vg">Elements</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">combination</span><span class="w"> </span><span class="p">(</span><span class="vg">a1</span><span class="p">,</span><span class="w"> </span><span class="vg">a2</span><span class="p">,</span><span class="w"> </span><span class="err">…</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="vg">ak</span><span class="p">)</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">descending</span><span class="w"> </span><span class="vg">order</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">a1</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">a2</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="err">…</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">ak</span><span class="p">)</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">duplicate</span><span class="w"> </span><span class="vg">combinations</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">candidate</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">6</span><span class="p">,</span><span class="il">7</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="il">7</span><span class="p">,</span><span class="w"> </span>
<span class="vg">A</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="nl">is:</span><span class="w"> </span>
<span class="p">[</span><span class="il">7</span><span class="p">]</span><span class="w"> </span>
<span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="il">3</span><span class="p">]</span><span class="w"> </span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>深搜, 排序后一个一个往里面加，注意是组合，比如当前加到2了，2还可以加，但2以前的就不能加了。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">&gt;</span> <span class="n">target</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">&lt;</span> <span class="n">target</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span><span class="n">path</span><span class="p">[</span><span class="n">path</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
            <span class="p">{</span>
                <span class="n">sum</span> <span class="o">+=</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">sum</span><span class="p">,</span> <span class="n">target</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
                <span class="n">sum</span> <span class="o">-=</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">combinationSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">candidates</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">candidates</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">candidates</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">candidates</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">candidates</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Combination-Sum-II"></span></p>

<h2>Combination Sum II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/combination-sum-ii/">combination Sum II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">collection</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">candidate</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="p">(</span><span class="vg">C</span><span class="p">)</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="p">(</span><span class="vg">T</span><span class="p">),</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">combinations</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">C</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">candidate</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">sums</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">T</span><span class="o">.</span>
<span class="vg">Each</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">C</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">used</span><span class="w"> </span><span class="vg">once</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">combination</span><span class="o">.</span><span class="w">  </span>
<span class="nl">Note:</span>
<span class="vg">All</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="p">(</span><span class="vg">including</span><span class="w"> </span><span class="vg">target</span><span class="p">)</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">positive</span><span class="w"> </span><span class="vg">integers</span><span class="o">.</span>
<span class="vg">Elements</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">combination</span><span class="w"> </span><span class="p">(</span><span class="vg">a1</span><span class="p">,</span><span class="w"> </span><span class="vg">a2</span><span class="p">,</span><span class="w"> </span><span class="err">…</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="vg">ak</span><span class="p">)</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">descending</span><span class="w"> </span><span class="vg">order</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">a1</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">a2</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="err">…</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="vg">ak</span><span class="p">)</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">duplicate</span><span class="w"> </span><span class="vg">combinations</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">candidate</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="il">10</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">7</span><span class="p">,</span><span class="il">6</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">5</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">target</span><span class="w"> </span><span class="il">8</span><span class="p">,</span><span class="w"> </span>
<span class="vg">A</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="nl">is:</span><span class="w"> </span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="il">7</span><span class="p">]</span><span class="w"> </span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="il">5</span><span class="p">]</span><span class="w"> </span>
<span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="il">6</span><span class="p">]</span><span class="w"> </span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="il">6</span><span class="p">]</span><span class="w"> </span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟 <a href="#Combination-Sum">combination-sum</a> 一样, DFS，在它的基础上，将用过的跳过即可。重复的数字，后面的要跳过，不然结果有重复的。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">&gt;</span> <span class="n">target</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">sum</span> <span class="o">+=</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">sum</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
                <span class="n">sum</span> <span class="o">-=</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="n">i</span><span class="o">++</span><span class="p">;</span> <span class="c1">////ignore the next same one,so that remove the duplicated result</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">combinationSum2</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> 
    <span class="p">{</span>
         <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Letter-Combinations-of-a-Phone-Number"></span></p>

<h2>Letter Combinations of a Phone Number</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/letter-combinations-of-a-phone-number/">Letter Combinations of a Phone Number</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">digit</span><span class="w"> </span><span class="vg">string</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">letter</span><span class="w"> </span><span class="vg">combinations</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">could</span><span class="w"> </span><span class="vg">represent</span><span class="o">.</span>
<span class="vg">A</span><span class="w"> </span><span class="vg">mapping</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">digit</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">letters</span><span class="w"> </span><span class="p">(</span><span class="vg">just</span><span class="w"> </span><span class="vg">like</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">telephone</span><span class="w"> </span><span class="vg">buttons</span><span class="p">)</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">below</span><span class="o">.</span>
</pre></div>
<p><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Telephone-keypad2.svg/200px-Telephone-keypad2.svg.png" alt=""></p>
<div class="highlight"><pre><span class="n">Input</span><span class="o">:</span><span class="n">Digit</span> <span class="n">string</span> <span class="s2">&quot;23&quot;</span>
<span class="n">Output</span><span class="o">:</span> <span class="o">[</span><span class="s2">&quot;ad&quot;</span><span class="o">,</span> <span class="s2">&quot;ae&quot;</span><span class="o">,</span> <span class="s2">&quot;af&quot;</span><span class="o">,</span> <span class="s2">&quot;bd&quot;</span><span class="o">,</span> <span class="s2">&quot;be&quot;</span><span class="o">,</span> <span class="s2">&quot;bf&quot;</span><span class="o">,</span> <span class="s2">&quot;cd&quot;</span><span class="o">,</span> <span class="s2">&quot;ce&quot;</span><span class="o">,</span> <span class="s2">&quot;cf&quot;</span><span class="o">].</span>
<span class="n">Note</span><span class="o">:</span>
<span class="n">Although</span> <span class="n">the</span> <span class="n">above</span> <span class="n">answer</span> <span class="k">is</span> <span class="k">in</span> <span class="n">lexicographical</span> <span class="n">order</span><span class="o">,</span> <span class="n">your</span> <span class="n">answer</span> <span class="n">could</span> <span class="n">be</span> <span class="k">in</span> <span class="n">any</span> <span class="n">order</span> <span class="n">you</span> <span class="n">want</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>排列组合问题.</p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">input</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">numMap</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">start</span> <span class="o">==</span> <span class="n">input</span><span class="p">.</span><span class="n">length</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">input</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numMap</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">str</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">=</span> <span class="n">numMap</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">i</span><span class="p">];</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">str</span><span class="p">,</span> <span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="n">numMap</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">letterCombinations</span><span class="p">(</span><span class="n">string</span> <span class="n">digits</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">numMap</span><span class="p">({</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="s">&quot;abc&quot;</span><span class="p">,</span><span class="s">&quot;def&quot;</span><span class="p">,</span><span class="s">&quot;ghi&quot;</span><span class="p">,</span><span class="s">&quot;jkl&quot;</span><span class="p">,</span><span class="s">&quot;mno&quot;</span><span class="p">,</span><span class="s">&quot;pqrs&quot;</span><span class="p">,</span><span class="s">&quot;tuv&quot;</span><span class="p">,</span><span class="s">&quot;wxyz&quot;</span><span class="p">});</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">digits</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">);</span><span class="c1">//special case in oj</span>
    <span class="n">string</span> <span class="nf">str</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="sc">&#39;.&#39;</span><span class="p">);</span>
    <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">str</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">digits</span><span class="p">,</span> <span class="n">numMap</span><span class="p">);</span>
    <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p><span id="Next-Permutation"></span></p>

<h2>Next Permutation</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/next-permutation/">Next Permutation</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Implement</span><span class="w"> </span><span class="vg">next</span><span class="w"> </span><span class="vg">permutation</span><span class="p">,</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">rearranges</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">into</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">lexicographically</span><span class="w"> </span><span class="vg">next</span><span class="w"> </span><span class="vg">greater</span><span class="w"> </span><span class="vg">permutation</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">numbers</span><span class="o">.</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">arrangement</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">possible</span><span class="p">,</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">rearrange</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">lowest</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">sorted</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">ascending</span><span class="w"> </span><span class="vg">order</span><span class="p">)</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">replacement</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">in</span><span class="o">-</span><span class="vg">place</span><span class="p">,</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">allocate</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">memory</span><span class="o">.</span>
<span class="vg">Here</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">some</span><span class="w"> </span><span class="vg">examples</span><span class="o">.</span><span class="w"> </span><span class="vg">Inputs</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">left</span><span class="o">-</span><span class="vg">hand</span><span class="w"> </span><span class="vg">column</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">corresponding</span><span class="w"> </span><span class="vg">outputs</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">right</span><span class="o">-</span><span class="vg">hand</span><span class="w"> </span><span class="vg">column</span><span class="o">.</span>
<span class="nl">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">2</span>
<span class="nl">3</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span>
<span class="nl">1</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">5</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="il">5</span><span class="p">,</span><span class="il">1</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>这里 <a href="#Permutations-Ii">permutations-ii</a>其实已经实现过一次了。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">nextPermutation</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//2 [3] 5 4 1</span>
        <span class="k">while</span><span class="p">(</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">num</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>  
            <span class="o">--</span><span class="n">index</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="o">--</span><span class="n">index</span><span class="p">;</span> <span class="c1">//[3]</span>
        <span class="kt">int</span> <span class="n">bigger</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">//find[4]</span>
        <span class="k">while</span><span class="p">(</span><span class="n">bigger</span> <span class="o">!=</span> <span class="n">index</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">bigger</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">num</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
            <span class="o">--</span><span class="n">bigger</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">bigger</span><span class="p">]);</span>
        <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Palindrome-Partitioning"></span></p>

<h2>Palindrome Partitioning</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/palindrome-partitioning/">Palindrome Partitioning</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">s</span><span class="p">,</span><span class="w"> </span><span class="vg">partition</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">every</span><span class="w"> </span><span class="vg">substring</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">partition</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span>
<span class="vg">palindrome</span><span class="o">.</span>

<span class="vg">Return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">palindrome</span><span class="w"> </span><span class="vg">partitioning</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">s</span><span class="o">.</span>

<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;aab&quot;</span><span class="p">,</span>
<span class="vg">Return</span>

<span class="p">[</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
<p>解题思路：</p>

<h3>直接暴力解决</h3>

<p>枚举每种可能，去判读是否回文。跟<a href="http://tanglei.me/tags.html#%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88-ref">排列组合</a>算法一样。
还可以优化，把中间的某个子串是否回文用hash缓存下来。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">isPalindrome</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">right</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="n">left</span><span class="o">++</span><span class="p">;</span>
                <span class="n">right</span><span class="o">--</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span> 
    <span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">==</span> <span class="n">n</span><span class="p">)</span> 
        <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">isPalindrome</span><span class="p">(</span><span class="n">str</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
                <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">partition</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
        <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>利用动态规划 O(n^2)</h3>

<p><code>dp[i:j]</code>表示<code>s[i:j]</code>是回文,  如果<code>s[i] == s[j] and dp[i+1, j-1]</code>,满足条件, 则dp[i:j]就是回文。 
注意要先算dp[i+1][j-1]，所以循环的顺序。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dp</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">==</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()){</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">start</span><span class="p">][</span><span class="n">i</span><span class="p">]){</span>
                <span class="n">string</span> <span class="n">sub</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">sub</span><span class="p">);</span>
                <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">dp</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">partitionDp</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">));</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="c1">//init, single char is palindrome</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="c1">//dp[i:j] s[i:j] is palindrome,  need dp[i+1, j-1], i need i+1, should downto, j need j-1, should upto</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&gt;</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
        <span class="n">search</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">dp</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>其实像上面那样把每一个回文子串找出来后，就不用像排列组合那样去搜索了，可以直接构造。这个参考了<a href="https://github.com/soulmachine/leetcode">leetcode-cpp</a>。
<code>result[i]</code> 表示s[i:n]构成的回文串拆分结果。再走一遍dp就可以构造出来。方法如下:
result[i]的结果为当前的回文串 插入每一个 result[i+1]构成。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">partitionDp</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">));</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="c1">//init, single char is palindrome</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="c1">//dp[i:j] s[i:j] is palindrome,  need dp[i+1, j-1], i need i+1, should downto, j need j-1, should upto</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&gt;</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;&gt;</span> <span class="n">result</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">());</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span>
                <span class="p">{</span>
                    <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">next</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
                        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">next</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">auto</span> <span class="n">v</span> <span class="o">=</span> <span class="n">next</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>
                            <span class="n">v</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">str</span><span class="p">);</span>
                            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                        <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">str</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Permutation-Sequence"></span></p>

<h2>Permutation Sequence</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/permutation-sequence/">Permutation Sequence</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">The</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="err">…</span><span class="p">,</span><span class="vg">n</span><span class="p">]</span><span class="w"> </span><span class="vg">contains</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">n!</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">permutations</span><span class="o">.</span>
<span class="vg">By</span><span class="w"> </span><span class="vg">listing</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">labeling</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">permutations</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">order</span><span class="p">,</span>
<span class="vg">We</span><span class="w"> </span><span class="vg">get</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3</span><span class="p">)</span><span class="o">:</span>
<span class="s2">&quot;123&quot;</span>
<span class="s2">&quot;132&quot;</span>
<span class="s2">&quot;213&quot;</span>
<span class="s2">&quot;231&quot;</span>
<span class="s2">&quot;312&quot;</span>
<span class="s2">&quot;321&quot;</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">k</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">kth</span><span class="w"> </span><span class="vg">permutation</span><span class="w"> </span><span class="vg">sequence</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">between</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="il">9</span><span class="w"> </span><span class="vg">inclusive</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>
<div class="highlight"><pre><span class="err">康托展开的逆运算</span>
<span class="err">既然康托展开是一个双射，那么一定可以通过康托展开值求出原排列，即可以求出</span><span class="vg">n</span><span class="err">的全排列中第</span><span class="vg">x</span><span class="err">大排列。</span>
<span class="err">如</span><span class="vg">n</span><span class="o">=</span><span class="il">5</span><span class="p">,</span><span class="vg">x</span><span class="o">=</span><span class="il">96</span><span class="err">时：</span>
<span class="err">首先用</span><span class="il">96-1</span><span class="err">得到</span><span class="il">95</span><span class="err">，说明</span><span class="vg">x</span><span class="err">之前有</span><span class="il">95</span><span class="err">个排列</span><span class="o">.</span><span class="p">(</span><span class="err">将此数本身减去！</span><span class="p">)</span>
<span class="err">用</span><span class="il">95</span><span class="err">去除</span><span class="il">4</span><span class="o">!</span><span class="w"> </span><span class="err">得到</span><span class="il">3</span><span class="err">余</span><span class="il">23</span><span class="err">，说明有</span><span class="il">3</span><span class="err">个数比第</span><span class="il">1</span><span class="err">位小，所以第一位是</span><span class="il">4</span><span class="o">.</span>
<span class="err">用</span><span class="il">23</span><span class="err">去除</span><span class="il">3</span><span class="o">!</span><span class="w"> </span><span class="err">得到</span><span class="il">3</span><span class="err">余</span><span class="il">5</span><span class="err">，说明有</span><span class="il">3</span><span class="err">个数比第</span><span class="il">2</span><span class="err">位小，所以是</span><span class="il">4</span><span class="err">，但是</span><span class="il">4</span><span class="err">已出现过，因此是</span><span class="il">5</span><span class="o">.</span>
<span class="err">用</span><span class="il">5</span><span class="err">去除</span><span class="il">2</span><span class="o">!</span><span class="err">得到</span><span class="il">2</span><span class="err">余</span><span class="il">1</span><span class="err">，类似地，这一位是</span><span class="il">3</span><span class="o">.</span>
<span class="err">用</span><span class="il">1</span><span class="err">去除</span><span class="il">1</span><span class="o">!</span><span class="err">得到</span><span class="il">1</span><span class="err">余</span><span class="il">0</span><span class="err">，这一位是</span><span class="il">2</span><span class="o">.</span>
<span class="err">最后一位只能是</span><span class="il">1</span><span class="o">.</span>
<span class="err">所以这个数是</span><span class="il">45321</span><span class="o">.</span>
</pre></div>
<p>代码如下：</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">jiecheng</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">f</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">f</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">string</span> <span class="nf">getPermutation</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">f</span><span class="p">;</span>
        <span class="n">jiecheng</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
        <span class="n">string</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">small</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">small</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="n">k</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">bigger</span> <span class="o">=</span> <span class="n">k</span> <span class="o">/</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">f</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">small</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="n">bigger</span><span class="p">)</span> <span class="o">+</span> <span class="sc">&#39;0&#39;</span><span class="p">);</span>
            <span class="n">small</span><span class="p">.</span><span class="n">erase</span><span class="p">((</span><span class="n">small</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="n">bigger</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>参考 
- <a href="http://baike.baidu.com/view/437641.htm">康托展开</a>
- <a href="http://blog.csdn.net/doc_sgl/article/details/12840715">Leetcode: Permutation Sequence</a>
<a href="http://blog.csdn.net/MrRoyLee/article/details/34981399">http://blog.csdn.net/MrRoyLee/article/details/34981399</a> </p>

<p><span id="Permutations"></span></p>

<h2>Permutations</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/permutations/">Permutations</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">collection</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">numbers</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">permutations</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">]</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="nl">permutations:</span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">2</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">1</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="il">3</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">],</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="p">[</span><span class="il">3</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">]</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>置换法</h3>

<p>递归, 一个一个与第一个交换。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="c1">// &gt;= &quot;&gt;&quot;also should be put in, for the last ele.</span>
        <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="p">]);</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
            <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">permute</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>增量构造法</h3>

<p>可以跟 <a href="#Combinations">combinations</a> 类似, 一个一个往里面加。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">find</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">path</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">path</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">permute</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">path</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>nextPermunation</h3>

<p>参考 <a href="#Permutations-Ii">permutations-ii</a>.</p>

<p><span id="Permutations-II"></span></p>

<h2>Permutations II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/permutations-ii/">Permutations II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">collection</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">numbers</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">might</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">duplicates</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">permutations</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">]</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="nl">permutations:</span>
<span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">],</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">1</span><span class="p">]</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟 <a href="#Permutations">Permutations</a>思路差不多，分为下面几种解法。</p>

<h3>置换法</h3>

<p>跟<a href="#Permutations">Permutations</a>一样，每一个与第一个交换～用set存结果，将重复的去掉，中途剪枝下即可AC。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">set</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="c1">// &gt;= &quot;&gt;&quot;also should be put in, for the last ele.</span>
        <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="n">start</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">continue</span><span class="p">;</span> <span class="c1">//culling</span>
            <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="p">]);</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
            <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">start</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">permuteUnique</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">set</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">result</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="p">}</span>
</pre></div>
<h3>增量构造</h3>

<p>或者跟permutation的方法，增量构造, 这里需要用一个map存下数量。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">path</span><span class="p">,</span> <span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">countMap</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
         <span class="c1">//for(int i = 0; i &lt; num.size(); i++)//num has redundant numbers,cannot use thisone</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">countMap</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">countMap</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">itj</span> <span class="o">=</span> <span class="n">path</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">itj</span> <span class="o">!=</span> <span class="n">path</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">itj</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">itj</span> <span class="o">==</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span><span class="p">)</span> <span class="o">++</span><span class="n">cnt</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="n">cnt</span> <span class="o">&lt;</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span><span class="p">);</span>
                <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">countMap</span><span class="p">);</span>
                <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">permuteUnique</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">countMap</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>
            <span class="o">++</span><span class="n">countMap</span><span class="p">[</span><span class="o">*</span><span class="n">it</span><span class="p">];</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">;</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">path</span><span class="p">,</span> <span class="n">countMap</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>next_permunation</h3>

<p>自然序的下一个：1 3 5 4 2，从后往前找，找到第一个降序(从后往前看)的数字3，然后找后面的比3大的最小的数字4，交换，1 4 5 3 2，然后交换index后面的序列逆序 532-&gt;235，构成下一个自然序：1 4 2 3 5。 </p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">nextPermutation</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">current</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="n">current</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">end</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">current</span><span class="p">[</span><span class="n">end</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">current</span><span class="p">[</span><span class="n">end</span><span class="p">])</span>
            <span class="n">end</span><span class="o">--</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">end</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//5 4 3 2 1</span>
            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="c1">//[end-1] &lt; [end] 2 3 5 4 1</span>
        <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="n">end</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="c1">//3</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">current</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">current</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">current</span><span class="p">[</span><span class="n">start</span><span class="p">])</span>
            <span class="n">end</span><span class="o">--</span><span class="p">;</span>
        <span class="c1">//[end] &gt; [start] 4 &gt; 3</span>
        <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">current</span><span class="p">[</span><span class="n">start</span><span class="p">],</span> <span class="n">current</span><span class="p">[</span><span class="n">end</span><span class="p">]);</span> <span class="c1">// 2 4 5 3 1</span>
        <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">current</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">current</span><span class="p">.</span><span class="n">end</span><span class="p">());</span> <span class="c1">//2 4 1 3 5</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">permuteUnique3</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
        <span class="k">while</span><span class="p">(</span><span class="n">nextPermutation</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Subsets"></span></p>

<h2>Subsets</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/subsets/">Subsets</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">distinct</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">S</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">subsets</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">Elements</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">subset</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">descending</span><span class="w"> </span><span class="vg">order</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">duplicate</span><span class="w"> </span><span class="vg">subsets</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">],</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="nl">is:</span>
<span class="p">[</span>
<span class="w">  </span><span class="p">[</span><span class="il">3</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">1</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">2</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">],</span>
<span class="w">  </span><span class="p">[]</span>
<span class="p">]</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>注意输出的每个子集要有序。</p>

<h3>DFS搜索</h3>

<p>跟<a href="#Combinations">Combinations</a>一样。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">S</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">input</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">k</span><span class="p">){</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">S</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="n">input</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">search</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>
            <span class="n">input</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">subsets</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">S</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">S</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">S</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">input</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">S</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">search</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>0 二进制组合</h3>

<p>每个元素都有0/1两种状态，全部排列一下即可。例如1,2,3,4一共有2^4=16种子集，第15种(2^0+2^1+2^2+2^3)为1-4都取, 第7种<code>(1*(2^0)+1*(2^1)+1*(2^2)+0*(2^3))</code>为[1,2,3]. <a href="http://blog.csdn.net/magisu/article/details/12989531">ref</a>.
注意得先将S排序(当然也可以先加到result中，最后再来排序), 不然结果中的子集顺序不是升序的。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">subsets</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">S</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">S</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">S</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">S</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">());</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">S</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">((</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">j</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">i</span><span class="p">)</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Subsets-II"></span></p>

<h2>Subsets II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/subsets-ii/">Subsets II </a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">collection</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">integers</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">might</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">duplicates</span><span class="p">,</span><span class="w"> </span><span class="vg">S</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">subsets</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">Elements</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">subset</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">descending</span><span class="w"> </span><span class="vg">order</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">duplicate</span><span class="w"> </span><span class="vg">subsets</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">If</span><span class="w"> </span><span class="vg">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">2</span><span class="p">],</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="nl">is:</span>
<span class="p">[</span>
<span class="w">  </span><span class="p">[</span><span class="il">2</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">1</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">2</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="il">2</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">],</span>
<span class="w">  </span><span class="p">[]</span>
<span class="p">]</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>可以跟上题<a href="#Subsets">Subsets</a>一样做，只是在add到result的时候先判断result中是否存在。 或者最后将result unique一下都可以。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">searchWithDup</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span> <span class="n">result</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">sub</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">S</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">sub</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">k</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//also can add, at last, remove the duplicated</span>
            <span class="k">if</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">find</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">result</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span> <span class="o">!=</span> <span class="n">result</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">sub</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">S</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">sub</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">searchWithDup</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">sub</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
            <span class="n">sub</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">subsetsWithDup</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">S</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">S</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">S</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">S</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">sub</span><span class="p">;</span>
            <span class="n">searchWithDup</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">sub</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//remove the duplicated, if didnot check when add in searchWithDup</span>
        <span class="c1">//std::sort(result.begin(), result.end());</span>
        <span class="c1">//result.erase(std::unique(result.begin(), result.end()), result.end());</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>另外，考虑到会对输入的S排序，可以在递归搜索的时候，若有连续相邻的元素，则只需要搜索一个即可。<a href="http://www.cnblogs.com/x1957/p/3517989.html">ref</a></p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">S</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">input</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">k</span><span class="p">){</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">S</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="n">start</span> <span class="o">&amp;&amp;</span> <span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">input</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">search</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>
            <span class="n">input</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">subsetsWithDup</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">S</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">S</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">S</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">input</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">S</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
            <span class="n">search</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Unique-Paths"></span></p>

<h2>Unique Paths</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/unique-paths/">Unique Paths</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">A</span><span class="w"> </span><span class="vg">robot</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">located</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">top</span><span class="o">-</span><span class="vg">left</span><span class="w"> </span><span class="vg">corner</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">grid</span><span class="w"> </span><span class="p">(</span><span class="vg">marked</span><span class="w"> </span><span class="c1">&#39;Start&#39; in the diagram below).</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">robot</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">move</span><span class="w"> </span><span class="vg">either</span><span class="w"> </span><span class="vg">down</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">right</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">any</span><span class="w"> </span><span class="vg">point</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">time</span><span class="o">.</span><span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">robot</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">trying</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">reach</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">bottom</span><span class="o">-</span><span class="vg">right</span><span class="w"> </span><span class="vg">corner</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">grid</span><span class="w"> </span><span class="p">(</span><span class="vg">marked</span><span class="w"> </span><span class="c1">&#39;Finish&#39; in the diagram below).</span>
</pre></div>
<p><img src="http://tl3shi.github.com/resource/blogimage/leetcode-unique-path.png" alt=""></p>
<div class="highlight"><pre><span class="vg">How</span><span class="w"> </span><span class="vg">many</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">paths</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">there</span><span class="o">?</span>
<span class="vg">Above</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="il">3</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="il">7</span><span class="w"> </span><span class="vg">grid</span><span class="o">.</span><span class="w"> </span><span class="vg">How</span><span class="w"> </span><span class="vg">many</span><span class="w"> </span><span class="vg">possible</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">paths</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">there</span><span class="o">?</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">most</span><span class="w"> </span><span class="il">100</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>一共m-1+n-1步，其中任意选择m-1作为竖着走即可。</p>
<div class="highlight"><pre>    <span class="c1">//C_n ^m </span>
    <span class="kt">int</span> <span class="nf">C</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">m</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">m</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">)</span> <span class="k">return</span> <span class="n">C</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">m</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span> <span class="o">*=</span> <span class="n">n</span><span class="o">-</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="n">result</span> <span class="o">/=</span> <span class="n">i</span><span class="p">;</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="nf">uniquePaths</span><span class="p">(</span><span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">C</span><span class="p">(</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h1>matrix, 二维数组, 矩阵相关</h1>

<p><span id="Rotate-Image"></span></p>

<h2>Rotate Image</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/rotate-image/">Rotate Image</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">You</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="il">2</span><span class="vg">D</span><span class="w"> </span><span class="vg">matrix</span><span class="w"> </span><span class="vg">representing</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">image</span><span class="o">.</span>
<span class="vg">Rotate</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">image</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="il">90</span><span class="w"> </span><span class="vg">degrees</span><span class="w"> </span><span class="p">(</span><span class="vg">clockwise</span><span class="p">)</span><span class="o">.</span>
<span class="vg">Follow</span><span class="w"> </span><span class="nl">up:</span>
<span class="vg">Could</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">do</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">in</span><span class="o">-</span><span class="vg">place</span><span class="o">?</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>常规</h3>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">rotate</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">matrix</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span> <span class="n">row</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">col</span> <span class="o">=</span> <span class="n">row</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">-</span> <span class="n">row</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">col</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">int</span> <span class="n">top</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">];</span> <span class="c1">// back top</span>
                <span class="c1">//left-&gt;top</span>
                <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">row</span><span class="p">];</span>
                <span class="c1">//bottom-&gt;left</span>
                <span class="n">matrix</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">row</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
                <span class="c1">//right-&gt;bottom</span>
                <span class="n">matrix</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="n">col</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
                <span class="c1">//top-&gt;right</span>
                <span class="n">matrix</span><span class="p">[</span><span class="n">col</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">top</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<h3>高级解法</h3>

<p>参考<a href="https://oj.leetcode.com/discuss/3064/in-place-solution">discuss</a></p>
<div class="highlight"><pre><span class="c1">//[discurs]</span>
<span class="c1">//(1) write your matrix on a paper.</span>
<span class="c1">//(2) flip (not rotate) the paper upside down. (reverse)</span>
<span class="c1">//(3) flip again, but this time bottom edge to the right. (swap)</span>
<span class="mh">123</span>     <span class="mh">789</span>    <span class="mh">741</span>
<span class="mh">456</span>  <span class="err">—</span><span class="o">&gt;</span> <span class="mh">456</span> <span class="err">—</span><span class="o">&gt;</span> <span class="mh">852</span> <span class="err">—</span><span class="o">&gt;</span><span class="no">OK</span>
<span class="mh">789</span>     <span class="mh">123</span>    <span class="mh">963</span>
</pre></div><div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">rotate</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">matrix</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">matrix</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">matrix</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
                <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">matrix</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Set-Matrix-Zeroes"></span></p>

<h2>Set Matrix Zeroes</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/set-matrix-zeroes/">Set Matrix Zeroes</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">matrix</span><span class="p">,</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">element</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">0</span><span class="p">,</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">entire</span><span class="w"> </span><span class="vg">row</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">column</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="il">0</span><span class="o">.</span><span class="w"> </span><span class="vg">Do</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">place</span><span class="o">.</span>
<span class="vg">click</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">show</span><span class="w"> </span><span class="vg">follow</span><span class="w"> </span><span class="vg">up</span><span class="o">.</span>
<span class="vg">Follow</span><span class="w"> </span><span class="nl">up:</span>
<span class="vg">Did</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">use</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">space</span><span class="o">?</span>
<span class="vg">A</span><span class="w"> </span><span class="vg">straight</span><span class="w"> </span><span class="vg">forward</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">using</span><span class="w"> </span><span class="vg">O</span><span class="p">(</span><span class="vg">mn</span><span class="p">)</span><span class="w"> </span><span class="vg">space</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">probably</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">bad</span><span class="w"> </span><span class="vg">idea</span><span class="o">.</span>
<span class="vg">A</span><span class="w"> </span><span class="vg">simple</span><span class="w"> </span><span class="vg">improvement</span><span class="w"> </span><span class="vg">uses</span><span class="w"> </span><span class="vg">O</span><span class="p">(</span><span class="vg">m</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">n</span><span class="p">)</span><span class="w"> </span><span class="vg">space</span><span class="p">,</span><span class="w"> </span><span class="vg">but</span><span class="w"> </span><span class="vg">still</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">best</span><span class="w"> </span><span class="vg">solution</span><span class="o">.</span>
<span class="vg">Could</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">devise</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">constant</span><span class="w"> </span><span class="vg">space</span><span class="w"> </span><span class="vg">solution</span><span class="o">?</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>O(m + n) 空间</h3>

<p>另用数组记录哪些行/列有0.</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">setZeroes</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">matrix</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">row</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">col</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">row</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">||</span> <span class="n">col</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
                    <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
    <span class="p">}</span>   
</pre></div>
<h3>常数空间</h3>

<p>假设第i行j列是0，那么第0行的j列、第0列第i行 肯定要设置为0。 所以可以用两个变量记录下第0行0列是否有，然后把其他行列的信息往这写。</p>
<div class="highlight"><pre>     <span class="kt">void</span> <span class="nf">setZeroes</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">matrix</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">bool</span> <span class="n">firstRow</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="kt">bool</span> <span class="n">firstCol</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">firstRow</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">firstCol</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> 
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
         <span class="k">if</span><span class="p">(</span><span class="n">firstRow</span><span class="p">)</span>
         <span class="p">{</span> 
             <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span><span class="p">(</span><span class="n">firstCol</span><span class="p">)</span>
         <span class="p">{</span>
             <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
         <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Spiral-Matrix"></span></p>

<h2>Spiral Matrix</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/spiral-matrix/">Spiral Matrix</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">matrix</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">m</span><span class="w"> </span><span class="vg">x</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="p">(</span><span class="vg">m</span><span class="w"> </span><span class="vg">rows</span><span class="p">,</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">columns</span><span class="p">),</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">matrix</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">spiral</span><span class="w"> </span><span class="vg">order</span><span class="o">.</span><span class="w">    </span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="nl">matrix:</span>
<span class="p">[</span>
<span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="il">3</span><span class="w"> </span><span class="p">],</span>
<span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="il">4</span><span class="p">,</span><span class="w"> </span><span class="il">5</span><span class="p">,</span><span class="w"> </span><span class="il">6</span><span class="w"> </span><span class="p">],</span>
<span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="il">7</span><span class="p">,</span><span class="w"> </span><span class="il">8</span><span class="p">,</span><span class="w"> </span><span class="il">9</span><span class="w"> </span><span class="p">]</span>
<span class="p">]</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">6</span><span class="p">,</span><span class="il">9</span><span class="p">,</span><span class="il">8</span><span class="p">,</span><span class="il">7</span><span class="p">,</span><span class="il">4</span><span class="p">,</span><span class="il">5</span><span class="p">]</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>暴力模拟～ </p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">spiralOrder</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">matrix</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">colume</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">row</span> <span class="o">*</span> <span class="n">colume</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">rowindex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">columeindex</span> <span class="o">=</span> <span class="n">colume</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">toleft_start</span> <span class="o">=</span> <span class="n">rowindex</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">toleft_end</span> <span class="o">=</span> <span class="n">columeindex</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">todown_start</span> <span class="o">=</span> <span class="n">rowindex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">todown_end</span> <span class="o">=</span> <span class="n">row</span> <span class="o">-</span> <span class="n">rowindex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">toleft_start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">toleft_end</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">rowindex</span><span class="p">][</span><span class="n">i</span><span class="p">]);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">size</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">todown_start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">todown_end</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">columeindex</span><span class="p">]);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">size</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">toleft_end</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span> <span class="n">toleft_start</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">row</span> <span class="o">-</span> <span class="n">rowindex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">size</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">todown_end</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">todown_start</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">colume</span><span class="o">-</span><span class="n">columeindex</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="n">size</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="n">rowindex</span><span class="o">++</span><span class="p">;</span>
            <span class="n">columeindex</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Spiral-Matrix-II"></span></p>

<h2>Spiral Matrix II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/spiral-matrix-ii/">Spiral Matrix II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">n</span><span class="p">,</span><span class="w"> </span><span class="vg">generate</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">square</span><span class="w"> </span><span class="vg">matrix</span><span class="w"> </span><span class="vg">filled</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">n2</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">spiral</span><span class="w"> </span><span class="vg">order</span><span class="o">.</span><span class="w"> </span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3</span><span class="p">,</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span><span class="w"> </span><span class="nl">matrix:</span>
<span class="p">[</span>
<span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="il">3</span><span class="w"> </span><span class="p">],</span>
<span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="il">8</span><span class="p">,</span><span class="w"> </span><span class="il">9</span><span class="p">,</span><span class="w"> </span><span class="il">4</span><span class="w"> </span><span class="p">],</span>
<span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="il">7</span><span class="p">,</span><span class="w"> </span><span class="il">6</span><span class="p">,</span><span class="w"> </span><span class="il">5</span><span class="w"> </span><span class="p">]</span>
<span class="p">]</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟 <a href="#Spiral-Matrix">spiral-matrix</a>一样。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">generateMatrix</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">matrix</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
        <span class="kt">int</span> <span class="n">rowindex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">columeindex</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span> <span class="n">colume</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">toleft_start</span> <span class="o">=</span> <span class="n">rowindex</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">toleft_end</span> <span class="o">=</span> <span class="n">columeindex</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">todown_start</span> <span class="o">=</span> <span class="n">rowindex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">todown_end</span> <span class="o">=</span> <span class="n">row</span> <span class="o">-</span> <span class="n">rowindex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">toleft_start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">toleft_end</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                <span class="n">matrix</span><span class="p">[</span><span class="n">rowindex</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">size</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">todown_start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">todown_end</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
                <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">columeindex</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">size</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">toleft_end</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span> <span class="n">toleft_start</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
                <span class="n">matrix</span><span class="p">[</span><span class="n">row</span> <span class="o">-</span> <span class="n">rowindex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">size</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">todown_end</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">todown_start</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
                <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">colume</span><span class="o">-</span><span class="n">columeindex</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">size</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="n">rowindex</span><span class="o">++</span><span class="p">;</span>
            <span class="n">columeindex</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">matrix</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Maximal-Rectangle"></span></p>

<h2>Maximal Rectangle</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/maximal-rectangle/">Maximal Rectangle</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="il">2</span><span class="vg">D</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">matrix</span><span class="w"> </span><span class="vg">filled</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="il">0</span><span class="c1">&#39;s and 1&#39;s, find the largest rectangle containing all ones and return its area.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>O(n^3) 算法</h3>

<p>一种直接的方法是: 横向记录从左到i, 包括i为1的连续1的长度，然后再纵向去查找以这个连续1长度作为min宽的最大的高度,得到面积。O(n^3)</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">getMaxHeight</span><span class="p">(</span><span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">ones</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">minWidth</span> <span class="o">=</span> <span class="n">ones</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">row</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="c1">//up</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">minWidth</span><span class="p">)</span>
                <span class="o">++</span><span class="n">height</span><span class="p">;</span>
            <span class="k">else</span> 
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ones</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">minWidth</span><span class="p">)</span>
                <span class="o">++</span><span class="n">height</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">height</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">maximalRectangle</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">matrix</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">ones</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span><span class="c1">//[i][j], 第i行从左到j, 包括j连续1的长度</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">else</span> <span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span> <span class="o">?</span> <span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">getMaxHeight</span><span class="p">(</span><span class="n">ones</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>O(n^2)算法</h3>

<p>一行一行处理，每一行，按照柱状图那道题目 <a href="#Largest-Rectangle-In-Histogram">Largest Rectangle in Histogram</a> <code>O(n)</code>算法处理，总体复杂度O(n^2).</p>

<p>用栈维护了一个递增(非递减)的序列，当当前索引的元素比栈顶小时，取栈顶元素（并出栈），并将这个元素的高度和当前索引端(快降低了)构成的矩形面积，栈中上升的那段都可以出栈并计算。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">largestRectangleArea</span><span class="p">(</span><span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">height</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">index</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">index</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">height</span><span class="p">[</span><span class="n">index</span><span class="p">.</span><span class="n">top</span><span class="p">()]</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">)</span>
                <span class="n">index</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">index</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">height</span><span class="p">[</span><span class="n">index</span><span class="p">.</span><span class="n">top</span><span class="p">()]</span> <span class="o">&gt;=</span> <span class="n">height</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="p">{</span>
                    <span class="k">auto</span> <span class="n">t</span> <span class="o">=</span> <span class="n">index</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
                    <span class="n">index</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">height</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">index</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">?</span> <span class="nl">i</span> <span class="p">:</span> <span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">index</span><span class="p">.</span><span class="n">top</span><span class="p">()));</span>
                <span class="p">}</span>
                <span class="n">index</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="c1">//Do not forget.</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="nf">maximalRectangle</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">matrix</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">ones</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">ones</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">else</span> <span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span> <span class="o">?</span> <span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">largestRectangleArea</span><span class="p">(</span><span class="n">ones</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>以高度<code>[2,5,3,4,1]</code>为例, 2[index=0], 5[index=2]进栈, 当前高度为3, 以5为最矮的计算面积为5,然后5出栈, 此时<strong>把3[index=2]进栈</strong> (注意对比下<a href="#Largest-Rectangle-In-Histogram">Largest Rectangle in Histogram</a>的写法), 一直到index=4时，1最小了, 依次计算面积, </p>
<div class="highlight"><pre><span class="k">[0,2,3,]--&gt;[0,2,]</span>
<span class="na">4*(4-1-2)</span><span class="o">=</span><span class="s">8.</span>
<span class="k">[0,2] --&gt; [0]</span>
<span class="na">3*(4-1-0)</span><span class="o">=</span><span class="s">9. !!max</span>
<span class="k">[0] --&gt;[]</span>
<span class="na">2*(4)</span><span class="o">=</span><span class="s">8.</span>
</pre></div>
<p>上面代码还可以优化下内存空间, 用<code>O(n)</code>n为列数量。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maximalRectangle2</span><span class="p">(</span><span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span> <span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">matrix</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="k">if</span> <span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span> <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">height</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">maxArea</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">row</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">col</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">matrix</span> <span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span><span class="p">)</span>
                    <span class="n">height</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">height</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">height</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">//dummy one</span>
            <span class="n">maxArea</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">maxArea</span><span class="p">,</span> <span class="n">largestRectangleArea</span><span class="p">(</span><span class="n">height</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">maxArea</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>O(n^2)算法 思路2</h3>

<p>参考了<a href="https://github.com/soulmachine/leetcode">leetcode-cpp</a>。 思路是对当前高度h, 找左边比他小的最大的index,设为i, 右边比h小最小的index,设为j,则以h为最小高度的面积应该为 
<code>(j-i-1)*h</code>.  eg : [2,5,3,4,1], 当前高度3, 则, left=0, right = 4, area = 3*(4-0-1)=9.</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maximalRectangle</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">matrix</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">leftMax</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">rightMin</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">height</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span><span class="p">){</span>
                    <span class="o">++</span><span class="n">height</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
                    <span class="n">leftMax</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">leftMax</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">left</span><span class="p">);</span>
                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    <span class="n">left</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
                    <span class="n">height</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">leftMax</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span> <span class="n">rightMin</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">n</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span>
            <span class="p">{</span>
                 <span class="k">if</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span><span class="p">){</span>
                     <span class="n">rightMin</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">rightMin</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">right</span><span class="p">);</span>
                     <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">height</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">rightMin</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="n">leftMax</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">));</span>
                 <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                     <span class="n">right</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
                 <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h1>回溯, BFS/DFS</h1>

<p><span id="Clone-Graph"></span></p>

<h2>Clone Graph</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/clone-graph/">Clone Graph</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Clone</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">undirected</span><span class="w"> </span><span class="vg">graph</span><span class="o">.</span><span class="w"> </span><span class="vg">Each</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">graph</span><span class="w"> </span><span class="vg">contains</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">label</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">list</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">neighbors</span><span class="o">.</span>


<span class="vg">OJ</span><span class="c1">&#39;s undirected graph serialization:</span>
<span class="vg">Nodes</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">labeled</span><span class="w"> </span><span class="vg">uniquely</span><span class="o">.</span>

<span class="vg">We</span><span class="w"> </span><span class="vg">use</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">separator</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">node</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">separator</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">label</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">neighbor</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">node</span><span class="o">.</span>
<span class="vg">As</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">consider</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">serialized</span><span class="w"> </span><span class="vg">graph</span><span class="w"> </span><span class="p">{</span><span class="il">0</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="mf">2#</span><span class="il">1</span><span class="p">,</span><span class="mf">2#</span><span class="il">2</span><span class="p">,</span><span class="il">2</span><span class="p">}</span><span class="o">.</span>

<span class="vg">The</span><span class="w"> </span><span class="vg">graph</span><span class="w"> </span><span class="vg">has</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">three</span><span class="w"> </span><span class="vg">nodes</span><span class="p">,</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">therefore</span><span class="w"> </span><span class="vg">contains</span><span class="w"> </span><span class="vg">three</span><span class="w"> </span><span class="vg">parts</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">separated</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="err">#</span><span class="o">.</span>

<span class="vg">First</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">labeled</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="il">0</span><span class="o">.</span><span class="w"> </span><span class="vg">Connect</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">both</span><span class="w"> </span><span class="vg">nodes</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="il">2</span><span class="o">.</span>
<span class="vg">Second</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">labeled</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="il">1</span><span class="o">.</span><span class="w"> </span><span class="vg">Connect</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="il">2</span><span class="o">.</span>
<span class="vg">Third</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">labeled</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="il">2</span><span class="o">.</span><span class="w"> </span><span class="vg">Connect</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">node</span><span class="w"> </span><span class="il">2</span><span class="w"> </span><span class="p">(</span><span class="vg">itself</span><span class="p">),</span><span class="w"> </span><span class="vg">thus</span><span class="w"> </span><span class="vg">forming</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">self</span><span class="o">-</span><span class="vg">cycle</span><span class="o">.</span>
<span class="vg">Visually</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">graph</span><span class="w"> </span><span class="vg">looks</span><span class="w"> </span><span class="vg">like</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="nl">following:</span>

<span class="w">       </span><span class="il">1</span>
<span class="w">      </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">     </span><span class="o">/</span><span class="w">   </span><span class="o">\</span>
<span class="w">    </span><span class="il">0</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="il">2</span>
<span class="w">         </span><span class="o">/</span><span class="w"> </span><span class="o">\</span>
<span class="w">         </span><span class="o">\</span><span class="vg">_</span><span class="o">/</span>
</pre></div>
<p>解题思路：</p>

<p>用BFS+hashmap解决。</p>
<div class="highlight"><pre>    <span class="c1">//Definition for undirected graph.</span>
    <span class="k">struct</span> <span class="n">UndirectedGraphNode</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">label</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">UndirectedGraphNode</span> <span class="o">*&gt;</span> <span class="n">neighbors</span><span class="p">;</span>
        <span class="n">UndirectedGraphNode</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="o">:</span> <span class="n">label</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{};</span>
    <span class="p">};</span>

    <span class="n">UndirectedGraphNode</span> <span class="o">*</span><span class="nf">cloneGraph</span><span class="p">(</span><span class="n">UndirectedGraphNode</span> <span class="o">*</span><span class="n">node</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">UndirectedGraphNode</span><span class="o">*</span><span class="p">,</span> <span class="n">UndirectedGraphNode</span><span class="o">*&gt;</span> <span class="n">copies</span><span class="p">;</span>
        <span class="n">queue</span><span class="o">&lt;</span><span class="n">UndirectedGraphNode</span><span class="o">*&gt;</span> <span class="n">todo</span><span class="p">;</span> 
        <span class="n">todo</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
        <span class="n">copies</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UndirectedGraphNode</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">label</span><span class="p">);</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">todo</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">auto</span> <span class="n">origin</span> <span class="o">=</span> <span class="n">todo</span><span class="p">.</span><span class="n">front</span><span class="p">();</span> <span class="n">todo</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="n">UndirectedGraphNode</span><span class="o">*</span> <span class="n">cpy</span> <span class="o">=</span> <span class="n">copies</span><span class="p">[</span><span class="n">origin</span><span class="p">];</span>
            <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">origin</span><span class="o">-&gt;</span><span class="n">neighbors</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">origin</span><span class="o">-&gt;</span><span class="n">neighbors</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">copies</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">)</span> <span class="o">==</span> <span class="n">copies</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
                <span class="p">{</span>
                    <span class="k">auto</span> <span class="n">node1</span> <span class="o">=</span> <span class="k">new</span>  <span class="n">UndirectedGraphNode</span><span class="p">((</span><span class="o">*</span><span class="n">it</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">label</span><span class="p">);</span>    
                    <span class="n">copies</span><span class="p">[</span><span class="o">*</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">node1</span><span class="p">;</span>
                    <span class="n">todo</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="n">cpy</span><span class="o">-&gt;</span><span class="n">neighbors</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">copies</span><span class="p">[</span><span class="o">*</span><span class="n">it</span><span class="p">]);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">copies</span><span class="p">[</span><span class="n">node</span><span class="p">];</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Generate-Parentheses"></span></p>

<h2>Generate Parentheses</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/generate-parentheses/">Generate Parentheses</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">pairs</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">parentheses</span><span class="p">,</span><span class="w"> </span><span class="vg">write</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">function</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">generate</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">combinations</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">well</span><span class="o">-</span><span class="vg">formed</span><span class="w"> </span><span class="vg">parentheses</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3</span><span class="p">,</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">set</span><span class="w"> </span><span class="nl">is:</span>
<span class="s2">&quot;((()))&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;(()())&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;(())()&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;()(())&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;()()()&quot;</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>用递归，一个括号一个括号放，只要有左括号在，随时都可以放；放右括号时，已经放好的左括号数量要多余已放好的右括号才可以。</p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">gen</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">string</span> <span class="n">pre</span><span class="p">,</span> <span class="kt">int</span> <span class="n">left</span><span class="p">,</span> <span class="kt">int</span> <span class="n">right</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">right</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
   <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">right</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">pre</span><span class="p">);</span>
       <span class="k">return</span><span class="p">;</span>
   <span class="p">}</span>    
   <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
       <span class="n">gen</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">pre</span><span class="o">+</span><span class="s">&quot;(&quot;</span><span class="p">,</span> <span class="n">left</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">right</span><span class="p">);</span>
   <span class="k">if</span><span class="p">(</span><span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">)</span> <span class="c1">//  (()</span>
       <span class="n">gen</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">pre</span><span class="o">+</span><span class="s">&quot;)&quot;</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">generateParenthesis</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
   <span class="n">string</span> <span class="n">pre</span><span class="p">;</span>
   <span class="n">gen</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">pre</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
   <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p><span id="N-Queens"></span></p>

<h2>N Queens</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/n-queens/">N-Queens</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">The</span><span class="w"> </span><span class="vg">n</span><span class="o">-</span><span class="vg">queens</span><span class="w"> </span><span class="vg">puzzle</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">problem</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">placing</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">queens</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">n</span><span class="err">×</span><span class="vg">n</span><span class="w"> </span><span class="vg">chessboard</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">queens</span><span class="w"> </span><span class="vg">attack</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">other</span><span class="o">.</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">n</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">distinct</span><span class="w"> </span><span class="vg">solutions</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">n</span><span class="o">-</span><span class="vg">queens</span><span class="w"> </span><span class="vg">puzzle</span><span class="o">.</span>
<span class="vg">Each</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">contains</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">distinct</span><span class="w"> </span><span class="vg">board</span><span class="w"> </span><span class="vg">configuration</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">n</span><span class="o">-</span><span class="vg">queens</span><span class="c1">&#39; placement, where &#39;Q&#39; and &#39;.&#39; both indicate a queen and an empty space respectively.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">There</span><span class="w"> </span><span class="vg">exist</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">distinct</span><span class="w"> </span><span class="vg">solutions</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="il">4</span><span class="o">-</span><span class="vg">queens</span><span class="w"> </span><span class="nl">puzzle:</span>
<span class="p">[</span>
<span class="w"> </span><span class="p">[</span><span class="s2">&quot;.Q..&quot;</span><span class="p">,</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="vg">Solution</span><span class="w"> </span><span class="il">1</span>
<span class="w">  </span><span class="s2">&quot;...Q&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;Q...&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;..Q.&quot;</span><span class="p">],</span>
<span class="w"> </span><span class="p">[</span><span class="s2">&quot;..Q.&quot;</span><span class="p">,</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="vg">Solution</span><span class="w"> </span><span class="il">2</span>
<span class="w">  </span><span class="s2">&quot;Q...&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;...Q&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;.Q..&quot;</span><span class="p">]</span>
<span class="p">]</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>八(N)皇后问题，经典回溯法。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">genResult</span><span class="p">(</span><span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">queen</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">queen</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">solution</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">string</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="sc">&#39;.&#39;</span><span class="p">));</span> 
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">solution</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">queen</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="sc">&#39;Q&#39;</span><span class="p">;</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">solution</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">bool</span> <span class="n">canPut</span><span class="p">(</span><span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">queen</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">queen</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="c1">//for(int i = 0; i &lt; n; i++) //no need, check after row</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">row</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">queen</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">queen</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">col</span> <span class="c1">//|| queen[row] != -1 row one by one, no need</span>
            <span class="o">||</span> <span class="n">abs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">row</span><span class="p">)</span> <span class="o">==</span> <span class="n">abs</span><span class="p">(</span><span class="n">queen</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">col</span><span class="p">))</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">dfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">queen</span><span class="p">,</span> <span class="kt">int</span> <span class="n">startRow</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">queen</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">startRow</span> <span class="o">==</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">genResult</span><span class="p">(</span><span class="n">queen</span><span class="p">));</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">col</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">canPut</span><span class="p">(</span><span class="n">queen</span><span class="p">,</span> <span class="n">startRow</span><span class="p">,</span> <span class="n">col</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">queen</span><span class="p">[</span><span class="n">startRow</span><span class="p">]</span> <span class="o">=</span> <span class="n">col</span><span class="p">;</span>
                <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">queen</span><span class="p">,</span> <span class="n">startRow</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                <span class="n">queen</span><span class="p">[</span><span class="n">startRow</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">solveNQueens</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">queen</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">queen</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="N-Queens-II"></span></p>

<h2>N Queens II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/n-queens-ii/">N-Queens II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Follow</span><span class="w"> </span><span class="vg">up</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">N</span><span class="o">-</span><span class="vg">Queens</span><span class="w"> </span><span class="vg">problem</span><span class="o">.</span>
<span class="vg">Now</span><span class="p">,</span><span class="w"> </span><span class="vg">instead</span><span class="w"> </span><span class="vg">outputting</span><span class="w"> </span><span class="vg">board</span><span class="w"> </span><span class="vg">configurations</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">distinct</span><span class="w"> </span><span class="vg">solutions</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟上一题 <a href="#N-Queens">n-queens</a>一模一样。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">canPut</span><span class="p">(</span><span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">queen</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">queen</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">queen</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">queen</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">col</span> <span class="c1">//|| queen[row] != -1 row one by one, no need</span>
            <span class="o">||</span> <span class="n">abs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">row</span><span class="p">)</span> <span class="o">==</span> <span class="n">abs</span><span class="p">(</span><span class="n">queen</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">col</span><span class="p">))</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">queen</span><span class="p">,</span> <span class="kt">int</span> <span class="n">startRow</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">queen</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">startRow</span> <span class="o">==</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="o">++</span><span class="n">result</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">col</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">canPut</span><span class="p">(</span><span class="n">queen</span><span class="p">,</span> <span class="n">startRow</span><span class="p">,</span> <span class="n">col</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">queen</span><span class="p">[</span><span class="n">startRow</span><span class="p">]</span> <span class="o">=</span> <span class="n">col</span><span class="p">;</span>
                <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">queen</span><span class="p">,</span> <span class="n">startRow</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                <span class="n">queen</span><span class="p">[</span><span class="n">startRow</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="nf">totalNQueens</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">queen</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">queen</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Restore-IP-Addresses"></span></p>

<h2>Restore IP Addresses</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/restore-ip-addresses/">Restore IP Addresses</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">string</span><span class="w"> </span><span class="vg">containing</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">digits</span><span class="p">,</span><span class="w"> </span><span class="vg">restore</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">returning</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">possible</span>
<span class="vg">valid</span><span class="w"> </span><span class="vg">IP</span><span class="w"> </span><span class="vg">address</span><span class="w"> </span><span class="vg">combinations</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="s2">&quot;25525511135&quot;</span><span class="p">,</span>
<span class="vg">return</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;255.255.11.135&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;255.255.111.35&quot;</span><span class="p">]</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="vg">Order</span><span class="w"> </span><span class="vg">does</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">matter</span><span class="p">)</span>
</pre></div></blockquote>

<p>解题思路：
在原串中加点，每个位置都去试探，直到3个点加完毕，若满足规则就是。
注意以0开头的段。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">check</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">stoi</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">num</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="mi">255</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="n">string</span> <span class="n">prefix</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">input</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dot</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="p">(</span><span class="mi">4</span><span class="o">-</span><span class="n">dot</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">dot</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">input</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">input</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="n">start</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="n">str</span><span class="p">))</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">str</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">start</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">input</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">str</span> <span class="o">=</span> <span class="n">input</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="n">str</span><span class="p">))</span>
                <span class="n">search</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">str</span> <span class="o">+</span> <span class="s">&quot;.&quot;</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">dot</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>

        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">restoreIpAddresses</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="o">||</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">12</span><span class="p">)</span> <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">string</span> <span class="n">prefix</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
        <span class="n">search</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Sudoku-Solver"></span></p>

<h2>Sudoku Solver</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/sudoku-solver/">Sudoku Solver</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Write</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">program</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">solve</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">Sudoku</span><span class="w"> </span><span class="vg">puzzle</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">filling</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">empty</span><span class="w"> </span><span class="vg">cells</span><span class="o">.</span>
<span class="vg">Empty</span><span class="w"> </span><span class="vg">cells</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">indicated</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">character</span><span class="w"> </span><span class="c1">&#39;.&#39;.</span>
<span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">will</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">unique</span><span class="w"> </span><span class="vg">solution</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>记录需要填充的每个位置，然后用1-9一个一个去试～ 深搜即可。 类似的问题还有<a href="#N-Queens">八皇后</a>等。</p>
<div class="highlight"><pre>    <span class="c1">//check if can put x in board[row][col]</span>
    <span class="kt">bool</span> <span class="nf">canPut</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">board</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">,</span> <span class="kt">char</span> <span class="n">x</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">row</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">3</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="n">col</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span> 
    <span class="kt">bool</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">board</span><span class="p">,</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="o">&amp;</span><span class="n">need</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">start</span> <span class="o">==</span> <span class="n">need</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">need</span><span class="p">[</span><span class="n">start</span><span class="p">].</span><span class="n">first</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">need</span><span class="p">[</span><span class="n">start</span><span class="p">].</span><span class="n">second</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">char</span> <span class="n">x</span> <span class="o">=</span> <span class="sc">&#39;1&#39;</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="sc">&#39;9&#39;</span><span class="p">;</span> <span class="n">x</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">canPut</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">board</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">search</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">need</span><span class="p">,</span> <span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
                    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
                <span class="n">board</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;.&#39;</span><span class="p">;</span> <span class="c1">//rollback</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="nf">solveSudoku</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">board</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">need</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
                <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">)</span>
                    <span class="n">need</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">make_pair</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">));</span>
        <span class="n">search</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">need</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Surrounded-Regions"></span></p>

<h2>Surrounded Regions</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/surrounded-regions/">Surrounded Regions</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="il">2</span><span class="vg">D</span><span class="w"> </span><span class="vg">board</span><span class="w"> </span><span class="vg">containing</span><span class="w"> </span><span class="c1">&#39;X&#39; and &#39;O&#39;, capture all regions surrounded by &#39;X&#39;.</span>

<span class="vg">A</span><span class="w"> </span><span class="vg">region</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">captured</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">flipping</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="c1">&#39;O&#39;s into &#39;X&#39;s in that surrounded region.</span>

<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">X</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">X</span>
<span class="vg">X</span><span class="w"> </span><span class="vg">O</span><span class="w"> </span><span class="vg">O</span><span class="w"> </span><span class="vg">X</span>
<span class="vg">X</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">O</span><span class="w"> </span><span class="vg">X</span>
<span class="vg">X</span><span class="w"> </span><span class="vg">O</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">X</span>
<span class="vg">After</span><span class="w"> </span><span class="vg">running</span><span class="w"> </span><span class="vg">your</span><span class="w"> </span><span class="vg">function</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">board</span><span class="w"> </span><span class="vg">should</span><span class="w"> </span><span class="nl">be:</span>

<span class="vg">X</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">X</span>
<span class="vg">X</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">X</span>
<span class="vg">X</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">X</span>
<span class="vg">X</span><span class="w"> </span><span class="vg">O</span><span class="w"> </span><span class="vg">X</span><span class="w"> </span><span class="vg">X</span>
</pre></div>
<p>解题思路：</p>

<p>这个题关键在与能想到跟最外面的&#39;O&#39;连通的就能“幸免于难”, 因此可以从从最外层的O开始往里dfs/bfs搜索，把连在一起的O记录下来(比如暂时改成另外的符号)，遍历完之后，再把所有的搜索一遍，这时仍然是’O’的就要变成’X’了，是之前暂存的，要还原成’O’. <a href="http://blog.csdn.net/shiquxinkong/article/details/18241833">ref</a></p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;&gt;</span> <span class="o">&amp;</span><span class="n">board</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> 
        <span class="n">assert</span><span class="p">(</span><span class="n">m</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">row</span> <span class="o">&gt;=</span> <span class="n">m</span> <span class="o">||</span> <span class="n">col</span> <span class="o">&gt;=</span> <span class="n">n</span> <span class="o">||</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;O&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;.&#39;</span><span class="p">;</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span> <span class="c1">//up</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span> <span class="c1">//down</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">//left</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span> <span class="c1">//right</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">solve</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;&gt;</span> <span class="o">&amp;</span><span class="n">board</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> 
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">col</span><span class="o">++</span><span class="p">)</span><span class="c1">//top and bottom</span>
        <span class="p">{</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">row</span><span class="o">++</span><span class="p">)</span> <span class="c1">//left and right</span>
        <span class="p">{</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//all the &#39;O&#39; the outmost has been changed to &#39;.&#39;, </span>
        <span class="c1">//now rollback and change the others &#39;O&#39; -&gt; &#39;X&#39;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">)</span>
                    <span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;O&#39;</span><span class="p">;</span>
                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;O&#39;</span><span class="p">)</span>
                    <span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;X&#39;</span><span class="p">;</span>
            <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<p>或者将上面的dfs换成bfs也一样。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">check</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span><span class="n">board</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">row</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">row</span> <span class="o">&gt;=</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">||</span> <span class="n">col</span> <span class="o">&gt;=</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">())</span>
            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;O&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">bfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span><span class="n">board</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">queue</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">coords</span><span class="p">;</span>
        <span class="n">coords</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">));</span>
        <span class="k">while</span><span class="p">(</span><span class="n">coords</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">coords</span><span class="p">.</span><span class="n">front</span><span class="p">().</span><span class="n">first</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">coords</span><span class="p">.</span><span class="n">front</span><span class="p">().</span><span class="n">second</span><span class="p">;</span>
            <span class="n">coords</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">board</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">board</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;.&#39;</span><span class="p">;</span><span class="c1">//mark</span>
                <span class="k">if</span><span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">board</span><span class="p">))</span><span class="c1">//or check later (the up &#39;if&#39;)</span>
                    <span class="n">coords</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">));</span>
                <span class="k">if</span><span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">board</span><span class="p">))</span>
                    <span class="n">coords</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">));</span>
                <span class="k">if</span><span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">board</span><span class="p">))</span>
                    <span class="n">coords</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="o">-</span><span class="mi">1</span><span class="p">));</span>
                <span class="k">if</span><span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">board</span><span class="p">))</span>
                    <span class="n">coords</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Word-Ladder"></span></p>

<h2>Word Ladder</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/word-ladder/">Word Ladder</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="p">(</span><span class="vg">start</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">end</span><span class="p">),</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">dictionary</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">shortest</span>
<span class="vg">transformation</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">start</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">end</span><span class="p">,</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="nl">that:</span>
<span class="vg">Only</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">letter</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">changed</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">time</span>
<span class="vg">Each</span><span class="w"> </span><span class="vg">intermediate</span><span class="w"> </span><span class="vg">word</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">exist</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">dictionary</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="nl">Given:</span>
<span class="vg">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hit&quot;</span>
<span class="vg">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;cog&quot;</span>
<span class="vg">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;hot&quot;</span><span class="p">,</span><span class="s2">&quot;dot&quot;</span><span class="p">,</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span><span class="s2">&quot;lot&quot;</span><span class="p">,</span><span class="s2">&quot;log&quot;</span><span class="p">]</span>
<span class="vg">As</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">shortest</span><span class="w"> </span><span class="vg">transformation</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="s2">&quot;hit&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;hot&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;dot&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;dog&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;cog&quot;</span><span class="p">,</span>
<span class="vg">return</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="il">5</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">Return</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">there</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">no</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">transformation</span><span class="w"> </span><span class="vg">sequence</span><span class="o">.</span>
<span class="vg">All</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">same</span><span class="w"> </span><span class="vg">length</span><span class="o">.</span>
<span class="vg">All</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">lowercase</span><span class="w"> </span><span class="vg">alphabetic</span><span class="w"> </span><span class="vg">characters</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<h3>bfs</h3>

<p>用BFS搜索，记录从开始到当前路径长度。注意遍历map/set删除满足条件的element的写法。第一个用BFS搜索到的肯定是最短的之一。DFS则不是哦。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">diff1char</span><span class="p">(</span><span class="n">string</span> <span class="n">s1</span><span class="p">,</span> <span class="n">string</span> <span class="n">s2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">==</span> <span class="n">s2</span><span class="p">.</span><span class="n">length</span><span class="p">());</span>
        <span class="kt">int</span> <span class="n">diff</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">s2</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
                <span class="o">++</span><span class="n">diff</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">diff</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">ladderLength</span><span class="p">(</span><span class="n">string</span> <span class="n">start</span><span class="p">,</span> <span class="n">string</span> <span class="n">end</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dict</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">queue</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">queues</span><span class="p">;</span>
        <span class="n">queues</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
        <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">dict</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="n">dict</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">queues</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">queues</span><span class="p">.</span><span class="n">front</span><span class="p">().</span><span class="n">first</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">curLen</span> <span class="o">=</span> <span class="n">queues</span><span class="p">.</span><span class="n">front</span><span class="p">().</span><span class="n">second</span><span class="p">;</span>
            <span class="n">queues</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">diff1char</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">end</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">curLen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">dict</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">dict</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">diff1char</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="n">it</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">queues</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">,</span> <span class="n">curLen</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span>
                    <span class="n">it</span> <span class="o">=</span> <span class="n">dict</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">it</span><span class="p">);</span>
                <span class="p">}</span><span class="k">else</span>
                    <span class="o">++</span><span class="n">it</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>悲剧的是，上面的过不了～ testcase中dict太大，而word相对较短，去从dict去搜索相邻的单词，耗时太久。改为变动word中的每一个字符(26个一个一个试)，然后再去dict中判断是否存在。这样就能AC。<a href="https://oj.leetcode.com/discuss/7348/time-limit-exceeded-bfs">ref</a>, 代码如下：</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">getDiff1chars</span><span class="p">(</span><span class="n">string</span> <span class="n">s1</span><span class="p">,</span> <span class="n">queue</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="o">&amp;</span><span class="n">next</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nextLen</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dict</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s1</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">s2</span><span class="p">(</span><span class="n">s1</span><span class="p">);</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="sc">&#39;z&#39;</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">s2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">c</span><span class="p">){</span>
                    <span class="n">s2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
                    <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">s2</span><span class="p">);</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">dict</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
                    <span class="p">{</span>
                        <span class="n">next</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">s2</span><span class="p">,</span> <span class="n">nextLen</span><span class="p">));</span>
                        <span class="n">dict</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">it</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">ladderLength</span><span class="p">(</span><span class="n">string</span> <span class="n">start</span><span class="p">,</span> <span class="n">string</span> <span class="n">end</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dict</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">queue</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">queues</span><span class="p">;</span>
        <span class="n">queues</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
        <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">dict</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="n">dict</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">queues</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">queues</span><span class="p">.</span><span class="n">front</span><span class="p">().</span><span class="n">first</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">curLen</span> <span class="o">=</span> <span class="n">queues</span><span class="p">.</span><span class="n">front</span><span class="p">().</span><span class="n">second</span><span class="p">;</span>
            <span class="n">queues</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">diff1char</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">end</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">curLen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="n">getDiff1chars</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">queues</span><span class="p">,</span> <span class="n">curLen</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">dict</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Word-Ladder-II"></span></p>

<h2>Word Ladder II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/word-ladder-ii/">Word Ladder II</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="p">(</span><span class="vg">start</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">end</span><span class="p">),</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">dictionary</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">shortest</span>
<span class="vg">transformation</span><span class="w"> </span><span class="vg">sequence</span><span class="p">(</span><span class="vg">s</span><span class="p">)</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">start</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">end</span><span class="p">,</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="nl">that:</span>
<span class="vg">Only</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">letter</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">changed</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">time</span>
<span class="vg">Each</span><span class="w"> </span><span class="vg">intermediate</span><span class="w"> </span><span class="vg">word</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">exist</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">dictionary</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="nl">Given:</span>
<span class="vg">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hit&quot;</span>
<span class="vg">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;cog&quot;</span>
<span class="vg">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;hot&quot;</span><span class="p">,</span><span class="s2">&quot;dot&quot;</span><span class="p">,</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span><span class="s2">&quot;lot&quot;</span><span class="p">,</span><span class="s2">&quot;log&quot;</span><span class="p">]</span>
<span class="vg">Return</span>
<span class="p">[</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;hit&quot;</span><span class="p">,</span><span class="s2">&quot;hot&quot;</span><span class="p">,</span><span class="s2">&quot;dot&quot;</span><span class="p">,</span><span class="s2">&quot;dog&quot;</span><span class="p">,</span><span class="s2">&quot;cog&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="s2">&quot;hit&quot;</span><span class="p">,</span><span class="s2">&quot;hot&quot;</span><span class="p">,</span><span class="s2">&quot;lot&quot;</span><span class="p">,</span><span class="s2">&quot;log&quot;</span><span class="p">,</span><span class="s2">&quot;cog&quot;</span><span class="p">]</span>
<span class="p">]</span>
<span class="nl">Note:</span>
<span class="vg">All</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">same</span><span class="w"> </span><span class="vg">length</span><span class="o">.</span>
<span class="vg">All</span><span class="w"> </span><span class="vg">words</span><span class="w"> </span><span class="vg">contain</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">lowercase</span><span class="w"> </span><span class="vg">alphabetic</span><span class="w"> </span><span class="vg">characters</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<p>先BFS把邻接图构造出来，即比如与hit相差紧1个字符的单词有哪些~ 然后再dfs把所有结果搜索出来。有了<a href="http://tanglei.me/leetcode/word-ladder.html">word ladder</a>的经验，这次就直接用<code>26*length(word)</code>去查找相邻的单词而不取dict搜索了。 其实到可以判断下 dict大小和 <code>26*length(word)</code>之间的关系决定选用哪种方法。</p>
<div class="highlight"><pre>    <span class="kt">void</span> <span class="nf">getDiff1s</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span> <span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">adjlist</span> <span class="p">,</span> <span class="k">const</span> <span class="n">unordered_set</span><span class="o">&lt;</span> <span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">dict</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">string</span> <span class="n">strback</span><span class="p">(</span><span class="n">s</span> <span class="p">);</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="sc">&#39;z&#39;</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">strback</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
                <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">dict</span> <span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">strback</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">it</span> <span class="o">!=</span> <span class="n">dict</span> <span class="p">.</span><span class="n">end</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">it</span> <span class="o">!=</span> <span class="n">s</span> <span class="o">&amp;&amp;</span> <span class="n">adjlist</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">)</span> <span class="o">==</span> <span class="n">adjlist</span> <span class="p">.</span><span class="n">end</span><span class="p">())</span>
                    <span class="n">adjlist</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">strback</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="nf">genResult</span><span class="p">(</span><span class="kt">int</span> <span class="n">level</span><span class="p">,</span> <span class="kt">int</span> <span class="n">targetLen</span> <span class="p">,</span> <span class="n">string</span> <span class="n">end</span><span class="p">,</span> <span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">path</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span> <span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;&gt;</span> <span class="o">&amp;</span><span class="n">adjList</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">result</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">string</span> <span class="n">curStr</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">path</span> <span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="n">level</span> <span class="o">==</span> <span class="n">targetLen</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">curStr</span> <span class="o">==</span> <span class="n">end</span> <span class="p">)</span><span class="c1">//!!IMPORTANT</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span> <span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">adjList</span><span class="p">[</span><span class="n">curStr</span><span class="p">].</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">adjList</span> <span class="p">[</span><span class="n">curStr</span><span class="p">].</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">path</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">);</span>
            <span class="n">genResult</span><span class="p">(</span> <span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">targetLen</span> <span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">adjList</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
            <span class="n">path</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>


    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">findLadders</span><span class="p">(</span> <span class="n">string</span> <span class="n">start</span> <span class="p">,</span> <span class="n">string</span> <span class="n">end</span><span class="p">,</span> <span class="n">unordered_set</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">dict</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span> <span class="n">string</span><span class="p">,</span> <span class="n">unordered_set</span> <span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">adjList</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span> <span class="n">end</span><span class="p">)</span> <span class="o">!=</span> <span class="n">dict</span> <span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="n">dict</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span> <span class="n">end</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span> <span class="n">start</span><span class="p">)</span> <span class="o">!=</span> <span class="n">dict</span> <span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="n">dict</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span> <span class="n">start</span><span class="p">);</span>
        <span class="c1">//build adjList</span>
        <span class="n">unordered_set</span><span class="o">&lt;</span> <span class="n">string</span><span class="o">&gt;</span> <span class="n">twoLevels</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="n">twoLevels</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">insert</span><span class="p">(</span> <span class="n">start</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span> <span class="nb">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">lastLevel</span> <span class="o">=</span> <span class="n">twoLevels</span><span class="p">[</span><span class="n">level</span> <span class="o">%</span> <span class="mi">2</span><span class="p">];</span>
            <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">nextLevel</span> <span class="o">=</span> <span class="n">twoLevels</span><span class="p">[(</span><span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">];</span>
            <span class="n">nextLevel</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
            <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">lastLevel</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">lastLevel</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span> <span class="o">&gt;</span> <span class="n">adj</span><span class="p">;</span>
                <span class="n">getDiff1s</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">,</span> <span class="n">adj</span><span class="p">,</span> <span class="n">dict</span><span class="p">);</span>
                <span class="n">adjList</span><span class="p">[</span><span class="o">*</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">adj</span><span class="p">;</span>
                <span class="n">nextLevel</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">adj</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">adj</span><span class="p">.</span><span class="n">end</span><span class="p">());</span> <span class="c1">//if the same, will not insert</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="n">nextLevel</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">vector</span> <span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">string</span><span class="o">&gt;&gt;</span><span class="p">();</span><span class="c1">// no result</span>
            <span class="c1">//can remove the ones in dict of the current level,</span>
            <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">nextLevel</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">nextLevel</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
                <span class="n">dict</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">);</span><span class="c1">//erase by key</span>
            <span class="o">++</span><span class="n">level</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">nextLevel</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">end</span> <span class="p">)</span> <span class="o">!=</span> <span class="n">nextLevel</span><span class="p">.</span><span class="n">end</span><span class="p">())</span><span class="c1">//find the smallest path</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">vector</span><span class="o">&lt;</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span> <span class="n">string</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">start</span> <span class="p">);</span>
        <span class="c1">//adjList contains the smallest path, but not all the path is valid,</span>
        <span class="c1">//valid: path&#39;s length is level AND the last one is end </span>
        <span class="n">genResult</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">adjList</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>get了一种bfs的新技能，用一个queue，不用像上面那样两层之间交换。 一层一层之间加个特殊的节点表示层次之间的隔板（比如空指针啊，空串等）。
上面其他逻辑不变，bfs部分改变后的代码如下，也能AC。 
针对本体的逻辑，注意最内层for循环(//!!!!!)，不能直接加到q1中去，因为这样操作q1中可能含有重复的单词，会超时。</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">findLadders</span><span class="p">(</span> <span class="n">string</span> <span class="n">start</span> <span class="p">,</span> <span class="n">string</span> <span class="n">end</span><span class="p">,</span> <span class="n">unordered_set</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">dict</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span> <span class="n">string</span><span class="p">,</span> <span class="n">unordered_set</span> <span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">adjList</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span> <span class="n">end</span><span class="p">)</span> <span class="o">!=</span> <span class="n">dict</span> <span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="n">dict</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span> <span class="n">end</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">dict</span><span class="p">.</span><span class="n">find</span><span class="p">(</span> <span class="n">start</span><span class="p">)</span> <span class="o">!=</span> <span class="n">dict</span> <span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="n">dict</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span> <span class="n">start</span><span class="p">);</span>
        <span class="c1">//build adjList</span>
        <span class="n">queue</span><span class="o">&lt;</span> <span class="n">string</span><span class="o">&gt;</span> <span class="n">q1</span><span class="p">;</span>
        <span class="n">q1</span><span class="p">.</span><span class="n">push</span><span class="p">(</span> <span class="n">start</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">q1</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="n">q1</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span> <span class="c1">//&quot;&quot; or NULL to split cur level and next level</span>
            <span class="kt">bool</span> <span class="n">toEnd</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
            <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">toDelete</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">q1</span><span class="p">.</span><span class="n">front</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">string</span> <span class="n">it</span> <span class="o">=</span> <span class="n">q1</span><span class="p">.</span><span class="n">front</span><span class="p">();</span> <span class="n">q1</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
                <span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">string</span> <span class="o">&gt;</span> <span class="n">adj</span><span class="p">;</span>
                <span class="n">getDiff1s</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">adj</span><span class="p">,</span> <span class="n">dict</span><span class="p">);</span>
                <span class="n">adjList</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">adj</span><span class="p">;</span>
                <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">adj</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">adj</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="c1">//q1.push(*it); //!!!!! this way may TLE</span>
                    <span class="n">toDelete</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">);</span>
                    <span class="k">if</span><span class="p">(</span><span class="o">*</span><span class="n">it</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span> <span class="n">toEnd</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="n">toDelete</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span><span class="p">();</span>
            <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">toDelete</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">toDelete</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">q1</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">);</span>
                <span class="n">dict</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">q1</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span> <span class="c1">// pop &quot;&quot;</span>
            <span class="o">++</span><span class="n">level</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">toEnd</span><span class="p">)</span><span class="c1">//find the smallest path</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">vector</span><span class="o">&lt;</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span> <span class="n">string</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">start</span> <span class="p">);</span>
        <span class="c1">//adjList contains the smallest path, but not all the path is valid,</span>
        <span class="c1">//valid: path&#39;s length is level AND the last one is end </span>
        <span class="n">genResult</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">adjList</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Word-Search"></span></p>

<h2>Word Search</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/word-search/">Word Search</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="il">2</span><span class="vg">D</span><span class="w"> </span><span class="vg">board</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">word</span><span class="p">,</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">word</span><span class="w"> </span><span class="vg">exists</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">grid</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">word</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">constructed</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">letters</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">sequentially</span><span class="w"> </span><span class="vg">adjacent</span><span class="w"> </span><span class="vg">cell</span><span class="p">,</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="s2">&quot;adjacent&quot;</span><span class="w"> </span><span class="vg">cells</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">those</span><span class="w"> </span><span class="vg">horizontally</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">vertically</span><span class="w"> </span><span class="vg">neighboring</span><span class="o">.</span><span class="w"> </span><span class="vg">The</span><span class="w"> </span><span class="vg">same</span><span class="w"> </span><span class="vg">letter</span><span class="w"> </span><span class="vg">cell</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">used</span><span class="w"> </span><span class="vg">more</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">once</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">board</span><span class="w"> </span><span class="o">=</span>
<span class="p">[</span>
<span class="w">  </span><span class="p">[</span><span class="s2">&quot;ABCE&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="s2">&quot;SFCS&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="s2">&quot;ADEE&quot;</span><span class="p">]</span>
<span class="p">]</span>
<span class="vg">word</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ABCCED&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">returns</span><span class="w"> </span><span class="vg">true</span><span class="p">,</span>
<span class="vg">word</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;SEE&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">returns</span><span class="w"> </span><span class="vg">true</span><span class="p">,</span>
<span class="vg">word</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ABCB&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">returns</span><span class="w"> </span><span class="vg">false</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>DFS， 不能重复用，所以得标记一下某个字符是否用过。</p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">search</span><span class="p">(</span><span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">board</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">,</span> <span class="n">string</span> <span class="n">word</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span> <span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&gt;</span> <span class="o">&amp;</span> <span class="n">used</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">word</span><span class="p">.</span><span class="n">length</span><span class="p">())</span>
        <span class="k">return</span> <span class="nb">true</span> <span class="p">;</span>
    <span class="k">if</span><span class="p">((</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">col</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">)</span><span class="c1">//up</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">used</span> <span class="p">[</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span> <span class="n">col</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">board</span> <span class="p">[</span><span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span> <span class="n">col</span><span class="p">]</span> <span class="o">==</span> <span class="n">word</span> <span class="p">[</span><span class="n">index</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="n">used</span><span class="p">[</span><span class="n">row</span> <span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">search</span><span class="p">(</span><span class="n">board</span> <span class="p">,</span> <span class="n">row</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">word</span> <span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">used</span><span class="p">))</span>
                <span class="k">return</span> <span class="nb">true</span> <span class="p">;</span>
            <span class="n">used</span><span class="p">[</span><span class="n">row</span> <span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">row</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">)</span> <span class="c1">//left</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">used</span> <span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">board</span><span class="p">[</span><span class="n">row</span> <span class="p">][</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">word</span><span class="p">[</span><span class="n">index</span> <span class="p">])</span>
        <span class="p">{</span>
            <span class="n">used</span><span class="p">[</span><span class="n">row</span> <span class="p">][</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">search</span><span class="p">(</span><span class="n">board</span> <span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">index</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">used</span><span class="p">))</span>
                <span class="k">return</span> <span class="nb">true</span> <span class="p">;</span>
            <span class="n">used</span><span class="p">[</span><span class="n">row</span> <span class="p">][</span><span class="n">col</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">col</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//below</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">used</span> <span class="p">[</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span> <span class="n">col</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">board</span> <span class="p">[</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span> <span class="n">col</span><span class="p">]</span> <span class="o">==</span> <span class="n">word</span> <span class="p">[</span><span class="n">index</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="n">used</span><span class="p">[</span><span class="n">row</span> <span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">search</span><span class="p">(</span><span class="n">board</span> <span class="p">,</span> <span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">word</span> <span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">used</span><span class="p">))</span>
                <span class="k">return</span> <span class="nb">true</span> <span class="p">;</span>
            <span class="n">used</span><span class="p">[</span><span class="n">row</span> <span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">row</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">col</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">board</span> <span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">())</span><span class="c1">//right</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">used</span> <span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">board</span><span class="p">[</span><span class="n">row</span> <span class="p">][</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">word</span><span class="p">[</span><span class="n">index</span> <span class="p">])</span>
        <span class="p">{</span>
            <span class="n">used</span><span class="p">[</span><span class="n">row</span> <span class="p">][</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">search</span><span class="p">(</span><span class="n">board</span> <span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">index</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">used</span><span class="p">))</span>
                <span class="k">return</span> <span class="nb">true</span> <span class="p">;</span>
            <span class="n">used</span><span class="p">[</span><span class="n">row</span> <span class="p">][</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">exist</span><span class="p">(</span><span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="n">board</span><span class="p">,</span> <span class="n">string</span> <span class="n">word</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span> <span class="p">;</span>
    <span class="kt">int</span> <span class="n">col</span> <span class="o">=</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="n">row</span> <span class="o">*</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">word</span><span class="p">.</span><span class="n">length</span><span class="p">())</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">used</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="nb">false</span> <span class="p">));</span>


    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">row</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">col</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">board</span> <span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">word</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="n">used</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">search</span><span class="p">(</span><span class="n">board</span> <span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">used</span><span class="p">))</span>
                    <span class="k">return</span> <span class="nb">true</span> <span class="p">;</span>
                <span class="n">used</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>上面代码难看了点，其实可以像下面这样，简单些。 另外，可以借助<a href="#Surrounded-Regions">Surrounded Regions</a>的思想，在原有矩阵的情况下加标记，最后还原即可。可以省去O(m*n)的空间。</p>
<div class="highlight"><pre><span class="kt">bool</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">board</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">,</span>  <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">word</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">if</span><span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">word</span><span class="p">.</span><span class="n">length</span><span class="p">())</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
   <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">||</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">())</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
   <span class="k">if</span><span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">word</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
   <span class="p">{</span>
       <span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;.&#39;</span><span class="p">;</span><span class="c1">//used</span>
       <span class="kt">bool</span> <span class="n">r</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
       <span class="n">r</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span><span class="c1">//up</span>
       <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">r</span> <span class="o">&amp;&amp;</span> <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span><span class="c1">//below</span>
           <span class="n">r</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
       <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">r</span> <span class="o">&amp;&amp;</span> <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span><span class="c1">//left</span>
           <span class="n">r</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
       <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">r</span> <span class="o">&amp;&amp;</span> <span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> <span class="c1">//right</span>
           <span class="n">r</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
       <span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">index</span><span class="p">];</span><span class="c1">//reset</span>
       <span class="k">if</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">bool</span> <span class="nf">exist</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">board</span><span class="p">,</span> <span class="n">string</span> <span class="n">word</span><span class="p">)</span> 
<span class="p">{</span>
   <span class="n">assert</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
   <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">board</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
       <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
           <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
               <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
           <span class="p">}</span>   
   <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h1>greedy, 贪心</h1>

<p><span id="Best-Time-to-Buy-and-Sell-Stock-II"></span></p>

<h2>Best Time to Buy and Sell Stock II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/">Best Time to Buy and Sell Stock II</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Say</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">for</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">ith</span><span class="w"> </span><span class="vg">element</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">price</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">stock</span>
<span class="vg">on</span><span class="w"> </span><span class="vg">day</span><span class="w"> </span><span class="vg">i</span><span class="o">.</span>

<span class="vg">Design</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">find</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">profit</span><span class="o">.</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">complete</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">many</span>
<span class="vg">transactions</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">like</span><span class="w"> </span><span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">buy</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">sell</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">share</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">stock</span><span class="w"> </span><span class="vg">multiple</span>
<span class="vg">times</span><span class="p">)</span><span class="o">.</span><span class="w"> </span><span class="vg">However</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">engage</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">multiple</span><span class="w"> </span><span class="vg">transactions</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">same</span><span class="w"> </span><span class="vg">time</span>
<span class="p">(</span><span class="vg">ie</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">sell</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">stock</span><span class="w"> </span><span class="vg">before</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">buy</span><span class="w"> </span><span class="vg">again</span><span class="p">)</span><span class="o">.</span>
</pre></div>
<p>解题思路：
这题目跟<a href="#Best-Time-To-Buy-And-Sell-Stock">前一题</a>的区别在于，这个题允许多次交易。</p>

<p>思路就是在一个递增序列里，最矮的点买进，最高的点卖出。这样得到的利润最大。于是算法就是找一段一段的递增序列。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">prices</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">prices</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">prices</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">j</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
                <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="c1">//prices[j]&gt; prices[j+1]</span>
            <span class="k">if</span><span class="p">(</span><span class="n">j</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>后来看人家代码，才两三行，就觉得奇怪了。再分析下，举个例子，序列 1 3 4 5, 1进5出（一天只能交易一次）。相当于1进3出3进4出4进5出。于是就有了下面的代码。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">prices</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Jump-Game"></span></p>

<h2>Jump Game</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/jump-game/">Jump Game</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">initially</span><span class="w"> </span><span class="vg">positioned</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">index</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="o">.</span><span class="w">  </span>
<span class="vg">Each</span><span class="w"> </span><span class="vg">element</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">represents</span><span class="w"> </span><span class="vg">your</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">jump</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">position</span><span class="o">.</span>
<span class="vg">Determine</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">able</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">reach</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">last</span><span class="w"> </span><span class="vg">index</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">4</span><span class="p">],</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">true</span><span class="o">.</span>
<span class="vg">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="il">3</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">0</span><span class="p">,</span><span class="il">4</span><span class="p">],</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">false</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>贪心</h3>

<p>过每个index查看能到的最远的index，若当前最远的比遍历index还小或者相等时就走不下去了。 </p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">canJump</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">max_sofar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">max_sofar</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">max_sofar</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">max_sofar</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">max_sofar</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>动归</h3>

<p>f[i]表示走到第A[i]时, 多余的最大步数。
<code>f[i] = max(f[i-1], A[i-1])-1</code></p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">canJump</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">dp</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Jump-Game-II"></span></p>

<h2>Jump Game II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/jump-game-ii/">Jump Game II</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="w"> </span><span class="vg">integers</span><span class="p">,</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">initially</span><span class="w"> </span><span class="vg">positioned</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">index</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="o">.</span>
<span class="vg">Each</span><span class="w"> </span><span class="vg">element</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">represents</span><span class="w"> </span><span class="vg">your</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">jump</span><span class="w"> </span><span class="vg">length</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">position</span><span class="o">.</span>
<span class="vg">Your</span><span class="w"> </span><span class="vg">goal</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">reach</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">last</span><span class="w"> </span><span class="vg">index</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">jumps</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">example:</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">4</span><span class="p">]</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">jumps</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">reach</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">last</span><span class="w"> </span><span class="vg">index</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">2</span><span class="o">.</span><span class="w"> </span><span class="p">(</span><span class="vg">Jump</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="vg">step</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">index</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="il">3</span><span class="w"> </span><span class="vg">steps</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">last</span><span class="w"> </span><span class="vg">index</span><span class="o">.</span><span class="p">)</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>跟 <a href="#Jump-Game">jump-game</a>一样, 可以贪心。每次选择当前可以跳的范围内，下一次能跳得最远的 </p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">selectMaxIndex</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">range</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">max_</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">start</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">max_index</span> <span class="o">=</span> <span class="n">start</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">range</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">max_</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                <span class="n">max_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="p">;</span><span class="c1">//goal achived</span>
        <span class="k">return</span> <span class="n">max_index</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">jump</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">goal</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">cur</span> <span class="o">&lt;</span> <span class="n">goal</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">range</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">cur</span><span class="p">];</span>
            <span class="kt">int</span> <span class="n">next</span> <span class="o">=</span> <span class="n">selectMaxIndex</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">cur</span><span class="p">,</span> <span class="n">range</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span> <span class="c1">////每次选择当前可以跳的范围内，下一次能跳得最远的</span>
            <span class="k">if</span><span class="p">(</span><span class="n">next</span> <span class="o">&lt;=</span> <span class="n">cur</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
            <span class="o">++</span><span class="n">step</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">step</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>学习下 <a href="https://github.com/soulmachine/leetcode">人家的</a>代码就是简单.</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">jump</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">step</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">last</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="n">last</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">last</span> <span class="o">=</span> <span class="n">cur</span><span class="p">;</span>
                <span class="o">++</span><span class="n">step</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">cur</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="o">++</span><span class="n">step</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">cur</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">step</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h1>其他</h1>

<p><span id="Candy"></span></p>

<h2>Candy</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/candy/">Candy</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">There</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">N</span><span class="w"> </span><span class="vg">children</span><span class="w"> </span><span class="vg">standing</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">line</span><span class="o">.</span><span class="w"> </span><span class="vg">Each</span><span class="w"> </span><span class="vg">child</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">assigned</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">rating</span><span class="w"> </span><span class="vg">value</span><span class="o">.</span>

<span class="vg">You</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">giving</span><span class="w"> </span><span class="vg">candies</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">these</span><span class="w"> </span><span class="vg">children</span><span class="w"> </span><span class="vg">subjected</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">following</span>
<span class="nl">requirements:</span>

<span class="vg">Each</span><span class="w"> </span><span class="vg">child</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">least</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">candy</span><span class="o">.</span>
<span class="vg">Children</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">higher</span><span class="w"> </span><span class="vg">rating</span><span class="w"> </span><span class="vg">get</span><span class="w"> </span><span class="vg">more</span><span class="w"> </span><span class="vg">candies</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">their</span><span class="w"> </span><span class="vg">neighbors</span><span class="o">.</span>
<span class="vg">What</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">minimum</span><span class="w"> </span><span class="vg">candies</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">give</span><span class="o">?</span>
</pre></div>
<p>解题思路：</p>

<p>解析：注意理解题意 [3,2,2,3,1] 糖数量: 2,1,1,2,1; [4,2,3,4,1] 结果是 2,1,2,3,1. </p>

<h3>每次找最低点，再往回确定糖数量</h3>

<p>遍历一两遍即可,每次找下一次最低点，最低点的糖数量为1，再从最低的遍历到当前点得到结果。下面代码用了一个数组保存了每个child的结果，实际上只需用几个变量记录即可。
按照这个思路写了下面的比较戳的代码。</p>
<div class="highlight"><pre>    <span class="c1">//nextLowest and max index</span>
    <span class="kt">int</span> <span class="nf">nextLowest</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">ratings</span><span class="p">,</span> <span class="kt">int</span> <span class="n">startIndex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">startIndex</span> <span class="o">==</span> <span class="n">ratings</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">startIndex</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="n">startIndex</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">ratings</span><span class="p">[</span><span class="n">startIndex</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="n">startIndex</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">startIndex</span> <span class="o">==</span> <span class="n">ratings</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">startIndex</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">startIndex</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//use two other variables to store candies[index-1] candies[index+1]</span>
    <span class="c1">//can change the space complexity to O(1)</span>
    <span class="kt">int</span> <span class="nf">candy</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">ratings</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">size_t</span> <span class="n">len</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">len</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">len</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">curIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">nextLow</span> <span class="o">=</span> <span class="n">nextLowest</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">curIndex</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">candies</span><span class="p">(</span><span class="n">len</span><span class="p">);</span>
        <span class="k">while</span><span class="p">(</span><span class="n">curIndex</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">curIndex</span> <span class="o">==</span> <span class="n">nextLow</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">curIndex</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">candies</span><span class="p">[</span><span class="n">curIndex</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">candies</span><span class="p">[</span><span class="n">curIndex</span><span class="p">]</span> <span class="o">=</span> <span class="n">candies</span><span class="p">[</span><span class="n">curIndex</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                <span class="n">sum</span> <span class="o">+=</span> <span class="n">candies</span><span class="p">[</span><span class="n">curIndex</span><span class="p">];</span>
            <span class="p">}</span><span class="k">else</span>
            <span class="p">{</span>
                <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">nextLow</span><span class="p">;</span>
                <span class="k">while</span><span class="p">(</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="n">curIndex</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                    <span class="p">{</span>
                        <span class="k">if</span><span class="p">(</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">nextLow</span> <span class="o">&amp;&amp;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                            <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="k">else</span>
                            <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="n">sum</span> <span class="o">+=</span> <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
                    <span class="p">}</span><span class="k">else</span> <span class="c1">// ratings[index-1] &gt; ratings[index]</span>
                    <span class="p">{</span>
                        <span class="k">if</span><span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">nextLow</span> <span class="o">||</span> <span class="p">(</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">nextLow</span> <span class="o">&amp;&amp;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span>
                            <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="k">else</span>
                            <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="n">sum</span> <span class="o">+=</span> <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
                    <span class="p">}</span>
                    <span class="o">--</span><span class="n">index</span><span class="p">;</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">curIndex</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="c1">//4 2 3 [4] 1</span>
                        <span class="k">if</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                            <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                            <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//1 [2] 2</span>
                        <span class="k">else</span>
                            <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="n">sum</span> <span class="o">+=</span> <span class="n">candies</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">curIndex</span> <span class="o">=</span> <span class="n">nextLow</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="n">nextLow</span> <span class="o">=</span> <span class="n">nextLowest</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">curIndex</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">sum</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>从左到右从右到左双向遍历</h3>

<p>从<a href="https://oj.leetcode.com/discuss/76/does-anyone-have-a-better-idea">discuss</a>看到的答案，短小精悍的代码。思路也很清晰。</p>

<blockquote>
<div class="highlight"><pre><span class="nl">1</span><span class="o">.</span><span class="w"> </span><span class="vg">From</span><span class="w"> </span><span class="vg">left</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">right</span><span class="p">,</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">make</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">candies</span><span class="w"> </span><span class="vg">satisfy</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">condition</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">ratings</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">ratings</span><span class="p">[</span><span class="vg">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span><span class="p">]</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">candies</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">candies</span><span class="p">[</span><span class="vg">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span><span class="p">],</span><span class="w"> </span><span class="vg">just</span><span class="w"> </span><span class="vg">ignore</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">right</span><span class="w"> </span><span class="vg">neighbor</span><span class="w"> </span><span class="vg">as</span><span class="w"> </span><span class="vg">this</span><span class="w"> </span><span class="vg">moment</span><span class="o">.</span><span class="w"> </span><span class="vg">We</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">assume</span><span class="w"> </span><span class="vg">leftCandies</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">satisfied</span><span class="o">.</span>
<span class="nl">2</span><span class="o">.</span><span class="w"> </span><span class="vg">From</span><span class="w"> </span><span class="vg">right</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">left</span><span class="p">,</span><span class="w"> </span><span class="vg">almost</span><span class="w"> </span><span class="vg">like</span><span class="w"> </span><span class="vg">step</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">get</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">rightCandies</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">just</span><span class="w"> </span><span class="vg">satisfy</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">condition</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">ratings</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">ratings</span><span class="p">[</span><span class="vg">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span><span class="p">]</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">candies</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="vg">candies</span><span class="p">[</span><span class="vg">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="il">1</span><span class="p">]</span>
<span class="nl">3</span><span class="o">.</span><span class="w"> </span><span class="vg">For</span><span class="w"> </span><span class="vg">now</span><span class="p">,</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">leftCandies</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">rightCandies</span><span class="p">[</span><span class="vg">i</span><span class="p">],</span><span class="w"> </span><span class="vg">so</span><span class="w"> </span><span class="vg">how</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">satisfy</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">real</span><span class="w"> </span><span class="vg">condition</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">problem</span><span class="o">?</span><span class="w"> </span><span class="vg">Just</span><span class="w"> </span><span class="vg">make</span><span class="w"> </span><span class="vg">candies</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="vg">equals</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">maximum</span><span class="w"> </span><span class="vg">betweenleftCanides</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">rightCandies</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span>
</pre></div></blockquote>

<p>即把整个过程分为两个步骤，第一步从左到右，只要右边的ratings大于自己，右边的糖数量就＝自己+1, (先不管左边大于右边的情况)，这一步完成之后有条件,<code>ratings[i] &gt; ratings[i - 1] &amp;&amp; candies[i] &gt; candies[i - 1]</code> 然后再从右往左，一样的思路，使得<code>ratings[i] &gt; ratings[i + 1] &amp;&amp; candies[i] &gt; candies[i + 1]</code>。 最后candies再取两个中的max，这样就同时满足这两个条件。问题解决。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">candy2</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">ratings</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">candies</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="c1">//left to right</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">candies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">candies</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="n">candies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="n">candies</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">ratings</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">candies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">candies</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">candies</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">candies</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">total</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>备忘录法</h3>

<p>这个方法参考了<a href="https://github.com/soulmachine/leetcode">leetcode-cpp</a>。即用递归的方式使得分得candy数量同时满足以上两个条件。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">f</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">ratings</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">cache</span><span class="p">,</span> <span class="kt">int</span> <span class="n">index</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">cache</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="c1">//has not been calculated before</span>
        <span class="p">{</span>
            <span class="n">cache</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">ratings</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">cache</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">cache</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">f</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">cache</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ratings</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">cache</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">cache</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">f</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">cache</span><span class="p">,</span> <span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">cache</span><span class="p">[</span><span class="n">index</span><span class="p">];}</span>
    <span class="kt">int</span> <span class="nf">candy3</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">ratings</span><span class="p">){</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">ratings</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">cache</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">f</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">cache</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">total</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Container-With-Most-Water"></span></p>

<h2>Container With Most Water</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/container-with-most-water/">Container With Most Water</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="w"> </span><span class="vg">integers</span><span class="w"> </span><span class="vg">a1</span><span class="p">,</span><span class="w"> </span><span class="vg">a2</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="p">,</span><span class="w"> </span><span class="vg">an</span><span class="p">,</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">represents</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">point</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">coordinate</span><span class="w"> </span><span class="p">(</span><span class="vg">i</span><span class="p">,</span><span class="w"> </span><span class="vg">ai</span><span class="p">)</span><span class="o">.</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">vertical</span><span class="w"> </span><span class="vg">lines</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">drawn</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">endpoints</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">line</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="p">(</span><span class="vg">i</span><span class="p">,</span><span class="w"> </span><span class="vg">ai</span><span class="p">)</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="p">(</span><span class="vg">i</span><span class="p">,</span><span class="w"> </span><span class="il">0</span><span class="p">)</span><span class="o">.</span><span class="w"> </span><span class="vg">Find</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">lines</span><span class="p">,</span><span class="w"> </span><span class="vg">which</span><span class="w"> </span><span class="vg">together</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">x</span><span class="o">-</span><span class="vg">axis</span><span class="w"> </span><span class="vg">forms</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">container</span><span class="p">,</span><span class="w"> </span><span class="vg">such</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">container</span><span class="w"> </span><span class="vg">contains</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">most</span><span class="w"> </span><span class="vg">water</span><span class="o">.</span>
<span class="nl">Note:</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">may</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">slant</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">container</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>从 <a href="https://oj.leetcode.com/discuss/1074/anyone-who-has-a-o-n-algorithm">discuss</a> 得到的答案。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">maxArea</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">height</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">height</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">height</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="p">(</span><span class="n">right</span><span class="o">-</span><span class="n">left</span><span class="p">)</span> <span class="o">*</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">height</span><span class="p">[</span><span class="n">left</span><span class="p">],</span> <span class="n">height</span><span class="p">[</span><span class="n">right</span><span class="p">]));</span>
            <span class="k">if</span><span class="p">(</span><span class="n">height</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">[</span><span class="n">right</span><span class="p">])</span>
                <span class="o">++</span><span class="n">left</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="o">--</span><span class="n">right</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>怎么证明是对的?</p>

<blockquote>
<p>Suppose the returned result is not the optimal solution. Then there must exist an optimal solution, say a container with aol and aor (left and right respectively), such that it has a greater volume than the one we got. Since our algorithm stops only if the two pointers meet. So, we must have visited one of them but not the other. WLOG, let&#39;s say we visited aol but not aor. When a pointer stops at a_ol, it won&#39;t move until</p>

<ul>
<li>The other pointer also points to aol. In this case, iteration ends. But the other pointer must have visited aor on its way from right end to aol. Contradiction to our assumption that we didn&#39;t visit aor.</li>
<li>The other pointer arrives at a value, say arr, that is greater than aol before it reaches aor. In this case, we does move aol. But notice that the volume of aol and arr is already greater than aol and aor (as it is wider and heigher), which means that aol and aor is not the optimal solution -- Contradiction!</li>
</ul>
</blockquote>

<p>或者</p>

<p>v[low, high] 表示(low, hight)和x轴围成的容器装水的结果，假设height[low] &lt; height[high]，那么算法将low++, 这意味着v[low, high-1],v[low, high-2]等被忽略。v[low, high-1],v[low, high-2]…...不会大于v[low, high]，因为装水的容量是由宽度和短的那个height[low]决定的(low是固定的)，宽度显然(low, high)更宽。</p>

<p><span id="Gas-Station"></span></p>

<h2>Gas Station</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/gas-station/">Gas Station</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">There</span><span class="w"> </span><span class="vg">are</span><span class="w"> </span><span class="vg">N</span><span class="w"> </span><span class="vg">gas</span><span class="w"> </span><span class="vg">stations</span><span class="w"> </span><span class="vg">along</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">circular</span><span class="w"> </span><span class="vg">route</span><span class="p">,</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">amount</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">gas</span><span class="w"> </span><span class="vg">at</span>
<span class="vg">station</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">gas</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="o">.</span>

<span class="vg">You</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">car</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">unlimited</span><span class="w"> </span><span class="vg">gas</span><span class="w"> </span><span class="vg">tank</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">costs</span><span class="w"> </span><span class="vg">cost</span><span class="p">[</span><span class="vg">i</span><span class="p">]</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">gas</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">travel</span>
<span class="vg">from</span><span class="w"> </span><span class="vg">station</span><span class="w"> </span><span class="vg">i</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">its</span><span class="w"> </span><span class="vg">next</span><span class="w"> </span><span class="vg">station</span><span class="w"> </span><span class="p">(</span><span class="vg">i</span><span class="o">+</span><span class="il">1</span><span class="p">)</span><span class="o">.</span><span class="w"> </span><span class="vg">You</span><span class="w"> </span><span class="vg">begin</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">journey</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">empty</span>
<span class="vg">tank</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">gas</span><span class="w"> </span><span class="vg">stations</span><span class="o">.</span>

<span class="vg">Return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">starting</span><span class="w"> </span><span class="vg">gas</span><span class="w"> </span><span class="vg">station</span><span class="c1">&#39;s index if you can travel around the circuit</span>
<span class="vg">once</span><span class="p">,</span><span class="w"> </span><span class="vg">otherwise</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">-1</span><span class="o">.</span>

<span class="nl">Note:</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">solution</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">guaranteed</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">unique</span><span class="o">.</span>
</pre></div>
<p>解题思路：</p>

<h3>暴力法</h3>

<p>一个一个试～  <code>O(N^2)</code> 能AC。</p>
<div class="highlight"><pre>    <span class="kt">bool</span> <span class="nf">ok</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">gas</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">cost</span><span class="p">,</span> <span class="kt">int</span> <span class="n">startIndex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">gas</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">remain</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">startIndex</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">remain</span> <span class="o">+</span> <span class="n">gas</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">-</span> <span class="n">cost</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="n">remain</span> <span class="o">+=</span> <span class="n">gas</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">-</span> <span class="n">cost</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
            <span class="n">i</span><span class="o">++</span><span class="p">;</span>
            <span class="n">index</span>  <span class="o">=</span> <span class="p">(</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="n">n</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">canCompleteCircuit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">gas</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">cost</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">gas</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span>  <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">ok</span><span class="p">(</span><span class="n">gas</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>O(N)解法</h3>

<p>从<a href="https://oj.leetcode.com/discuss/4159/share-some-of-my-ideas">discuss</a>看来的答案。思路如下：</p>

<blockquote>
<div class="highlight"><pre><span class="nl">1</span><span class="o">.</span><span class="w"> </span><span class="vg">If</span><span class="w"> </span><span class="vg">car</span><span class="w"> </span><span class="vg">starts</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">reach</span><span class="w"> </span><span class="vg">B</span><span class="o">.</span><span class="w"> </span><span class="vg">Any</span><span class="w"> </span><span class="vg">station</span><span class="w"> </span><span class="vg">between</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">B</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">reach</span><span class="w"> </span><span class="vg">B</span><span class="o">.</span><span class="p">(</span><span class="vg">B</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">station</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">reach</span><span class="o">.</span><span class="p">)</span>
<span class="nl">2</span><span class="o">.</span><span class="w"> </span><span class="vg">If</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">gas</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">bigger</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">cost</span><span class="o">.</span><span class="w"> </span><span class="vg">There</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">solution</span><span class="o">.</span>
<span class="nl">3</span><span class="o">.</span><span class="w"> </span><span class="vg">Every</span><span class="w"> </span><span class="vg">time</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">fail</span><span class="w"> </span><span class="vg">happens</span><span class="p">,</span><span class="w"> </span><span class="vg">accumulate</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">amount</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">gas</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">needed</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">overcome</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">fail</span><span class="o">.</span><span class="w"> </span><span class="vg">After</span><span class="w"> </span><span class="vg">looping</span><span class="w"> </span><span class="vg">through</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">stations</span><span class="p">,</span><span class="w"> </span><span class="vg">if</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">gas</span><span class="w"> </span><span class="vg">left</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">more</span><span class="w"> </span><span class="vg">than</span><span class="w"> </span><span class="vg">gas</span><span class="w"> </span><span class="vg">needed</span><span class="p">,</span><span class="w"> </span><span class="vg">then</span><span class="w"> </span><span class="vg">we</span><span class="w"> </span><span class="vg">have</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">solution</span><span class="p">,</span><span class="w"> </span><span class="vg">otherwise</span><span class="w"> </span><span class="vg">not</span><span class="o">.</span>
</pre></div></blockquote>
<div class="highlight"><pre>     <span class="kt">int</span> <span class="nf">canCompleteCircuit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">gas</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">cost</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">gas</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">remain</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">remain</span> <span class="o">+</span> <span class="n">gas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">cost</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">start</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
                <span class="n">remain</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span>
                <span class="n">remain</span> <span class="o">+=</span> <span class="n">gas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">cost</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="n">sum</span> <span class="o">+=</span> <span class="n">gas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">cost</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">sum</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="nl">start</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Gray-Code"></span></p>

<h2>Gray Code</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/gray-code/">Gray Code</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">The</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">binary</span><span class="w"> </span><span class="vg">numeral</span><span class="w"> </span><span class="vg">system</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">two</span><span class="w"> </span><span class="vg">successive</span><span class="w"> </span><span class="vg">values</span><span class="w"> </span><span class="vg">differ</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">bit</span><span class="o">.</span>
<span class="vg">Given</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="w"> </span><span class="vg">integer</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">representing</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">total</span><span class="w"> </span><span class="vg">number</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">bits</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">code</span><span class="p">,</span><span class="w"> </span><span class="vg">print</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="o">.</span><span class="w"> </span><span class="vg">A</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">must</span><span class="w"> </span><span class="vg">begin</span><span class="w"> </span><span class="vg">with</span><span class="w"> </span><span class="il">0</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">2</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="p">[</span><span class="il">0</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">2</span><span class="p">]</span><span class="o">.</span><span class="w"> </span><span class="vg">Its</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="nl">is:</span>
<span class="nl">00</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">0</span>
<span class="nl">01</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">1</span>
<span class="nl">11</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">3</span>
<span class="nl">10</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="il">2</span>
<span class="nl">Note:</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">n</span><span class="p">,</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">not</span><span class="w"> </span><span class="vg">uniquely</span><span class="w"> </span><span class="vg">defined</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="il">0</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">1</span><span class="p">]</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">also</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">valid</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">sequence</span><span class="w"> </span><span class="vg">according</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">above</span><span class="w"> </span><span class="vg">definition</span><span class="o">.</span><span class="w">    </span>
<span class="vg">For</span><span class="w"> </span><span class="vg">now</span><span class="p">,</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">judge</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">able</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">judge</span><span class="w"> </span><span class="vg">based</span><span class="w"> </span><span class="vg">on</span><span class="w"> </span><span class="vg">one</span><span class="w"> </span><span class="vg">instance</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">gray</span><span class="w"> </span><span class="vg">code</span><span class="w"> </span><span class="vg">sequence</span><span class="o">.</span><span class="w"> </span><span class="vg">Sorry</span><span class="w"> </span><span class="vg">about</span><span class="w"> </span><span class="vg">that</span><span class="o">.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<h3>逆序</h3>

<p>注意观察，n每增加1，即是在n-1的结果之上，最高位加1，并按照n-1的逆序。 </p>
<div class="highlight"><pre><span class="vg">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span>
<span class="vg">n</span><span class="o">=</span><span class="il">2</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="o">---</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
<span class="vg">n</span><span class="o">=</span><span class="il">3</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
<span class="o">------</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">1</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">1</span><span class="w"> </span>
<span class="nl">1</span><span class="w"> </span><span class="il">0</span><span class="w"> </span><span class="il">0</span><span class="w"> </span>
</pre></div><div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">grayCode</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">len</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">--</span><span class="p">)</span>
                <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">i</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<h3>公式法</h3>

<p><a href="http://zh.wikipedia.org/zh-cn/%E6%A0%BC%E9%9B%B7%E7%A0%81">格雷码</a></p>
<div class="highlight"><pre><span class="vg">G</span><span class="err">：格雷码</span><span class="w">  </span><span class="vg">B</span><span class="err">：二进制码</span><span class="w"> </span>
<span class="vg">G</span><span class="p">(</span><span class="vg">N</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="vg">B</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="o">/</span><span class="il">2</span><span class="p">)</span><span class="w"> </span><span class="ow">XOR</span><span class="w"> </span><span class="vg">B</span><span class="p">(</span><span class="vg">n</span><span class="p">)</span><span class="w"> </span>
<span class="vg">Binary</span><span class="w"> </span><span class="vg">Code</span><span class="p">(</span><span class="il">1011</span><span class="p">)</span><span class="err">要转换成</span><span class="vg">Gray</span><span class="w"> </span><span class="vg">Code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="il">1011</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="il">1</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="vg">1011</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">1110</span><span class="w"> </span>
</pre></div><div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">grayCode</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">n</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">;</span><span class="c1">//std::pow(2,n);</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">(</span><span class="n">len</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span><span class="o">^</span><span class="n">i</span><span class="p">;</span>
        <span class="k">return</span> <span class="nf">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p><span id="Max-Points-on-a-Line"></span></p>

<h2>Max Points on a Line</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/max-points-on-a-line/">Max Points on a Line</a></p>

<blockquote>
<p>Given n points on a 2D plane, find the maximum number of points that lie on
the same straight line.</p>
</blockquote>

<p>解题思路： </p>

<p>一种解法是用map，斜率作为key，对每一个点，找过此点斜率相同的点数量。double数值作为map的key貌似不好，这样总感觉挺别扭的……。</p>

<p>注意，斜率不存在的情况，(所有)点重合的情况。
感觉还是用新写一个直线类比较好，下面的<a href="#method2">方法二</a>就采取了一种类似的方法～或者用c++里的pair,
存斜率，不过得约下分。</p>

<p>第一种方法若用Java写就要注意了，Double作为key时得注意，<em>斜率+0和-0用Double作为key时不一样</em>。你可以试着输出Double +.0 和 Double -.0的hashcode，明显是不一样的。</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">maxPoints</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">points</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">points</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
    <span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">slopes</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">slopes</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">dup</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span> <span class="o">==</span> <span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span> <span class="o">==</span> <span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="o">++</span><span class="n">dup</span><span class="p">;</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="kt">double</span> <span class="n">deltaY</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span> <span class="o">-</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">;</span> 
            <span class="kt">double</span> <span class="n">deltaX</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span> <span class="o">-</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">;</span> 
            <span class="kt">double</span> <span class="n">slope</span> <span class="o">=</span> <span class="p">(</span><span class="n">deltaX</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="nl">INT_MAX</span><span class="p">:</span> <span class="n">deltaY</span> <span class="o">/</span> <span class="n">deltaX</span><span class="p">);</span> <span class="c1">//yline&#39;s slope INT_MAX</span>
            <span class="c1">//if(deltaY == 0) // +0.0 != -0.0</span>
            <span class="c1">//    slope = .0;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">slopes</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">slope</span><span class="p">)</span> <span class="o">!=</span> <span class="n">slopes</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
                <span class="n">slopes</span><span class="p">[</span><span class="n">slope</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="n">slopes</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">slope</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">result</span> <span class="o">&lt;</span> <span class="n">dup</span><span class="p">)</span> <span class="c1">//all point is the same</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">dup</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">slopes</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">slopes</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span> <span class="o">+</span> <span class="n">dup</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span> <span class="o">+</span> <span class="n">dup</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id = "method2">
方法二，自己新写一个类，科学的写法是斜率+斜率上一点构成直线，然后用另外的直线斜率相等且也过相同的一个点才判断两条直线是重合的，这里就偷懒了，构造直线的时候总用同一个点。
写Hash函数的时候得注意下, 相同的直线(斜率)映射的hash函数要一致才OK。即<em>== 为true时，hash必须一样</em>。
</span></p>
<div class="highlight"><pre><span class="k">struct</span> <span class="n">DeltaPoint</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">xx</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">yy</span><span class="p">;</span>
    <span class="n">DeltaPoint</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span><span class="o">:</span><span class="n">xx</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">yy</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="p">{}</span>
    <span class="n">DeltaPoint</span><span class="p">()</span><span class="o">:</span><span class="n">xx</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">yy</span><span class="p">(</span><span class="mi">0</span><span class="p">){}</span>
    <span class="kt">bool</span> <span class="k">operator</span> <span class="o">==</span> <span class="p">(</span><span class="k">const</span> <span class="n">DeltaPoint</span> <span class="o">&amp;</span><span class="n">l</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l</span><span class="p">.</span><span class="n">xx</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">xx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l</span><span class="p">.</span><span class="n">xx</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">xx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">l</span><span class="p">.</span><span class="n">yy</span> <span class="o">*</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">l</span><span class="p">.</span><span class="n">xx</span> <span class="o">-</span> <span class="n">yy</span> <span class="o">*</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">xx</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-7</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hash_func</span>
<span class="p">{</span>
    <span class="kt">size_t</span> <span class="k">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">DeltaPoint</span> <span class="o">&amp;</span><span class="n">l</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="n">hash</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">h</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">l</span><span class="p">.</span><span class="n">xx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">return</span> <span class="nf">h</span><span class="p">(</span><span class="n">l</span><span class="p">.</span><span class="n">yy</span> <span class="o">/</span> <span class="n">l</span><span class="p">.</span><span class="n">xx</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">bool</span> <span class="k">operator</span> <span class="o">==</span> <span class="p">(</span><span class="k">const</span> <span class="n">Point</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">Point</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">maxPoints2</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">points</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">points</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span><span class="p">;</span>
    <span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">DeltaPoint</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span>  <span class="n">hash_func</span><span class="o">&gt;</span> <span class="n">countMap</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Point</span> <span class="o">&amp;</span><span class="n">p0</span> <span class="o">=</span> <span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="kt">int</span> <span class="n">same</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">countMap</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Point</span> <span class="o">&amp;</span><span class="n">p1</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">p1</span> <span class="o">==</span> <span class="n">p0</span><span class="p">)</span>
                <span class="p">{</span><span class="o">++</span><span class="n">same</span><span class="p">;</span> <span class="k">continue</span><span class="p">;}</span>
            <span class="n">DeltaPoint</span> <span class="n">pp</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">p0</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p1</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">p0</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
            <span class="n">countMap</span><span class="p">[</span><span class="n">pp</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">same</span><span class="p">);</span><span class="c1">//if only the same points</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">countMap</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">countMap</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span> <span class="o">+</span> <span class="n">same</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span> <span class="o">+</span> <span class="n">same</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id="Pascal's-Triangle"></span></p>

<h2>Pascal&#39;s Triangle</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/pascals-triangle/">Pascal&#39;s Triangle</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">numRows</span><span class="p">,</span><span class="w"> </span><span class="vg">generate</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">first</span><span class="w"> </span><span class="vg">numRows</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">Pascal</span><span class="c1">&#39;s triangle.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">numRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">5</span><span class="p">,</span>
<span class="vg">Return</span>
<span class="p">[</span>
<span class="w">     </span><span class="p">[</span><span class="il">1</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">1</span><span class="p">],</span>
<span class="w">   </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">1</span><span class="p">],</span>
<span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">4</span><span class="p">,</span><span class="il">6</span><span class="p">,</span><span class="il">4</span><span class="p">,</span><span class="il">1</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
<p>解题思路：</p>

<p>杨辉三角～</p>
<div class="highlight"><pre>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">generate</span><span class="p">(</span><span class="kt">int</span> <span class="n">numRows</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numRows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">row</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
                <span class="n">row</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
            <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">row</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
<p>还可以用二项式系数那个公式算。在<a href="http://tanglei.me/leetcode/pascals-triangle-ii.html">Pascal&#39;s Triangle II</a>中有，这里就不再贴了。</p>

<p><span id="Pascal's-Triangle-II"></span></p>

<h2>Pascal&#39;s Triangle II</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/pascals-triangle-ii/">Pascal&#39;s Triangle II</a></p>

<blockquote>
</blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">index</span><span class="w"> </span><span class="vg">k</span><span class="p">,</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">kth</span><span class="w"> </span><span class="vg">row</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">Pascal</span><span class="c1">&#39;s triangle.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span><span class="vg">given</span><span class="w"> </span><span class="vg">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="il">3</span><span class="p">,</span>
<span class="vg">Return</span><span class="w"> </span><span class="p">[</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">1</span><span class="p">]</span><span class="o">.</span>
<span class="nl">Note:</span>
<span class="vg">Could</span><span class="w"> </span><span class="vg">you</span><span class="w"> </span><span class="vg">optimize</span><span class="w"> </span><span class="vg">your</span><span class="w"> </span><span class="vg">algorithm</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">use</span><span class="w"> </span><span class="vg">only</span><span class="w"> </span><span class="vg">O</span><span class="p">(</span><span class="vg">k</span><span class="p">)</span><span class="w"> </span><span class="vg">extra</span><span class="w"> </span><span class="vg">space</span><span class="o">?</span>
</pre></div>
<p>解题思路：</p>

<p>二项式系数求法。</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">C</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">k</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">)</span> <span class="k">return</span> <span class="n">C</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="n">k</span><span class="p">);</span>
        <span class="c1">//C(7,3)=</span>
        <span class="c1">//7*6*5 / 1*2*3</span>
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//int may overflow</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">result</span><span class="o">=</span> <span class="n">result</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">result</span><span class="p">;</span><span class="c1">//including k == 0</span>
    <span class="p">}</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">getRow</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="c1">//3-&gt;2: [0,1]  4-&gt;3:[0,2]</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">mid</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
            <span class="n">result</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">]</span><span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">move</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>    
    <span class="p">}</span>
</pre></div>
<p><span id="Remove-Element"></span></p>

<h2>Remove Element</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/remove-element/">Remove Element</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">array</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">a</span><span class="w"> </span><span class="vg">value</span><span class="p">,</span><span class="w"> </span><span class="vg">remove</span><span class="w"> </span><span class="vg">all</span><span class="w"> </span><span class="vg">instances</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">that</span><span class="w"> </span><span class="vg">value</span><span class="w"> </span><span class="vg">in</span><span class="w"> </span><span class="vg">place</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">new</span><span class="w"> </span><span class="vg">length</span><span class="o">.</span>
<span class="vg">The</span><span class="w"> </span><span class="vg">order</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">elements</span><span class="w"> </span><span class="vg">can</span><span class="w"> </span><span class="vg">be</span><span class="w"> </span><span class="vg">changed</span><span class="o">.</span><span class="w"> </span><span class="vg">It</span><span class="w"> </span><span class="vg">doesn</span><span class="c1">&#39;t matter what you leave beyond the new length.</span>
</pre></div></blockquote>

<p>解题思路：</p>

<p>直接两个index, 跟目标不同就复制下, 不然只移动后面一个index.
跟<a href="#Remove-Duplicates-From-Sorted-Array">Remove Duplicates from Sorted Array</a>这道题类似.</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">removeElement</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">elem</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">elem</span><span class="p">)</span>
            <span class="n">A</span><span class="p">[</span><span class="n">index</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="k">return</span> <span class="n">index</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><span id="Trapping-Rain-Water"></span></p>

<h2>Trapping Rain Water</h2>

<p>题目来源：<a href="https://oj.leetcode.com/problems/trapping-rain-water/">Trapping Rain Water</a></p>

<blockquote>
<div class="highlight"><pre><span class="vg">Given</span><span class="w"> </span><span class="vg">n</span><span class="w"> </span><span class="vg">non</span><span class="o">-</span><span class="vg">negative</span><span class="w"> </span><span class="vg">integers</span><span class="w"> </span><span class="vg">representing</span><span class="w"> </span><span class="vg">an</span><span class="w"> </span><span class="vg">elevation</span><span class="w"> </span><span class="vg">map</span><span class="w"> </span><span class="vg">where</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">width</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">each</span><span class="w"> </span><span class="vg">bar</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="il">1</span><span class="p">,</span><span class="w"> </span><span class="vg">compute</span><span class="w"> </span><span class="vg">how</span><span class="w"> </span><span class="vg">much</span><span class="w"> </span><span class="vg">water</span><span class="w"> </span><span class="vg">it</span><span class="w"> </span><span class="vg">is</span><span class="w"> </span><span class="vg">able</span><span class="w"> </span><span class="vg">to</span><span class="w"> </span><span class="vg">trap</span><span class="w"> </span><span class="vg">after</span><span class="w"> </span><span class="vg">raining</span><span class="o">.</span>
<span class="vg">For</span><span class="w"> </span><span class="vg">example</span><span class="p">,</span><span class="w"> </span>
<span class="vg">Given</span><span class="w"> </span><span class="p">[</span><span class="il">0</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">0</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">0</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">3</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">,</span><span class="il">2</span><span class="p">,</span><span class="il">1</span><span class="p">],</span><span class="w"> </span><span class="vg">return</span><span class="w"> </span><span class="il">6</span><span class="o">.</span>
</pre></div></blockquote>

<p><img src="http://tl3shi.github.com/resource/blogimage/leetcode-rainwatertrap.png" alt=""></p>

<p>解题思路：</p>

<h3>O(2*n)</h3>

<p>先找打最高的柱子, 然后从两边往中间走, 如从左到右时, maxHeight记录到当前位置最高的柱子, 若当前高度cur小于maxHeight, 则 water += maxHeight - cur;</p>

<p>参考了 <a href="https://github.com/soulmachine/leetcode">soulmachine &#39;s leetcode</a>; </p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">trap</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">maxIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">A</span><span class="p">[</span><span class="n">maxIndex</span><span class="p">])</span> <span class="n">maxIndex</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">lastMaxHeight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">water</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">maxIndex</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">lastMaxHeight</span><span class="p">)</span> 
                <span class="n">lastMaxHeight</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="k">else</span>
                <span class="n">water</span> <span class="o">+=</span> <span class="n">lastMaxHeight</span> <span class="o">-</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="n">lastMaxHeight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">maxIndex</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">lastMaxHeight</span><span class="p">)</span>
                <span class="n">lastMaxHeight</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="k">else</span>
                <span class="n">water</span> <span class="o">+=</span> <span class="n">lastMaxHeight</span> <span class="o">-</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">water</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h3>O(n)</h3>

<blockquote>
<div class="highlight"><pre><span class="vg">one</span><span class="w"> </span><span class="vg">pass</span><span class="w"> </span><span class="vg">and</span><span class="w"> </span><span class="vg">constant</span><span class="w"> </span><span class="vg">space</span><span class="p">,</span><span class="vg">one</span><span class="w"> </span><span class="vg">point</span><span class="w"> </span><span class="vg">starts</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">left</span><span class="p">,</span><span class="vg">another</span><span class="w"> </span><span class="vg">starts</span><span class="w"> </span><span class="vg">from</span><span class="w"> </span><span class="vg">right</span><span class="p">,</span><span class="vg">and</span><span class="w"> </span><span class="vg">store</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">level</span><span class="w"> </span><span class="vg">at</span><span class="w"> </span><span class="vg">present</span><span class="p">,</span><span class="vg">calculate</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">area</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">rectangle</span><span class="w"> </span><span class="s2">&quot;all&quot;</span><span class="p">,</span><span class="vg">and</span><span class="w"> </span><span class="vg">remove</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">area</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">block</span><span class="w"> </span><span class="s2">&quot;block&quot;</span><span class="o">.</span><span class="vg">It</span><span class="c1">&#39;s the answer. </span>
</pre></div></blockquote>

<p>先假设没有中间的柱子，只有最边上的两根，算出容量，然后往中间走，一个一个的加柱子，加容量，计算柱子挡住的容量，最后减去即可。  </p>

<p>参考 <a href="https://oj.leetcode.com/discuss/3546/any-one-pass-solutions">discuss</a>.</p>
<div class="highlight"><pre>    <span class="kt">int</span> <span class="nf">trap</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">int</span> <span class="n">block</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">min</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">right</span><span class="p">]);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">tmp</span> <span class="o">&gt;</span> <span class="n">cur</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">total</span> <span class="o">+=</span> <span class="p">(</span><span class="n">tmp</span> <span class="o">-</span> <span class="n">cur</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
                <span class="n">cur</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">A</span><span class="p">[</span><span class="n">right</span><span class="p">])</span>
                <span class="n">block</span> <span class="o">+=</span> <span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="o">++</span><span class="p">];</span>
            <span class="k">else</span>
                <span class="n">block</span> <span class="o">+=</span> <span class="n">A</span><span class="p">[</span><span class="n">right</span><span class="o">--</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">total</span> <span class="o">-</span> <span class="n">block</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<p>类似的题目还有 <a href="#Container-With-Most-Water">Container With Most Water</a>.</p>

				          	</article>
				        </div>
						</div>
						<script src='js/jquery-1.10.2.min.js'></script>
						<script src='js/jquery.ztree.all-3.5.min.js'></script>
						<script src='js/jquery.ztree_toc.min.js'></script>
						<SCRIPT type="text/javascript" >
							<!--
							$(document).ready(function(){
								$('#tree').ztree_toc({
									is_auto_number:true,
                                    use_head_anchor: true,
									documment_selector:'.markdown-body'
								});
							});
							//-->
						</SCRIPT>
		      </body>
		    </html>
		  
